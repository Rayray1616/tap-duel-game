function e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var r,i,s,a,o={exports:{}},l={},c={exports:{}},u={};function d(){if(r)return u;r=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,x={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function E(t,n,r){var i,s={},a=null,o=null;if(null!=n)for(i in void 0!==n.ref&&(o=n.ref),void 0!==n.key&&(a=""+n.key),n)S.call(n,i)&&!k.hasOwnProperty(i)&&(s[i]=n[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:e,type:t,key:a,ref:o,props:s,_owner:x.current}}function C(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var j=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function R(n,r,i,s,a){var o=typeof n;"undefined"!==o&&"boolean"!==o||(n=null);var l=!1;if(null===n)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case e:case t:l=!0}}if(l)return a=a(l=n),n=""===s?"."+T(l,0):s,_(a)?(i="",null!=n&&(i=n.replace(j,"$&/")+"/"),R(a,r,i,"",function(e){return e})):null!=a&&(C(a)&&(a=function(t,n){return{$$typeof:e,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+n)),r.push(a)),1;if(l=0,s=""===s?".":s+":",_(n))for(var c=0;c<n.length;c++){var u=s+T(o=n[c],c);l+=R(o,r,i,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(n),"function"==typeof u)for(n=u.call(n),c=0;!(o=n.next()).done;)l+=R(o=o.value,r,i,u=s+T(o,c++),a);else if("object"===o)throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",function(e){return t.call(n,e,i++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},I={transition:null},A={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:I,ReactCurrentOwner:x};function L(){throw Error("act(...) is not supported in production builds of React.")}return u.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},u.Component=y,u.Fragment=n,u.Profiler=s,u.PureComponent=b,u.StrictMode=i,u.Suspense=c,u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,u.act=L,u.cloneElement=function(t,n,r){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),s=t.key,a=t.ref,o=t._owner;if(null!=n){if(void 0!==n.ref&&(a=n.ref,o=x.current),void 0!==n.key&&(s=""+n.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in n)S.call(n,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===n[c]&&void 0!==l?l[c]:n[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:e,type:t.type,key:s,ref:a,props:i,_owner:o}},u.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},u.createElement=E,u.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},u.createRef=function(){return{current:null}},u.forwardRef=function(e){return{$$typeof:l,render:e}},u.isValidElement=C,u.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},u.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},u.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},u.unstable_act=L,u.useCallback=function(e,t){return P.current.useCallback(e,t)},u.useContext=function(e){return P.current.useContext(e)},u.useDebugValue=function(){},u.useDeferredValue=function(e){return P.current.useDeferredValue(e)},u.useEffect=function(e,t){return P.current.useEffect(e,t)},u.useId=function(){return P.current.useId()},u.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},u.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},u.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},u.useMemo=function(e,t){return P.current.useMemo(e,t)},u.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},u.useRef=function(e){return P.current.useRef(e)},u.useState=function(e){return P.current.useState(e)},u.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},u.useTransition=function(){return P.current.useTransition()},u.version="18.3.1",u}function h(){return i||(i=1,c.exports=d()),c.exports}
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f,p,m,g,y,v=(a||(a=1,o.exports=function(){if(s)return l;s=1;var e=h(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(e,n,s){var o,l={},c=null,u=null;for(o in void 0!==s&&(c=""+s),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)r.call(n,o)&&!a.hasOwnProperty(o)&&(l[o]=n[o]);if(e&&e.defaultProps)for(o in n=e.defaultProps)void 0===l[o]&&(l[o]=n[o]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:i.current}}return l.Fragment=n,l.jsx=o,l.jsxs=o,l}()),o.exports),b={},w={exports:{}},_={},S={exports:{}},x={};function k(){return p||(p=1,S.exports=(f||(f=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function w(e){if(m=!1,b(e),!p)if(null!==n(l))p=!0,P(_);else{var t=n(c);null!==t&&I(w,t.startTime-e)}}function _(t,i){p=!1,m&&(m=!1,y(E),E=-1),f=!0;var s=h;try{for(b(i),d=n(l);null!==d&&(!(d.expirationTime>i)||t&&!T());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var o=a(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(l)&&r(l),b(i)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&I(w,g.startTime-i),u=!1}return u}finally{d=null,h=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,x=!1,k=null,E=-1,C=5,j=-1;function T(){return!(e.unstable_now()-j<C)}function R(){if(null!==k){var t=e.unstable_now();j=t;var n=!0;try{n=k(!0,t)}finally{n?S():(x=!1,k=null)}}else x=!1}if("function"==typeof v)S=function(){v(R)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,N=O.port2;O.port1.onmessage=R,S=function(){N.postMessage(null)}}else S=function(){g(R,0)};function P(e){k=e,x||(x=!0,S())}function I(t,n){E=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,P(_))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,s){var a=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(r.sortIndex=s,t(c,r),null===n(l)&&r===n(c)&&(m?(y(E),E=-1):m=!0,I(w,s-a))):(r.sortIndex=o,t(l,r),p||f||(p=!0,P(_))),r},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(x)),x)),S.exports}
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function E(){if(m)return _;m=1;var e=h(),t=k();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(e,t){a(e,t),a(e+"Capture",t)}function a(e,t){for(i[e]=t,e=0;e<t.length;e++)r.add(t[e])}var o=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function f(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){p[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];p[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){p[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){p[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){p[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){p[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){p[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){p[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){p[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,n,r){var i=p.hasOwnProperty(t)?p[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!l.call(d,e)||!l.call(u,e)&&(c.test(e)?d[e]=!0:(u[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,y);p[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,y);p[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,y);p[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){p[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),p.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){p[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),L=Symbol.iterator;function U(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=L&&e[L]||e["@@iterator"])?e:null}var D,$=Object.assign;function M(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function z(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case S:return"Portal";case C:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case N:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case j:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function F(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Vl){return e.body}}function Y(e,t){var n=t.checked;return $({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ne=Array.isArray;function re(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return $({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(n(92));if(ne(r)){if(1<r.length)throw Error(n(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:K(r)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,de,he=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(n(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Ee=null;function Ce(e){if(e=ki(e)){if("function"!=typeof xe)throw Error(n(280));var t=e.stateNode;t&&(t=Ci(t),xe(e.stateNode,e.type,t))}}function je(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function Te(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Re(e,t){return e(t)}function Oe(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Re(e,t,n)}finally{Ne=!1,(null!==ke||null!==Ee)&&(Oe(),Te())}}function Ie(e,t){var r=e.stateNode;if(null===r)return null;var i=Ci(r);if(null===i)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(n(231,t,typeof r));return r}var Ae=!1;if(o)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){Ae=!1}function Ue(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,$e=null,Me=!1,Be=null,We={onError:function(e){De=!0,$e=e}};function ze(e,t,n,r,i,s,a,o,l){De=!1,$e=null,Ue.apply(We,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Fe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(n(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(n(188));return t!==e?null:e}for(var r=e,i=t;;){var s=r.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(i=s.return)){r=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Ke(s),e;if(a===i)return Ke(s),t;a=a.sibling}throw Error(n(188))}if(r.return!==i.return)r=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,i=a;break}if(l===i){o=!0,i=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,i=s;break}if(l===i){o=!0,i=a,r=s;break}l=l.sibling}if(!o)throw Error(n(189))}}if(r.alternate!==i)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?e:t}(e),null!==e?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ge=t.unstable_scheduleCallback,Je=t.unstable_cancelCallback,Ye=t.unstable_shouldYield,Qe=t.unstable_requestPaint,Xe=t.unstable_now,Ze=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,tt=t.unstable_UserBlockingPriority,nt=t.unstable_NormalPriority,rt=t.unstable_LowPriority,it=t.unstable_IdlePriority,st=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ct|0)|0},lt=Math.log,ct=Math.LN2;var ut=64,dt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return!(4194240&(ut<<=1))&&(ut=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function _t(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var St,xt,kt,Et,Ct,jt=!1,Tt=[],Rt=null,Ot=null,Nt=null,Pt=new Map,It=new Map,At=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ut(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Dt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function $t(e){var t=xi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Fe(n)))return e.blockedOn=t,void Ct(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Bt(e,t,n){Mt(e)&&n.delete(t)}function Wt(){jt=!1,null!==Rt&&Mt(Rt)&&(Rt=null),null!==Ot&&Mt(Ot)&&(Ot=null),null!==Nt&&Mt(Nt)&&(Nt=null),Pt.forEach(Bt),It.forEach(Bt)}function zt(e,n){e.blockedOn===n&&(e.blockedOn=null,jt||(jt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Wt)))}function qt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Rt&&zt(Rt,e),null!==Ot&&zt(Ot,e),null!==Nt&&zt(Nt,e),Pt.forEach(t),It.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)$t(n),null===n.blockedOn&&At.shift()}var Ft=b.ReactCurrentBatchConfig,Kt=!0;function Ht(e,t,n,r){var i=wt,s=Ft.transition;Ft.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=i,Ft.transition=s}}function Vt(e,t,n,r){var i=wt,s=Ft.transition;Ft.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=i,Ft.transition=s}}function Gt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Jr(e,t,r,Jt,n),Ut(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Rt=Dt(Rt,e,t,n,r,i),!0;case"dragenter":return Ot=Dt(Ot,e,t,n,r,i),!0;case"mouseover":return Nt=Dt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Dt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,It.set(s,Dt(It.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ut(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var s=ki(i);if(null!==s&&St(s),null===(s=Yt(e,t,n,r))&&Jr(e,t,r,Jt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Jr(e,t,r,null,n)}}var Jt=null;function Yt(e,t,n,r){if(Jt=null,null!==(e=xi(e=Se(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Fe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case et:return 1;case tt:return 4;case nt:case rt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function an(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return $(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var on,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(un),hn=$({},un,{view:0,detail:0}),fn=an(hn),pn=$({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=an(pn),gn=an($({},pn,{dataTransfer:0})),yn=an($({},hn,{relatedTarget:0})),vn=an($({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=$({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=an(bn),_n=an($({},un,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Cn(){return En}var jn=$({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(jn),Rn=an($({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=an($({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Nn=an($({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=$({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=an(Pn),An=[9,13,27,32],Ln=o&&"CompositionEvent"in window,Un=null;o&&"documentMode"in document&&(Un=document.documentMode);var Dn=o&&"TextEvent"in window&&!Un,$n=o&&(!Ln||Un&&8<Un&&11>=Un),Mn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fn[e.type]:"textarea"===t}function Hn(e,t,n,r){je(r),0<(t=Qr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Gn=null;function Jn(e){zr(e,0)}function Yn(e){if(G(Ei(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(o){var Zn;if(o){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"==typeof tr.oninput}Zn=er}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function nr(){Vn&&(Vn.detachEvent("onpropertychange",rr),Gn=Vn=null)}function rr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,Se(e)),Pe(Jn,t)}}function ir(e,t,n){"focusin"===e?(nr(),Gn=n,(Vn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var lr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function cr(e,t){if(lr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!l.call(t,i)||!lr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dr(n,s);var a=dr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=o&&"documentMode"in document&&11>=document.documentMode,yr=null,br=null,_r=null,Sr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Sr||null==yr||yr!==J(r)||("selectionStart"in(r=yr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&cr(_r,r)||(_r=r,0<(r=Qr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Cr={},jr={};function Tr(e){if(Cr[e])return Cr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return Cr[e]=n[t];return e}o&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Rr=Tr("animationend"),Or=Tr("animationiteration"),Nr=Tr("animationstart"),Pr=Tr("transitionend"),Ir=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Ir.set(e,t),s(t,[e])}for(var Ur=0;Ur<Ar.length;Ur++){var Dr=Ar[Ur];Lr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Lr(Rr,"onAnimationEnd"),Lr(Or,"onAnimationIteration"),Lr(Nr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Pr,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat($r));function Br(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,i,s,a,o,l,c){if(ze.apply(this,arguments),De){if(!De)throw Error(n(198));var u=$e;De=!1,$e=null,Me||(Me=!0,Be=u)}}(i,t,void 0,e),e.currentTarget=null}function zr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Br(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Br(i,o,c),s=l}}}if(Me)throw e=Be,Me=!1,Be=null,e}function Fr(e,t){var n=t[wi];void 0===n&&(n=t[wi]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Kr(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Hr]){e[Hr]=!0,r.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||Kr(t,!1,e),Kr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,Kr("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Qt(t)){case 1:var i=Ht;break;case 4:i=Vt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Jr(e,t,n,r,i){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=xi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Pe(function(){var r=s,i=Se(n),a=[];e:{var o=Ir.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Rr:case Or:case Nr:l=vn;break;case Pr:l=Nn;break;case"scroll":l=fn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Rn}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ie(p,h))&&u.push(Yr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!xi(c)&&!c[bi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xi(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Rn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Ei(l),f=null==c?o:Ei(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,xi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Xr(f))p++;for(f=0,m=h;m;m=Xr(m))f++;for(;0<p-f;)u=Xr(u),p--;for(;0<f-p;)h=Xr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Xr(u),h=Xr(h)}u=null}else u=null;null!==l&&Zr(a,o,l,u,!1),null!==c&&null!==d&&Zr(a,d,c,u,!0)}if("select"===(l=(o=r?Ei(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(Kn(o))if(Xn)g=or;else{g=sr;var y=ir}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&te(o,"number",o.value)),y=r?Ei(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(yr=y,br=r,_r=null);break;case"focusout":_r=br=yr=null;break;case"mousedown":Sr=!0;break;case"contextmenu":case"mouseup":case"dragend":Sr=!1,xr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(a,n,i)}var v;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&($n&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(v=tn()):(Zt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(y=Qr(r,b)).length&&(b=new _n(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Ln&&Wn(e,t)?(e=tn(),en=Zt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}zr(a,t)})}function Yr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ie(e,n))&&r.unshift(Yr(e,s,i)),null!=(s=Ie(e,t))&&r.push(Yr(e,s,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Ie(n,s))&&a.unshift(Yr(n,l,o)):i||null!=(l=Ie(n,s))&&a.push(Yr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ei=/\r\n?/g,ti=/\u0000|\uFFFD/g;function ni(e){return("string"==typeof e?e:""+e).replace(ei,"\n").replace(ti,"")}function ri(e,t,r){if(t=ni(t),ni(e)!==t&&r)throw Error(n(425))}function ii(){}var si=null,ai=null;function oi(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var li="function"==typeof setTimeout?setTimeout:void 0,ci="function"==typeof clearTimeout?clearTimeout:void 0,ui="function"==typeof Promise?Promise:void 0,di="function"==typeof queueMicrotask?queueMicrotask:void 0!==ui?function(e){return ui.resolve(null).then(e).catch(hi)}:li;function hi(e){setTimeout(function(){throw e})}function fi(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function pi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function mi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var gi=Math.random().toString(36).slice(2),yi="__reactFiber$"+gi,vi="__reactProps$"+gi,bi="__reactContainer$"+gi,wi="__reactEvents$"+gi,_i="__reactListeners$"+gi,Si="__reactHandles$"+gi;function xi(e){var t=e[yi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bi]||n[yi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=mi(e);null!==e;){if(n=e[yi])return n;e=mi(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[yi]||e[bi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function Ci(e){return e[vi]||null}var ji=[],Ti=-1;function Ri(e){return{current:e}}function Oi(e){0>Ti||(e.current=ji[Ti],ji[Ti]=null,Ti--)}function Ni(e,t){Ti++,ji[Ti]=e.current,e.current=t}var Pi={},Ii=Ri(Pi),Ai=Ri(!1),Li=Pi;function Ui(e,t){var n=e.type.contextTypes;if(!n)return Pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!=(e=e.childContextTypes)}function $i(){Oi(Ai),Oi(Ii)}function Mi(e,t,r){if(Ii.current!==Pi)throw Error(n(168));Ni(Ii,t),Ni(Ai,r)}function Bi(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,"function"!=typeof i.getChildContext)return r;for(var s in i=i.getChildContext())if(!(s in t))throw Error(n(108,F(e)||"Unknown",s));return $({},r,i)}function Wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pi,Li=Ii.current,Ni(Ii,e),Ni(Ai,Ai.current),!0}function zi(e,t,r){var i=e.stateNode;if(!i)throw Error(n(169));r?(e=Bi(e,t,Li),i.__reactInternalMemoizedMergedChildContext=e,Oi(Ai),Oi(Ii),Ni(Ii,e)):Oi(Ai),Ni(Ai,r)}var qi=null,Fi=!1,Ki=!1;function Hi(e){null===qi?qi=[e]:qi.push(e)}function Vi(){if(!Ki&&null!==qi){Ki=!0;var e=0,t=wt;try{var n=qi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}qi=null,Fi=!1}catch(tc){throw null!==qi&&(qi=qi.slice(e+1)),Ge(et,Vi),tc}finally{wt=t,Ki=!1}}return null}var Gi=[],Ji=0,Yi=null,Qi=0,Xi=[],Zi=0,es=null,ts=1,ns="";function rs(e,t){Gi[Ji++]=Qi,Gi[Ji++]=Yi,Yi=e,Qi=t}function is(e,t,n){Xi[Zi++]=ts,Xi[Zi++]=ns,Xi[Zi++]=es,es=e;var r=ts;e=ns;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ts=1<<32-ot(t)+i|n<<i|r,ns=s+e}else ts=1<<s|n<<i|r,ns=e}function ss(e){null!==e.return&&(rs(e,1),is(e,1,0))}function as(e){for(;e===Yi;)Yi=Gi[--Ji],Gi[Ji]=null,Qi=Gi[--Ji],Gi[Ji]=null;for(;e===es;)es=Xi[--Zi],Xi[Zi]=null,ns=Xi[--Zi],Xi[Zi]=null,ts=Xi[--Zi],Xi[Zi]=null}var os=null,ls=null,cs=!1,us=null;function ds(e,t){var n=$c(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function hs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,os=e,ls=pi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,os=e,ls=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==es?{id:ts,overflow:ns}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=$c(18,null,null,0)).stateNode=t,n.return=e,e.child=n,os=e,ls=null,!0);default:return!1}}function fs(e){return!(!(1&e.mode)||128&e.flags)}function ps(e){if(cs){var t=ls;if(t){var r=t;if(!hs(e,t)){if(fs(e))throw Error(n(418));t=pi(r.nextSibling);var i=os;t&&hs(e,t)?ds(i,r):(e.flags=-4097&e.flags|2,cs=!1,os=e)}}else{if(fs(e))throw Error(n(418));e.flags=-4097&e.flags|2,cs=!1,os=e}}}function ms(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;os=e}function gs(e){if(e!==os)return!1;if(!cs)return ms(e),cs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!oi(e.type,e.memoizedProps)),t&&(t=ls)){if(fs(e))throw ys(),Error(n(418));for(;t;)ds(e,t),t=pi(t.nextSibling)}if(ms(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ls=pi(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ls=null}}else ls=os?pi(e.stateNode.nextSibling):null;return!0}function ys(){for(var e=ls;e;)e=pi(e.nextSibling)}function vs(){ls=os=null,cs=!1}function bs(e){null===us?us=[e]:us.push(e)}var ws=b.ReactCurrentBatchConfig;function _s(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(n(309));var i=r.stateNode}if(!i)throw Error(n(147,e));var s=i,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(n(284));if(!r._owner)throw Error(n(290,e))}return e}function Ss(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xs(e){return(0,e._init)(e._payload)}function ks(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function r(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Bc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===x?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===I&&xs(i)===t.type)?((r=s(t,n.props)).ref=_s(e,t,n),r.return=e,r):((r=Wc(n.type,n.key,n.props,null,e.mode,r)).ref=_s(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=zc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Wc(t.type,t.key,t.props,null,e.mode,n)).ref=_s(e,null,t),n.return=e,n;case S:return(t=Kc(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(ne(t)||U(t))return(t=zc(t,e.mode,n,null)).return=e,t;Ss(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case I:return f(e,t,(i=n._init)(n._payload),r)}if(ne(n)||U(n))return null!==i?null:d(e,t,n,r,null);Ss(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return p(e,t,n,(0,r._init)(r._payload),i)}if(ne(r)||U(r))return d(t,e=e.get(n)||null,r,i,null);Ss(t,r)}return null}function m(n,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(n,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(n,d),s=a(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return r(n,d),cs&&rs(n,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(n,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return cs&&rs(n,m),c}for(d=i(n,d);m<o.length;m++)null!==(g=p(d,n,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(n,e)}),cs&&rs(n,m),c}function g(s,o,l,c){var u=U(l);if("function"!=typeof u)throw Error(n(150));if(null==(l=u.call(l)))throw Error(n(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(s,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(s,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return r(s,m),cs&&rs(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return cs&&rs(s,g),u}for(m=i(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),cs&&rs(s,g),u}return function e(n,i,a,l){if("object"==typeof a&&null!==a&&a.type===x&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===x){if(7===u.tag){r(n,u.sibling),(i=s(u,a.props.children)).return=n,n=i;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===I&&xs(c)===u.type){r(n,u.sibling),(i=s(u,a.props)).ref=_s(n,u,a),i.return=n,n=i;break e}r(n,u);break}t(n,u),u=u.sibling}a.type===x?((i=zc(a.props.children,n.mode,l,a.key)).return=n,n=i):((l=Wc(a.type,a.key,a.props,null,n.mode,l)).ref=_s(n,i,a),l.return=n,n=l)}return o(n);case S:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){r(n,i.sibling),(i=s(i,a.children||[])).return=n,n=i;break e}r(n,i);break}t(n,i),i=i.sibling}(i=Kc(a,n.mode,l)).return=n,n=i}return o(n);case I:return e(n,i,(u=a._init)(a._payload),l)}if(ne(a))return m(n,i,a,l);if(U(a))return g(n,i,a,l);Ss(n,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==i&&6===i.tag?(r(n,i.sibling),(i=s(i,a)).return=n,n=i):(r(n,i),(i=Fc(a,n.mode,l)).return=n,n=i),o(n)):r(n,i)}}var Es=ks(!0),Cs=ks(!1),js=Ri(null),Ts=null,Rs=null,Os=null;function Ns(){Os=Rs=Ts=null}function Ps(e){var t=js.current;Oi(js),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){Ts=e,Os=Rs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ko=!0),e.firstContext=null)}function Ls(e){var t=e._currentValue;if(Os!==e)if(e={context:e,memoizedValue:t,next:null},null===Rs){if(null===Ts)throw Error(n(308));Rs=e,Ts.dependencies={lanes:0,firstContext:e}}else Rs=Rs.next=e;return t}var Us=null;function Ds(e){null===Us?Us=[e]:Us.push(e)}function $s(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ms(e,r)}function Ms(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Bs=!1;function Ws(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Il){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ms(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ms(e,n)}function Ks(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vs(e,t,n,r){var i=e.updateQueue;Bs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=$({},d,h);break e;case 2:Bs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Wl|=a,e.lanes=a,e.memoizedState=d}}function Gs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(null!==s){if(i.callback=null,i=r,"function"!=typeof s)throw Error(n(191,s));s.call(i)}}}var Js={},Ys=Ri(Js),Qs=Ri(Js),Xs=Ri(Js);function Zs(e){if(e===Js)throw Error(n(174));return e}function ea(e,t){switch(Ni(Xs,t),Ni(Qs,e),Ni(Ys,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Oi(Ys),Ni(Ys,t)}function ta(){Oi(Ys),Oi(Qs),Oi(Xs)}function na(e){Zs(Xs.current);var t=Zs(Ys.current),n=ce(t,e.type);t!==n&&(Ni(Qs,e),Ni(Ys,n))}function ra(e){Qs.current===e&&(Oi(Ys),Oi(Qs))}var ia=Ri(0);function sa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var aa=[];function oa(){for(var e=0;e<aa.length;e++)aa[e]._workInProgressVersionPrimary=null;aa.length=0}var la=b.ReactCurrentDispatcher,ca=b.ReactCurrentBatchConfig,ua=0,da=null,ha=null,fa=null,pa=!1,ma=!1,ga=0,ya=0;function va(){throw Error(n(321))}function ba(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function wa(e,t,r,i,s,a){if(ua=a,da=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,la.current=null===e||null===e.memoizedState?ro:io,e=r(i,s),ma){a=0;do{if(ma=!1,ga=0,25<=a)throw Error(n(301));a+=1,fa=ha=null,t.updateQueue=null,la.current=so,e=r(i,s)}while(ma)}if(la.current=no,t=null!==ha&&null!==ha.next,ua=0,fa=ha=da=null,pa=!1,t)throw Error(n(300));return e}function _a(){var e=0!==ga;return ga=0,e}function Sa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fa?da.memoizedState=fa=e:fa=fa.next=e,fa}function xa(){if(null===ha){var e=da.alternate;e=null!==e?e.memoizedState:null}else e=ha.next;var t=null===fa?da.memoizedState:fa.next;if(null!==t)fa=t,ha=e;else{if(null===e)throw Error(n(310));e={memoizedState:(ha=e).memoizedState,baseState:ha.baseState,baseQueue:ha.baseQueue,queue:ha.queue,next:null},null===fa?da.memoizedState=fa=e:fa=fa.next=e}return fa}function ka(e,t){return"function"==typeof t?t(e):t}function Ea(e){var t=xa(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var i=ha,s=i.baseQueue,a=r.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,r.pending=null}if(null!==s){a=s.next,i=i.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ua&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,da.lanes|=d,Wl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,lr(i,t.memoizedState)||(ko=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,r.lastRenderedState=i}if(null!==(e=r.interleaved)){s=e;do{a=s.lane,da.lanes|=a,Wl|=a,s=s.next}while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ca(e){var t=xa(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var i=r.dispatch,s=r.pending,a=t.memoizedState;if(null!==s){r.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);lr(a,t.memoizedState)||(ko=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,i]}function ja(){}function Ta(e,t){var r=da,i=xa(),s=t(),a=!lr(i.memoizedState,s);if(a&&(i.memoizedState=s,ko=!0),i=i.queue,Ba(Na.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==fa&&1&fa.memoizedState.tag){if(r.flags|=2048,La(9,Oa.bind(null,r,i,s,t),void 0,null),null===Al)throw Error(n(349));30&ua||Ra(r,t,s)}return s}function Ra(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=da.updateQueue)?(t={lastEffect:null,stores:null},da.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oa(e,t,n,r){t.value=n,t.getSnapshot=r,Pa(t)&&Ia(e)}function Na(e,t,n){return n(function(){Pa(t)&&Ia(e)})}function Pa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Ia(e){var t=Ms(e,1);null!==t&&cc(t,e,1,-1)}function Aa(e){var t=Sa();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:e},t.queue=e,e=e.dispatch=Xa.bind(null,da,e),[t.memoizedState,e]}function La(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=da.updateQueue)?(t={lastEffect:null,stores:null},da.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ua(){return xa().memoizedState}function Da(e,t,n,r){var i=Sa();da.flags|=e,i.memoizedState=La(1|t,n,void 0,void 0===r?null:r)}function $a(e,t,n,r){var i=xa();r=void 0===r?null:r;var s=void 0;if(null!==ha){var a=ha.memoizedState;if(s=a.destroy,null!==r&&ba(r,a.deps))return void(i.memoizedState=La(t,n,s,r))}da.flags|=e,i.memoizedState=La(1|t,n,s,r)}function Ma(e,t){return Da(8390656,8,e,t)}function Ba(e,t){return $a(2048,8,e,t)}function Wa(e,t){return $a(4,2,e,t)}function za(e,t){return $a(4,4,e,t)}function qa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!=n?n.concat([e]):null,$a(4,4,qa.bind(null,t,e),n)}function Ka(){}function Ha(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ba(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Va(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ba(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ga(e,t,n){return 21&ua?(lr(n,t)||(n=gt(),da.lanes|=n,Wl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ko=!0),e.memoizedState=n)}function Ja(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=ca.transition;ca.transition={};try{e(!1),t()}finally{wt=n,ca.transition=r}}function Ya(){return xa().memoizedState}function Qa(e,t,n){var r=lc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Za(e))eo(t,n);else if(null!==(n=$s(e,t,n,r))){cc(n,e,r,oc()),to(n,t,r)}}function Xa(e,t,n){var r=lc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Za(e))eo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,lr(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=$s(e,t,i,r))&&(cc(n,e,r,i=oc()),to(n,t,r))}}function Za(e){var t=e.alternate;return e===da||null!==t&&t===da}function eo(e,t){ma=pa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function to(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var no={readContext:Ls,useCallback:va,useContext:va,useEffect:va,useImperativeHandle:va,useInsertionEffect:va,useLayoutEffect:va,useMemo:va,useReducer:va,useRef:va,useState:va,useDebugValue:va,useDeferredValue:va,useTransition:va,useMutableSource:va,useSyncExternalStore:va,useId:va,unstable_isNewReconciler:!1},ro={readContext:Ls,useCallback:function(e,t){return Sa().memoizedState=[e,void 0===t?null:t],e},useContext:Ls,useEffect:Ma,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Da(4194308,4,qa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=Sa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Sa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qa.bind(null,da,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Sa().memoizedState=e},useState:Aa,useDebugValue:Ka,useDeferredValue:function(e){return Sa().memoizedState=e},useTransition:function(){var e=Aa(!1),t=e[0];return e=Ja.bind(null,e[1]),Sa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=da,s=Sa();if(cs){if(void 0===r)throw Error(n(407));r=r()}else{if(r=t(),null===Al)throw Error(n(349));30&ua||Ra(i,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,Ma(Na.bind(null,i,a,e),[e]),i.flags|=2048,La(9,Oa.bind(null,i,a,r,t),void 0,null),r},useId:function(){var e=Sa(),t=Al.identifierPrefix;if(cs){var n=ns;t=":"+t+"R"+(n=(ts&~(1<<32-ot(ts)-1)).toString(32)+n),0<(n=ga++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ya++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},io={readContext:Ls,useCallback:Ha,useContext:Ls,useEffect:Ba,useImperativeHandle:Fa,useInsertionEffect:Wa,useLayoutEffect:za,useMemo:Va,useReducer:Ea,useRef:Ua,useState:function(){return Ea(ka)},useDebugValue:Ka,useDeferredValue:function(e){return Ga(xa(),ha.memoizedState,e)},useTransition:function(){return[Ea(ka)[0],xa().memoizedState]},useMutableSource:ja,useSyncExternalStore:Ta,useId:Ya,unstable_isNewReconciler:!1},so={readContext:Ls,useCallback:Ha,useContext:Ls,useEffect:Ba,useImperativeHandle:Fa,useInsertionEffect:Wa,useLayoutEffect:za,useMemo:Va,useReducer:Ca,useRef:Ua,useState:function(){return Ca(ka)},useDebugValue:Ka,useDeferredValue:function(e){var t=xa();return null===ha?t.memoizedState=e:Ga(t,ha.memoizedState,e)},useTransition:function(){return[Ca(ka)[0],xa().memoizedState]},useMutableSource:ja,useSyncExternalStore:Ta,useId:Ya,unstable_isNewReconciler:!1};function ao(e,t){if(e&&e.defaultProps){for(var n in t=$({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function oo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:$({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var lo={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=oc(),i=lc(e),s=qs(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(cc(t,e,i,r),Ks(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=oc(),i=lc(e),s=qs(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(cc(t,e,i,r),Ks(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=oc(),r=lc(e),i=qs(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Fs(e,i,r))&&(cc(t,e,r,n),Ks(t,e,r))}};function co(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function uo(e,t,n){var r=!1,i=Pi,s=t.contextType;return"object"==typeof s&&null!==s?s=Ls(s):(i=Di(t)?Li:Ii.current,s=(r=null!=(r=t.contextTypes))?Ui(e,i):Pi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=lo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ho(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&lo.enqueueReplaceState(t,t.state,null)}function fo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ws(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Ls(s):(s=Di(t)?Li:Ii.current,i.context=Ui(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(oo(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&lo.enqueueReplaceState(i,i.state,null),Vs(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function po(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(vr){i="\nError generating stack: "+vr.message+"\n"+vr.stack}return{value:e,source:t,stack:i,digest:null}}function mo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function go(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yo="function"==typeof WeakMap?WeakMap:Map;function vo(e,t,n){(n=qs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yl||(Yl=!0,Ql=r),go(0,t)},n}function bo(e,t,n){(n=qs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){go(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){go(0,t),"function"!=typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function wo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new yo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Pc.bind(null,e,t,n),t.then(e,e))}function _o(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function So(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=qs(-1,1)).tag=2,Fs(n,t,1))),n.lanes|=1),e)}var xo=b.ReactCurrentOwner,ko=!1;function Eo(e,t,n,r){t.child=null===e?Cs(t,null,n,r):Es(t,e.child,n,r)}function Co(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=wa(e,t,n,r,s,i),n=_a(),null===e||ko?(cs&&n&&ss(t),t.flags|=1,Eo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jo(e,t,i))}function jo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Mc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Wc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,To(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)return Jo(e,t,i)}return t.flags|=1,(e=Bc(s,r)).ref=t.ref,e.return=t,t.child=e}function To(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(ko=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Jo(e,t,i);131072&e.flags&&(ko=!0)}}return No(e,t,n,r,i)}function Ro(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ni($l,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ni($l,Dl),Dl|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ni($l,Dl),Dl|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ni($l,Dl),Dl|=r;return Eo(e,t,i,n),t.child}function Oo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,i){var s=Di(n)?Li:Ii.current;return s=Ui(t,s),As(t,i),n=wa(e,t,n,r,s,i),r=_a(),null===e||ko?(cs&&r&&ss(t),t.flags|=1,Eo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jo(e,t,i))}function Po(e,t,n,r,i){if(Di(n)){var s=!0;Wi(t)}else s=!1;if(As(t,i),null===t.stateNode)Go(e,t),uo(t,n,r),fo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=Ls(c):c=Ui(t,c=Di(n)?Li:Ii.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ho(t,a,r,c),Bs=!1;var h=t.memoizedState;a.state=h,Vs(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ai.current||Bs?("function"==typeof u&&(oo(t,n,u,r),l=t.memoizedState),(o=Bs||co(t,n,o,r,h,l,c))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,zs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ao(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=Ls(l):l=Ui(t,l=Di(n)?Li:Ii.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ho(t,a,r,l),Bs=!1,h=t.memoizedState,a.state=h,Vs(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||Ai.current||Bs?("function"==typeof f&&(oo(t,n,f,r),p=t.memoizedState),(c=Bs||co(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,s,i)}function Io(e,t,n,r,i,s){Oo(e,t);var a=!!(128&t.flags);if(!r&&!a)return i&&zi(t,n,!1),Jo(e,t,s);r=t.stateNode,xo.current=t;var o=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Es(t,e.child,null,s),t.child=Es(t,null,o,s)):Eo(e,t,o,s),t.memoizedState=r.state,i&&zi(t,n,!0),t.child}function Ao(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),ea(e,t.containerInfo)}function Lo(e,t,n,r,i){return vs(),bs(i),t.flags|=256,Eo(e,t,n,r),t.child}var Uo,Do,$o,Mo,Bo={dehydrated:null,treeContext:null,retryLane:0};function Wo(e){return{baseLanes:e,cachePool:null,transitions:null}}function zo(e,t,r){var i,s=t.pendingProps,a=ia.current,o=!1,l=!!(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&!!(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ni(ia,1&a),null===e)return ps(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},1&s||null===o?o=qc(l,s,0,null):(o.childLanes=0,o.pendingProps=l),e=zc(e,s,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Wo(r),t.memoizedState=Bo,e):qo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,r,i,s,a,o){if(r)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,i=mo(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=qc({mode:"visible",children:i.children},s,0,null),(a=zc(a,s,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,1&t.mode&&Es(t,e.child,null,o),t.child.memoizedState=Wo(o),t.memoizedState=Bo,a);if(!(1&t.mode))return Fo(e,t,o,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var l=i.dgst;return i=l,Fo(e,t,o,i=mo(a=Error(n(419)),i,void 0))}if(l=0!==(o&e.childLanes),ko||l){if(null!==(i=Al)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Ms(e,s),cc(i,e,s,-1))}return Sc(),Fo(e,t,o,i=mo(Error(n(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ls=pi(s.nextSibling),os=t,cs=!0,us=null,null!==e&&(Xi[Zi++]=ts,Xi[Zi++]=ns,Xi[Zi++]=es,ts=e.id,ns=e.overflow,es=t),t=qo(t,i.children),t.flags|=4096,t)}(e,t,l,s,i,a,r);if(o){o=s.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 1&l||t.child===a?(s=Bc(a,c)).subtreeFlags=14680064&a.subtreeFlags:((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null),null!==i?o=Bc(i,o):(o=zc(o,l,r,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Wo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Bo,s}return e=(o=e.child).sibling,s=Bc(o,{mode:"visible",children:s.children}),!(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function qo(e,t){return(t=qc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&bs(r),Es(t,e.child,null,n),(e=qo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ko(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Ho(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Vo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Eo(e,t,r.children,n),2&(r=ia.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ko(e,n,t);else if(19===e.tag)Ko(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ni(ia,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===sa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ho(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===sa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ho(t,!0,n,null,s);break;case"together":Ho(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Go(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Wl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(r=Bc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Bc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Yo(e,t){if(!cs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xo(e,t,r){var s=t.pendingProps;switch(as(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return Di(t.type)&&$i(),Qo(t),null;case 3:return s=t.stateNode,ta(),Oi(Ai),Oi(Ii),oa(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(gs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==us&&(fc(us),us=null))),Do(e,t),Qo(t),null;case 5:ra(t);var a=Zs(Xs.current);if(r=t.type,null!==e&&null!=t.stateNode)$o(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(n(166));return Qo(t),null}if(e=Zs(Ys.current),gs(t)){s=t.stateNode,r=t.type;var o=t.memoizedProps;switch(s[yi]=t,s[vi]=o,e=!!(1&t.mode),r){case"dialog":Fr("cancel",s),Fr("close",s);break;case"iframe":case"object":case"embed":Fr("load",s);break;case"video":case"audio":for(a=0;a<$r.length;a++)Fr($r[a],s);break;case"source":Fr("error",s);break;case"img":case"image":case"link":Fr("error",s),Fr("load",s);break;case"details":Fr("toggle",s);break;case"input":Q(s,o),Fr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",s);break;case"textarea":se(s,o),Fr("invalid",s)}for(var l in be(r,o),a=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?s.textContent!==c&&(!0!==o.suppressHydrationWarning&&ri(s.textContent,c,e),a=["children",c]):"number"==typeof c&&s.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&ri(s.textContent,c,e),a=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",s)}switch(r){case"input":V(s),ee(s,o,!0);break;case"textarea":V(s),oe(s);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(s.onclick=ii)}s=a,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof s.is?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),"select"===r&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[yi]=t,e[vi]=s,Uo(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(r,s),r){case"dialog":Fr("cancel",e),Fr("close",e),a=s;break;case"iframe":case"object":case"embed":Fr("load",e),a=s;break;case"video":case"audio":for(a=0;a<$r.length;a++)Fr($r[a],e);a=s;break;case"source":Fr("error",e),a=s;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),a=s;break;case"details":Fr("toggle",e),a=s;break;case"input":Q(e,s),a=Y(e,s),Fr("invalid",e);break;case"option":default:a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=$({},s,{value:void 0}),Fr("invalid",e);break;case"textarea":se(e,s),a=ie(e,s),Fr("invalid",e)}for(o in be(r,a),c=a)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ye(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"==typeof u?("textarea"!==r||""!==u)&&fe(e,u):"number"==typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(i.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Fr("scroll",e):null!=u&&v(e,o,u,l))}switch(r){case"input":V(e),ee(e,s,!1);break;case"textarea":V(e),oe(e);break;case"option":null!=s.value&&e.setAttribute("value",""+K(s.value));break;case"select":e.multiple=!!s.multiple,null!=(o=s.value)?re(e,!!s.multiple,o,!1):null!=s.defaultValue&&re(e,!!s.multiple,s.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=ii)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Mo(e,t,e.memoizedProps,s);else{if("string"!=typeof s&&null===t.stateNode)throw Error(n(166));if(r=Zs(Xs.current),Zs(Ys.current),gs(t)){if(s=t.stateNode,r=t.memoizedProps,s[yi]=t,(o=s.nodeValue!==r)&&null!==(e=os))switch(e.tag){case 3:ri(s.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ri(s.nodeValue,r,!!(1&e.mode))}o&&(t.flags|=4)}else(s=(9===r.nodeType?r:r.ownerDocument).createTextNode(s))[yi]=t,t.stateNode=s}return Qo(t),null;case 13:if(Oi(ia),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(cs&&null!==ls&&1&t.mode&&!(128&t.flags))ys(),vs(),t.flags|=98560,o=!1;else if(o=gs(t),null!==s&&null!==s.dehydrated){if(null===e){if(!o)throw Error(n(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(n(317));o[yi]=t}else vs(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),o=!1}else null!==us&&(fc(us),us=null),o=!0;if(!o)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ia.current?0===Ml&&(Ml=3):Sc())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return ta(),Do(e,t),null===e&&Vr(t.stateNode.containerInfo),Qo(t),null;case 10:return Ps(t.type._context),Qo(t),null;case 19:if(Oi(ia),null===(o=t.memoizedState))return Qo(t),null;if(s=!!(128&t.flags),null===(l=o.rendering))if(s)Yo(o,!1);else{if(0!==Ml||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=sa(e))){for(t.flags|=128,Yo(o,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;null!==r;)e=s,(o=r).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ni(ia,1&ia.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Gl&&(t.flags|=128,s=!0,Yo(o,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=sa(l))){if(t.flags|=128,s=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Yo(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!cs)return Qo(t),null}else 2*Xe()-o.renderingStartTime>Gl&&1073741824!==r&&(t.flags|=128,s=!0,Yo(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,r=ia.current,Ni(ia,s?1&r|2:1&r),t):(Qo(t),null);case 22:case 23:return vc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&1&t.mode?!!(1073741824&Dl)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Zo(e,t){switch(as(t),t.tag){case 1:return Di(t.type)&&$i(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ta(),Oi(Ai),Oi(Ii),oa(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ra(t),null;case 13:if(Oi(ia),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));vs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Oi(ia),null;case 4:return ta(),null;case 10:return Ps(t.type._context),null;case 22:case 23:return vc(),null;default:return null}}Uo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},$o=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Zs(Ys.current);var a,o=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),o=[];break;case"select":s=$({},s,{value:void 0}),r=$({},r,{value:void 0}),o=[];break;case"textarea":s=ie(e,s),r=ie(e,r),o=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(e.onclick=ii)}for(u in be(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(i.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(i.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Mo=function(e,t,n,r){n!==r&&(t.flags|=4)};var el=!1,tl=!1,nl="function"==typeof WeakSet?WeakSet:Set,rl=null;function il(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Nc(e,t,r)}else n.current=null}function sl(e,t,n){try{n()}catch(r){Nc(e,t,r)}}var al=!1;function ol(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&sl(t,n,s)}i=i.next}while(i!==r)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[yi],delete t[vi],delete t[wi],delete t[_i],delete t[Si])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dl(e){return 5===e.tag||3===e.tag||4===e.tag}function hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||dl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=ii));else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var ml=null,gl=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,n)}catch(wr){}switch(n.tag){case 5:tl||il(n,t);case 6:var r=ml,i=gl;ml=null,yl(e,t,n),gl=i,null!==(ml=r)&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ml.removeChild(n.stateNode));break;case 18:null!==ml&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?fi(e.parentNode,n):1===e.nodeType&&fi(e,n),qt(e)):fi(ml,n.stateNode));break;case 4:r=ml,i=gl,ml=n.stateNode.containerInfo,gl=!0,yl(e,t,n),ml=r,gl=i;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(2&s||4&s)&&sl(n,t,a),i=i.next}while(i!==r)}yl(e,t,n);break;case 1:if(!tl&&(il(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(wr){Nc(n,t,wr)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(r=tl)||null!==n.memoizedState,yl(e,t,n),tl=r):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach(function(t){var r=Lc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function wl(e,t){var r=t.deletions;if(null!==r)for(var i=0;i<r.length;i++){var s=r[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ml=l.stateNode,gl=!1;break e;case 3:case 4:ml=l.stateNode.containerInfo,gl=!0;break e}l=l.return}if(null===ml)throw Error(n(160));vl(a,o,s),ml=null,gl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){Nc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)_l(t,e),t=t.sibling}function _l(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),Sl(e),4&i){try{ol(3,e,e.return),ll(3,e)}catch(g){Nc(e,e.return,g)}try{ol(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:wl(t,e),Sl(e),512&i&&null!==r&&il(r,r.return);break;case 5:if(wl(t,e),Sl(e),512&i&&null!==r&&il(r,r.return),32&e.flags){var s=e.stateNode;try{fe(s,"")}catch(g){Nc(e,e.return,g)}}if(4&i&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==r?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),we(l,o);var u=we(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ye(s,h):"dangerouslySetInnerHTML"===d?he(s,h):"children"===d?fe(s,h):v(s,d,h,u)}switch(l){case"input":Z(s,a);break;case"textarea":ae(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?re(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?re(s,!!a.multiple,a.defaultValue,!0):re(s,!!a.multiple,a.multiple?[]:"",!1))}s[vi]=a}catch(g){Nc(e,e.return,g)}}break;case 6:if(wl(t,e),Sl(e),4&i){if(null===e.stateNode)throw Error(n(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Nc(e,e.return,g)}}break;case 3:if(wl(t,e),Sl(e),4&i&&null!==r&&r.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:wl(t,e),Sl(e);break;case 13:wl(t,e),Sl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Hl=Xe())),4&i&&bl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(tl=(u=tl)||d,wl(t,e),tl=u):wl(t,e),Sl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(rl=e,d=e.child;null!==d;){for(h=rl=d;null!==rl;){switch(p=(f=rl).child,f.tag){case 0:case 11:case 14:case 15:ol(4,f,f.return);break;case 1:il(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){i=f,r=f.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Nc(i,r,g)}}break;case 5:il(f,f.return);break;case 22:if(null!==f.memoizedState){Cl(h);continue}}null!==p?(p.return=f,rl=p):Cl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"==typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wl(t,e),Sl(e),4&i&&bl(e);case 21:}}function Sl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(dl(r)){var i=r;break e}r=r.return}throw Error(n(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(fe(s,""),i.flags&=-33),pl(e,hl(e),s);break;case 3:case 4:var a=i.stateNode.containerInfo;fl(e,hl(e),a);break;default:throw Error(n(161))}}catch(Wr){Nc(e,e.return,Wr)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){rl=e,kl(e)}function kl(e,t,n){for(var r=!!(1&e.mode);null!==rl;){var i=rl,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||el;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||tl;o=el;var c=tl;if(el=a,(tl=l)&&!c)for(rl=i;null!==rl;)l=(a=rl).child,22===a.tag&&null!==a.memoizedState?jl(i):null!==l?(l.return=a,rl=l):jl(i);for(;null!==s;)rl=s,kl(s),s=s.sibling;rl=i,el=o,tl=c}El(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,rl=s):El(e)}}function El(e){for(;null!==rl;){var t=rl;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!tl)if(null===r)i.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ao(t.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Gs(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Gs(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(n(163))}tl||512&t.flags&&cl(t)}catch(f){Nc(t,t.return,f)}}if(t===e){rl=null;break}if(null!==(r=t.sibling)){r.return=t.return,rl=r;break}rl=t.return}}function Cl(e){for(;null!==rl;){var t=rl;if(t===e){rl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,rl=n;break}rl=t.return}}function jl(e){for(;null!==rl;){var t=rl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(Wr){Nc(t,n,Wr)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Wr){Nc(t,i,Wr)}}var s=t.return;try{cl(t)}catch(Wr){Nc(t,s,Wr)}break;case 5:var a=t.return;try{cl(t)}catch(Wr){Nc(t,a,Wr)}}}catch(Wr){Nc(t,t.return,Wr)}if(t===e){rl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,rl=o;break}rl=t.return}}var Tl,Rl=Math.ceil,Ol=b.ReactCurrentDispatcher,Nl=b.ReactCurrentOwner,Pl=b.ReactCurrentBatchConfig,Il=0,Al=null,Ll=null,Ul=0,Dl=0,$l=Ri(0),Ml=0,Bl=null,Wl=0,zl=0,ql=0,Fl=null,Kl=null,Hl=0,Gl=1/0,Jl=null,Yl=!1,Ql=null,Xl=null,Zl=!1,ec=null,nc=0,rc=0,ic=null,sc=-1,ac=0;function oc(){return 6&Il?Xe():-1!==sc?sc:sc=Xe()}function lc(e){return 1&e.mode?2&Il&&0!==Ul?Ul&-Ul:null!==ws.transition?(0===ac&&(ac=gt()),ac):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Qt(e.type):1}function cc(e,t,r,i){if(50<rc)throw rc=0,ic=null,Error(n(185));vt(e,r,i),2&Il&&e===Al||(e===Al&&(!(2&Il)&&(zl|=r),4===Ml&&pc(e,Ul)),uc(e,i),1===r&&0===Il&&!(1&t.mode)&&(Gl=Xe()+500,Fi&&Vi()))}function uc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-ot(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ft(e,e===Al?Ul:0);if(0===r)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){Fi=!0,Hi(e)}(mc.bind(null,e)):Hi(mc.bind(null,e)),di(function(){!(6&Il)&&Vi()}),n=null;else{switch(_t(r)){case 1:n=et;break;case 4:n=tt;break;case 16:default:n=nt;break;case 536870912:n=it}n=Uc(n,dc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function dc(e,t){if(sc=-1,ac=0,6&Il)throw Error(n(327));var r=e.callbackNode;if(Rc()&&e.callbackNode!==r)return null;var i=ft(e,e===Al?Ul:0);if(0===i)return null;if(30&i||0!==(i&e.expiredLanes)||t)t=xc(e,i);else{t=i;var s=Il;Il|=2;var a=_c();for(Al===e&&Ul===t||(Jl=null,Gl=Xe()+500,bc(e,t));;)try{Ec();break}catch(wr){wc(e,wr)}Ns(),Ol.current=a,Il=s,null!==Ll?t=0:(Al=null,Ul=0,t=Ml)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(i=s,t=hc(e,s))),1===t)throw r=Bl,bc(e,0),pc(e,i),uc(e,Xe()),r;if(6===t)pc(e,i);else{if(s=e.current.alternate,!(30&i||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!lr(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)||(t=xc(e,i),2===t&&(a=mt(e),0!==a&&(i=a,t=hc(e,a))),1!==t)))throw r=Bl,bc(e,0),pc(e,i),uc(e,Xe()),r;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(n(345));case 2:case 5:Tc(e,Kl,Jl);break;case 3:if(pc(e,i),(130023424&i)===i&&10<(t=Hl+500-Xe())){if(0!==ft(e,0))break;if(((s=e.suspendedLanes)&i)!==i){oc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=li(Tc.bind(null,e,Kl,Jl),t);break}Tc(e,Kl,Jl);break;case 4:if(pc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,s=-1;0<i;){var o=31-ot(i);a=1<<o,(o=t[o])>s&&(s=o),i&=~a}if(i=s,10<(i=(120>(i=Xe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Rl(i/1960))-i)){e.timeoutHandle=li(Tc.bind(null,e,Kl,Jl),i);break}Tc(e,Kl,Jl);break;default:throw Error(n(329))}}}return uc(e,Xe()),e.callbackNode===r?dc.bind(null,e):null}function hc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(bc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Kl,Kl=n,null!==t&&fc(t)),e}function fc(e){null===Kl?Kl=e:Kl.push.apply(Kl,e)}function pc(e,t){for(t&=~ql,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function mc(e){if(6&Il)throw Error(n(327));Rc();var t=ft(e,0);if(!(1&t))return uc(e,Xe()),null;var r=xc(e,t);if(0!==e.tag&&2===r){var i=mt(e);0!==i&&(t=i,r=hc(e,i))}if(1===r)throw r=Bl,bc(e,0),pc(e,t),uc(e,Xe()),r;if(6===r)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,Kl,Jl),uc(e,Xe()),null}function gc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Gl=Xe()+500,Fi&&Vi())}}function yc(e){null!==ec&&0===ec.tag&&!(6&Il)&&Rc();var t=Il;Il|=1;var n=Pl.transition,r=wt;try{if(Pl.transition=null,wt=1,e)return e()}finally{wt=r,Pl.transition=n,!(6&(Il=t))&&Vi()}}function vc(){Dl=$l.current,Oi($l)}function bc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ci(n)),null!==Ll)for(n=Ll.return;null!==n;){var r=n;switch(as(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&$i();break;case 3:ta(),Oi(Ai),Oi(Ii),oa();break;case 5:ra(r);break;case 4:ta();break;case 13:case 19:Oi(ia);break;case 10:Ps(r.type._context);break;case 22:case 23:vc()}n=n.return}if(Al=e,Ll=e=Bc(e.current,null),Ul=Dl=t,Ml=0,Bl=null,ql=zl=Wl=0,Kl=Fl=null,null!==Us){for(t=0;t<Us.length;t++)if(null!==(r=(n=Us[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Us=null}return e}function wc(e,t){for(;;){var r=Ll;try{if(Ns(),la.current=no,pa){for(var i=da.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}pa=!1}if(ua=0,fa=ha=da=null,ma=!1,ga=0,Nl.current=null,null===r||null===r.return){Ml=1,Bl=t,Ll=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=Ul,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(!(1&d.mode||0!==h&&11!==h&&15!==h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=_o(o);if(null!==p){p.flags&=-257,So(p,o,l,0,t),1&p.mode&&wo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(!(1&t)){wo(a,u,t),Sc();break e}c=Error(n(426))}else if(cs&&1&l.mode){var y=_o(o);if(null!==y){!(65536&y.flags)&&(y.flags|=256),So(y,o,l,0,t),bs(po(c,l));break e}}a=c=po(c,l),4!==Ml&&(Ml=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Hs(a,vo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(!(128&a.flags||"function"!=typeof v.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Xl&&Xl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Hs(a,bo(a,l,t));break e}}a=a.return}while(null!==a)}jc(r)}catch(w){t=w,Ll===r&&null!==r&&(Ll=r=r.return);continue}break}}function _c(){var e=Ol.current;return Ol.current=no,null===e?no:e}function Sc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Al||!(268435455&Wl)&&!(268435455&zl)||pc(Al,Ul)}function xc(e,t){var r=Il;Il|=2;var i=_c();for(Al===e&&Ul===t||(Jl=null,bc(e,t));;)try{kc();break}catch(tc){wc(e,tc)}if(Ns(),Il=r,Ol.current=i,null!==Ll)throw Error(n(261));return Al=null,Ul=0,Ml}function kc(){for(;null!==Ll;)Cc(Ll)}function Ec(){for(;null!==Ll&&!Ye();)Cc(Ll)}function Cc(e){var t=Tl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?jc(e):Ll=t,Nl.current=null}function jc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Zo(n,t)))return n.flags&=32767,void(Ll=n);if(null===e)return Ml=6,void(Ll=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Xo(n,t,Dl)))return void(Ll=n);if(null!==(t=t.sibling))return void(Ll=t);Ll=t=e}while(null!==t);0===Ml&&(Ml=5)}function Tc(e,t,r){var i=wt,s=Pl.transition;try{Pl.transition=null,wt=1,function(e,t,r,i){do{Rc()}while(null!==ec);if(6&Il)throw Error(n(327));r=e.finishedWork;var s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Al&&(Ll=Al=null,Ul=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||Zl||(Zl=!0,Uc(nt,function(){return Rc(),null})),a=!!(15990&r.flags),!!(15990&r.subtreeFlags)||a){a=Pl.transition,Pl.transition=null;var o=wt;wt=1;var l=Il;Il|=4,Nl.current=null,function(e,t){if(si=Kt,pr(e=fr())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(i&&0!==i.rangeCount){r=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch(qr){r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===a&&++d===i&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ai={focusedElem:e,selectionRange:r},Kt=!1,rl=t;null!==rl;)if(e=(t=rl).child,1028&t.subtreeFlags&&null!==e)e.return=t,rl=e;else for(;null!==rl;){t=rl;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ao(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(n(163))}}catch(qr){Nc(t,t.return,qr)}if(null!==(e=t.sibling)){e.return=t.return,rl=e;break}rl=t.return}m=al,al=!1}(e,r),_l(r,e),mr(ai),Kt=!!si,ai=si=null,e.current=r,xl(r),Qe(),Il=l,wt=o,Pl.transition=a}else e.current=r;if(Zl&&(Zl=!1,ec=e,nc=s),a=e.pendingLanes,0===a&&(Xl=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),uc(e,Xe()),null!==t)for(i=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(Yl)throw Yl=!1,e=Ql,Ql=null,e;!!(1&nc)&&0!==e.tag&&Rc(),a=e.pendingLanes,1&a?e===ic?rc++:(rc=0,ic=e):rc=0,Vi()}(e,t,r,i)}finally{Pl.transition=s,wt=i}return null}function Rc(){if(null!==ec){var e=_t(nc),t=Pl.transition,r=wt;try{if(Pl.transition=null,wt=16>e?16:e,null===ec)var i=!1;else{if(e=ec,ec=null,nc=0,6&Il)throw Error(n(331));var s=Il;for(Il|=4,rl=e.current;null!==rl;){var a=rl,o=a.child;if(16&rl.flags){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(rl=u;null!==rl;){var d=rl;switch(d.tag){case 0:case 11:case 15:ol(8,d,a)}var h=d.child;if(null!==h)h.return=d,rl=h;else for(;null!==rl;){var f=(d=rl).sibling,p=d.return;if(ul(d),d===u){rl=null;break}if(null!==f){f.return=p,rl=f;break}rl=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}rl=a}}if(2064&a.subtreeFlags&&null!==o)o.return=a,rl=o;else e:for(;null!==rl;){if(2048&(a=rl).flags)switch(a.tag){case 0:case 11:case 15:ol(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,rl=v;break e}rl=a.return}}var b=e.current;for(rl=b;null!==rl;){var w=(o=rl).child;if(2064&o.subtreeFlags&&null!==w)w.return=o,rl=w;else e:for(o=b;null!==rl;){if(2048&(l=rl).flags)try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(S){Nc(l,l.return,S)}if(l===o){rl=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,rl=_;break e}rl=l.return}}if(Il=s,Vi(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(S){}i=!0}return i}finally{wt=r,Pl.transition=t}}return!1}function Oc(e,t,n){e=Fs(e,t=vo(0,t=po(n,t),1),1),t=oc(),null!==e&&(vt(e,1,t),uc(e,t))}function Nc(e,t,n){if(3===e.tag)Oc(e,e,n);else for(;null!==t;){if(3===t.tag){Oc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){t=Fs(t,e=bo(t,e=po(n,e),1),1),e=oc(),null!==t&&(vt(t,1,e),uc(t,e));break}}t=t.return}}function Pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=oc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Ul&n)===n&&(4===Ml||3===Ml&&(130023424&Ul)===Ul&&500>Xe()-Hl?bc(e,0):ql|=n),uc(e,t)}function Ic(e,t){0===t&&(1&e.mode?(t=dt,!(130023424&(dt<<=1))&&(dt=4194304)):t=1);var n=oc();null!==(e=Ms(e,t))&&(vt(e,t,n),uc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Lc(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(n(314))}null!==i&&i.delete(t),Ic(e,r)}function Uc(e,t){return Ge(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $c(e,t,n,r){return new Dc(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bc(e,t){var n=e.alternate;return null===n?((n=$c(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wc(e,t,r,i,s,a){var o=2;if(i=e,"function"==typeof e)Mc(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case x:return zc(r.children,s,a,t);case E:o=8,s|=8;break;case C:return(e=$c(12,r,t,2|s)).elementType=C,e.lanes=a,e;case O:return(e=$c(13,r,t,s)).elementType=O,e.lanes=a,e;case N:return(e=$c(19,r,t,s)).elementType=N,e.lanes=a,e;case A:return qc(r,s,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case j:o=10;break e;case T:o=9;break e;case R:o=11;break e;case P:o=14;break e;case I:o=16,i=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=$c(o,r,t,s)).elementType=e,t.type=i,t.lanes=a,t}function zc(e,t,n,r){return(e=$c(7,e,r,t)).lanes=n,e}function qc(e,t,n,r){return(e=$c(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=$c(6,e,null,t)).lanes=n,e}function Kc(e,t,n){return(t=$c(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,a,o,l){return e=new Hc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=$c(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ws(s),e}function Gc(e){if(!e)return Pi;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var r=e.type;if(Di(r))return Bi(e,r,t)}return t}function Jc(e,t,n,r,i,s,a,o,l){return(e=Vc(n,r,!0,e,0,s,0,o,l)).context=Gc(null),n=e.current,(s=qs(r=oc(),i=lc(n))).callback=null!=t?t:null,Fs(n,s,i),e.current.lanes=i,vt(e,i,r),uc(e,r),e}function Yc(e,t,n,r){var i=t.current,s=oc(),a=lc(i);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=qs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fs(i,t,a))&&(cc(e,i,a,s),Ks(e,i,a)),a}function Qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Zc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}Tl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ko=!0;else{if(0===(e.lanes&r)&&!(128&t.flags))return ko=!1,function(e,t,n){switch(t.tag){case 3:Ao(t),vs();break;case 5:na(t);break;case 1:Di(t.type)&&Wi(t);break;case 4:ea(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ni(js,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ni(ia,1&ia.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zo(e,t,n):(Ni(ia,1&ia.current),null!==(e=Jo(e,t,n))?e.sibling:null);Ni(ia,1&ia.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Vo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ni(ia,ia.current),r)break;return null;case 22:case 23:return t.lanes=0,Ro(e,t,n)}return Jo(e,t,n)}(e,t,r);ko=!!(131072&e.flags)}else ko=!1,cs&&1048576&t.flags&&is(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Go(e,t),e=t.pendingProps;var s=Ui(t,Ii.current);As(t,r),s=wa(null,t,i,e,s,r);var a=_a();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(i)?(a=!0,Wi(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ws(t),s.updater=lo,t.stateNode=s,s._reactInternals=t,fo(t,i,e,r),t=Io(null,t,i,!0,a,r)):(t.tag=0,cs&&a&&ss(t),Eo(null,t,s,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Go(e,t),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return Mc(e)?1:0;if(null!=e){if((e=e.$$typeof)===R)return 11;if(e===P)return 14}return 2}(i),e=ao(i,e),s){case 0:t=No(null,t,i,e,r);break e;case 1:t=Po(null,t,i,e,r);break e;case 11:t=Co(null,t,i,e,r);break e;case 14:t=jo(null,t,i,ao(i.type,e),r);break e}throw Error(n(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,No(e,t,i,s=t.elementType===i?s:ao(i,s),r);case 1:return i=t.type,s=t.pendingProps,Po(e,t,i,s=t.elementType===i?s:ao(i,s),r);case 3:e:{if(Ao(t),null===e)throw Error(n(387));i=t.pendingProps,s=(a=t.memoizedState).element,zs(e,t),Vs(t,i,null,r);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Lo(e,t,i,r,s=po(Error(n(423)),t));break e}if(i!==s){t=Lo(e,t,i,r,s=po(Error(n(424)),t));break e}for(ls=pi(t.stateNode.containerInfo.firstChild),os=t,cs=!0,us=null,r=Cs(t,null,i,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(vs(),i===s){t=Jo(e,t,r);break e}Eo(e,t,i,r)}t=t.child}return t;case 5:return na(t),null===e&&ps(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,oi(i,s)?o=null:null!==a&&oi(i,a)&&(t.flags|=32),Oo(e,t),Eo(e,t,o,r),t.child;case 6:return null===e&&ps(t),null;case 13:return zo(e,t,r);case 4:return ea(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Es(t,null,i,r):Eo(e,t,i,r),t.child;case 11:return i=t.type,s=t.pendingProps,Co(e,t,i,s=t.elementType===i?s:ao(i,s),r);case 7:return Eo(e,t,t.pendingProps,r),t.child;case 8:case 12:return Eo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ni(js,i._currentValue),i._currentValue=o,null!==a)if(lr(a.value,o)){if(a.children===s.children&&!Ai.current){t=Jo(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=qs(-1,r&-r)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),Is(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(n(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Is(o,r,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Eo(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,As(t,r),i=i(s=Ls(s)),t.flags|=1,Eo(e,t,i,r),t.child;case 14:return s=ao(i=t.type,t.pendingProps),jo(e,t,i,s=ao(i.type,s),r);case 15:return To(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ao(i,s),Go(e,t),t.tag=1,Di(i)?(e=!0,Wi(t)):e=!1,As(t,r),uo(t,i,s),fo(t,i,s,r),Io(null,t,i,!0,e,r);case 19:return Vo(e,t,r);case 22:return Ro(e,t,r)}throw Error(n(156,t.tag))};var eu="function"==typeof reportError?reportError:function(e){console.error(e)};function tu(e){this._internalRoot=e}function nu(e){this._internalRoot=e}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function su(){}function au(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"==typeof i){var o=i;i=function(){var e=Qc(a);o.call(e)}}Yc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=Qc(a);s.call(e)}}var a=Jc(t,r,e,0,null,!1,0,"",su);return e._reactRootContainer=a,e[bi]=a.current,Vr(8===e.nodeType?e.parentNode:e),yc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var o=r;r=function(){var e=Qc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",su);return e._reactRootContainer=l,e[bi]=l.current,Vr(8===e.nodeType?e.parentNode:e),yc(function(){Yc(t,l,n,r)}),l}(n,t,e,i,r);return Qc(a)}nu.prototype.render=tu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Yc(e,t,null,null)},nu.prototype.unmount=tu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;yc(function(){Yc(null,e,null,null)}),t[bi]=null}},nu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&$t(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),uc(t,Xe()),!(6&Il)&&(Gl=Xe()+500,Vi()))}break;case 13:yc(function(){var t=Ms(e,1);if(null!==t){var n=oc();cc(t,e,1,n)}}),Zc(e,1)}},xt=function(e){if(13===e.tag){var t=Ms(e,134217728);if(null!==t)cc(t,e,134217728,oc());Zc(e,134217728)}},kt=function(e){if(13===e.tag){var t=lc(e),n=Ms(e,t);if(null!==n)cc(n,e,t,oc());Zc(e,t)}},Et=function(){return wt},Ct=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},xe=function(e,t,r){switch(t){case"input":if(Z(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var s=Ci(i);if(!s)throw Error(n(90));G(i),Z(i,s)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Re=gc,Oe=yc;var ou={usingClientEntryPoint:!1,Events:[ki,Ei,Ci,je,Te,gc]},lu={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cu={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{st=uu.inject(cu),at=uu}catch(de){}}return _.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ou,_.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ru(t))throw Error(n(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,r)},_.createRoot=function(e,t){if(!ru(e))throw Error(n(299));var r=!1,i="",s=eu;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Vc(e,1,!1,null,0,r,0,i,s),e[bi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new tu(t)},_.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=He(t))?null:e.stateNode},_.flushSync=function(e){return yc(e)},_.hydrate=function(e,t,r){if(!iu(t))throw Error(n(200));return au(null,e,t,!0,r)},_.hydrateRoot=function(e,t,r){if(!ru(e))throw Error(n(405));var i=null!=r&&r.hydratedSources||null,s=!1,a="",o=eu;if(null!=r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Jc(t,null,e,1,null!=r?r:null,s,0,a,o),e[bi]=t.current,Vr(e),i)for(e=0;e<i.length;e++)s=(s=(r=i[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new nu(t)},_.render=function(e,t,r){if(!iu(t))throw Error(n(200));return au(null,e,t,!1,r)},_.unmountComponentAtNode=function(e){if(!iu(e))throw Error(n(40));return!!e._reactRootContainer&&(yc(function(){au(null,null,e,!1,function(){e._reactRootContainer=null,e[bi]=null})}),!0)},_.unstable_batchedUpdates=gc,_.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!iu(r))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return au(e,t,r,!1,i)},_.version="18.3.1-next-f1338f8080-20240426",_}function C(){if(g)return w.exports;return g=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),w.exports=E(),w.exports}var j=function(){if(y)return b;y=1;var e=C();return b.createRoot=e.createRoot,b.hydrateRoot=e.hydrateRoot,b}();const T=t(j);var R=h();const O=e({__proto__:null,default:t(R)},[R]);var N,P={exports:{}};var I,A=(N||(N=1,I=P,function(e,t){I.exports?I.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())}(P.exports,function(){var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,n=unescape(encodeURIComponent(e)),r=new Uint8Array(n.length);for(t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r},e.encodeUTF8=function(e){var t,n=[];for(t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(n.join("")))},"undefined"==typeof atob?void 0!==Buffer.from?(e.encodeBase64=function(e){return Buffer.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(Buffer.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new Buffer(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new Buffer(e,"base64"),0))}):(e.encodeBase64=function(e){var t,n=[],r=e.length;for(t=0;t<r;t++)n.push(String.fromCharCode(e[t]));return btoa(n.join(""))},e.decodeBase64=function(e){t(e);var n,r=atob(e),i=new Uint8Array(r.length);for(n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return i}),e})),P.exports);const L=t(A);function U(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var D={exports:{}};const $=n(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var M;var B=(M||(M=1,function(e){var t=function(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;t++)n[t]=e[t];return n},n=function(){throw new Error("no PRNG")},r=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var s=t(),a=t([1]),o=t([56129,1]),l=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,n,r){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n,e[t+4]=r>>24&255,e[t+5]=r>>16&255,e[t+6]=r>>8&255,e[t+7]=255&r}function p(e,t,n,r,i){var s,a=0;for(s=0;s<i;s++)a|=e[t+s]^n[r+s];return(1&a-1>>>8)-1}function m(e,t,n,r){return p(e,t,n,r,16)}function g(e,t,n,r){return p(e,t,n,r,32)}function y(e,t,n,r){!function(e,t,n,r){for(var i,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,c=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,g=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,v=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,b=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,w=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,_=s,S=a,x=o,k=l,E=c,C=u,j=d,T=h,R=f,O=p,N=m,P=g,I=y,A=v,L=b,U=w,D=0;D<20;D+=2)_^=(i=(I^=(i=(R^=(i=(E^=(i=_+I|0)<<7|i>>>25)+_|0)<<9|i>>>23)+E|0)<<13|i>>>19)+R|0)<<18|i>>>14,C^=(i=(S^=(i=(A^=(i=(O^=(i=C+S|0)<<7|i>>>25)+C|0)<<9|i>>>23)+O|0)<<13|i>>>19)+A|0)<<18|i>>>14,N^=(i=(j^=(i=(x^=(i=(L^=(i=N+j|0)<<7|i>>>25)+N|0)<<9|i>>>23)+L|0)<<13|i>>>19)+x|0)<<18|i>>>14,U^=(i=(P^=(i=(T^=(i=(k^=(i=U+P|0)<<7|i>>>25)+U|0)<<9|i>>>23)+k|0)<<13|i>>>19)+T|0)<<18|i>>>14,_^=(i=(k^=(i=(x^=(i=(S^=(i=_+k|0)<<7|i>>>25)+_|0)<<9|i>>>23)+S|0)<<13|i>>>19)+x|0)<<18|i>>>14,C^=(i=(E^=(i=(T^=(i=(j^=(i=C+E|0)<<7|i>>>25)+C|0)<<9|i>>>23)+j|0)<<13|i>>>19)+T|0)<<18|i>>>14,N^=(i=(O^=(i=(R^=(i=(P^=(i=N+O|0)<<7|i>>>25)+N|0)<<9|i>>>23)+P|0)<<13|i>>>19)+R|0)<<18|i>>>14,U^=(i=(L^=(i=(A^=(i=(I^=(i=U+L|0)<<7|i>>>25)+U|0)<<9|i>>>23)+I|0)<<13|i>>>19)+A|0)<<18|i>>>14;_=_+s|0,S=S+a|0,x=x+o|0,k=k+l|0,E=E+c|0,C=C+u|0,j=j+d|0,T=T+h|0,R=R+f|0,O=O+p|0,N=N+m|0,P=P+g|0,I=I+y|0,A=A+v|0,L=L+b|0,U=U+w|0,e[0]=_>>>0&255,e[1]=_>>>8&255,e[2]=_>>>16&255,e[3]=_>>>24&255,e[4]=S>>>0&255,e[5]=S>>>8&255,e[6]=S>>>16&255,e[7]=S>>>24&255,e[8]=x>>>0&255,e[9]=x>>>8&255,e[10]=x>>>16&255,e[11]=x>>>24&255,e[12]=k>>>0&255,e[13]=k>>>8&255,e[14]=k>>>16&255,e[15]=k>>>24&255,e[16]=E>>>0&255,e[17]=E>>>8&255,e[18]=E>>>16&255,e[19]=E>>>24&255,e[20]=C>>>0&255,e[21]=C>>>8&255,e[22]=C>>>16&255,e[23]=C>>>24&255,e[24]=j>>>0&255,e[25]=j>>>8&255,e[26]=j>>>16&255,e[27]=j>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=R>>>0&255,e[33]=R>>>8&255,e[34]=R>>>16&255,e[35]=R>>>24&255,e[36]=O>>>0&255,e[37]=O>>>8&255,e[38]=O>>>16&255,e[39]=O>>>24&255,e[40]=N>>>0&255,e[41]=N>>>8&255,e[42]=N>>>16&255,e[43]=N>>>24&255,e[44]=P>>>0&255,e[45]=P>>>8&255,e[46]=P>>>16&255,e[47]=P>>>24&255,e[48]=I>>>0&255,e[49]=I>>>8&255,e[50]=I>>>16&255,e[51]=I>>>24&255,e[52]=A>>>0&255,e[53]=A>>>8&255,e[54]=A>>>16&255,e[55]=A>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=U>>>0&255,e[61]=U>>>8&255,e[62]=U>>>16&255,e[63]=U>>>24&255}(e,t,n,r)}function v(e,t,n,r){!function(e,t,n,r){for(var i,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,c=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,g=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,v=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,b=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,w=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,_=0;_<20;_+=2)s^=(i=(y^=(i=(f^=(i=(c^=(i=s+y|0)<<7|i>>>25)+s|0)<<9|i>>>23)+c|0)<<13|i>>>19)+f|0)<<18|i>>>14,u^=(i=(a^=(i=(v^=(i=(p^=(i=u+a|0)<<7|i>>>25)+u|0)<<9|i>>>23)+p|0)<<13|i>>>19)+v|0)<<18|i>>>14,m^=(i=(d^=(i=(o^=(i=(b^=(i=m+d|0)<<7|i>>>25)+m|0)<<9|i>>>23)+b|0)<<13|i>>>19)+o|0)<<18|i>>>14,w^=(i=(g^=(i=(h^=(i=(l^=(i=w+g|0)<<7|i>>>25)+w|0)<<9|i>>>23)+l|0)<<13|i>>>19)+h|0)<<18|i>>>14,s^=(i=(l^=(i=(o^=(i=(a^=(i=s+l|0)<<7|i>>>25)+s|0)<<9|i>>>23)+a|0)<<13|i>>>19)+o|0)<<18|i>>>14,u^=(i=(c^=(i=(h^=(i=(d^=(i=u+c|0)<<7|i>>>25)+u|0)<<9|i>>>23)+d|0)<<13|i>>>19)+h|0)<<18|i>>>14,m^=(i=(p^=(i=(f^=(i=(g^=(i=m+p|0)<<7|i>>>25)+m|0)<<9|i>>>23)+g|0)<<13|i>>>19)+f|0)<<18|i>>>14,w^=(i=(b^=(i=(v^=(i=(y^=(i=w+b|0)<<7|i>>>25)+w|0)<<9|i>>>23)+y|0)<<13|i>>>19)+v|0)<<18|i>>>14;e[0]=s>>>0&255,e[1]=s>>>8&255,e[2]=s>>>16&255,e[3]=s>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=m>>>0&255,e[9]=m>>>8&255,e[10]=m>>>16&255,e[11]=m>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=h>>>0&255,e[21]=h>>>8&255,e[22]=h>>>16&255,e[23]=h>>>24&255,e[24]=f>>>0&255,e[25]=f>>>8&255,e[26]=f>>>16&255,e[27]=f>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,n,r)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(e,t,n,r,i,s,a){var o,l,c=new Uint8Array(16),u=new Uint8Array(64);for(l=0;l<16;l++)c[l]=0;for(l=0;l<8;l++)c[l]=s[l];for(;i>=64;){for(y(u,c,a,b),l=0;l<64;l++)e[t+l]=n[r+l]^u[l];for(o=1,l=8;l<16;l++)o=o+(255&c[l])|0,c[l]=255&o,o>>>=8;i-=64,t+=64,r+=64}if(i>0)for(y(u,c,a,b),l=0;l<i;l++)e[t+l]=n[r+l]^u[l];return 0}function _(e,t,n,r,i){var s,a,o=new Uint8Array(16),l=new Uint8Array(64);for(a=0;a<16;a++)o[a]=0;for(a=0;a<8;a++)o[a]=r[a];for(;n>=64;){for(y(l,o,i,b),a=0;a<64;a++)e[t+a]=l[a];for(s=1,a=8;a<16;a++)s=s+(255&o[a])|0,o[a]=255&s,s>>>=8;n-=64,t+=64}if(n>0)for(y(l,o,i,b),a=0;a<n;a++)e[t+a]=l[a];return 0}function S(e,t,n,r,i){var s=new Uint8Array(32);v(s,r,i,b);for(var a=new Uint8Array(8),o=0;o<8;o++)a[o]=r[o+16];return _(e,t,n,a,s)}function x(e,t,n,r,i,s,a){var o=new Uint8Array(32);v(o,s,a,b);for(var l=new Uint8Array(8),c=0;c<8;c++)l[c]=s[c+16];return w(e,t,n,r,i,l,o)}var k=function(e){var t,n,r,i,s,a,o,l;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,n=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|n<<3),r=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(n>>>10|r<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(r>>>7|i<<9),s=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,a=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(s>>>14|a<<2),o=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(a>>>11|o<<5),l=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(o>>>8|l<<8),this.r[9]=l>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function E(e,t,n,r,i,s){var a=new k(s);return a.update(n,r,i),a.finish(e,t),0}function C(e,t,n,r,i,s){var a=new Uint8Array(16);return E(a,0,n,r,i,s),m(e,t,a,0)}function j(e,t,n,r,i){var s;if(n<32)return-1;for(x(e,0,t,0,n,r,i),E(e,16,e,32,n-32,e),s=0;s<16;s++)e[s]=0;return 0}function T(e,t,n,r,i){var s,a=new Uint8Array(32);if(n<32)return-1;if(S(a,0,32,r,i),0!==C(t,16,t,32,n-32,a))return-1;for(x(e,0,t,0,n,r,i),s=0;s<32;s++)e[s]=0;return 0}function R(e,t){var n;for(n=0;n<16;n++)e[n]=0|t[n]}function O(e){var t,n,r=1;for(t=0;t<16;t++)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-65536*r;e[0]+=r-1+37*(r-1)}function N(e,t,n){for(var r,i=~(n-1),s=0;s<16;s++)r=i&(e[s]^t[s]),e[s]^=r,t[s]^=r}function P(e,n){var r,i,s,a=t(),o=t();for(r=0;r<16;r++)o[r]=n[r];for(O(o),O(o),O(o),i=0;i<2;i++){for(a[0]=o[0]-65517,r=1;r<15;r++)a[r]=o[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=o[15]-32767-(a[14]>>16&1),s=a[15]>>16&1,a[14]&=65535,N(o,a,1-s)}for(r=0;r<16;r++)e[2*r]=255&o[r],e[2*r+1]=o[r]>>8}function I(e,t){var n=new Uint8Array(32),r=new Uint8Array(32);return P(n,e),P(r,t),g(n,0,r,0)}function A(e){var t=new Uint8Array(32);return P(t,e),1&t[0]}function L(e,t){var n;for(n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function D(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]+n[r]}function M(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]-n[r]}function B(e,t,n){var r,i,s=0,a=0,o=0,l=0,c=0,u=0,d=0,h=0,f=0,p=0,m=0,g=0,y=0,v=0,b=0,w=0,_=0,S=0,x=0,k=0,E=0,C=0,j=0,T=0,R=0,O=0,N=0,P=0,I=0,A=0,L=0,U=n[0],D=n[1],$=n[2],M=n[3],B=n[4],W=n[5],z=n[6],q=n[7],F=n[8],K=n[9],H=n[10],V=n[11],G=n[12],J=n[13],Y=n[14],Q=n[15];s+=(r=t[0])*U,a+=r*D,o+=r*$,l+=r*M,c+=r*B,u+=r*W,d+=r*z,h+=r*q,f+=r*F,p+=r*K,m+=r*H,g+=r*V,y+=r*G,v+=r*J,b+=r*Y,w+=r*Q,a+=(r=t[1])*U,o+=r*D,l+=r*$,c+=r*M,u+=r*B,d+=r*W,h+=r*z,f+=r*q,p+=r*F,m+=r*K,g+=r*H,y+=r*V,v+=r*G,b+=r*J,w+=r*Y,_+=r*Q,o+=(r=t[2])*U,l+=r*D,c+=r*$,u+=r*M,d+=r*B,h+=r*W,f+=r*z,p+=r*q,m+=r*F,g+=r*K,y+=r*H,v+=r*V,b+=r*G,w+=r*J,_+=r*Y,S+=r*Q,l+=(r=t[3])*U,c+=r*D,u+=r*$,d+=r*M,h+=r*B,f+=r*W,p+=r*z,m+=r*q,g+=r*F,y+=r*K,v+=r*H,b+=r*V,w+=r*G,_+=r*J,S+=r*Y,x+=r*Q,c+=(r=t[4])*U,u+=r*D,d+=r*$,h+=r*M,f+=r*B,p+=r*W,m+=r*z,g+=r*q,y+=r*F,v+=r*K,b+=r*H,w+=r*V,_+=r*G,S+=r*J,x+=r*Y,k+=r*Q,u+=(r=t[5])*U,d+=r*D,h+=r*$,f+=r*M,p+=r*B,m+=r*W,g+=r*z,y+=r*q,v+=r*F,b+=r*K,w+=r*H,_+=r*V,S+=r*G,x+=r*J,k+=r*Y,E+=r*Q,d+=(r=t[6])*U,h+=r*D,f+=r*$,p+=r*M,m+=r*B,g+=r*W,y+=r*z,v+=r*q,b+=r*F,w+=r*K,_+=r*H,S+=r*V,x+=r*G,k+=r*J,E+=r*Y,C+=r*Q,h+=(r=t[7])*U,f+=r*D,p+=r*$,m+=r*M,g+=r*B,y+=r*W,v+=r*z,b+=r*q,w+=r*F,_+=r*K,S+=r*H,x+=r*V,k+=r*G,E+=r*J,C+=r*Y,j+=r*Q,f+=(r=t[8])*U,p+=r*D,m+=r*$,g+=r*M,y+=r*B,v+=r*W,b+=r*z,w+=r*q,_+=r*F,S+=r*K,x+=r*H,k+=r*V,E+=r*G,C+=r*J,j+=r*Y,T+=r*Q,p+=(r=t[9])*U,m+=r*D,g+=r*$,y+=r*M,v+=r*B,b+=r*W,w+=r*z,_+=r*q,S+=r*F,x+=r*K,k+=r*H,E+=r*V,C+=r*G,j+=r*J,T+=r*Y,R+=r*Q,m+=(r=t[10])*U,g+=r*D,y+=r*$,v+=r*M,b+=r*B,w+=r*W,_+=r*z,S+=r*q,x+=r*F,k+=r*K,E+=r*H,C+=r*V,j+=r*G,T+=r*J,R+=r*Y,O+=r*Q,g+=(r=t[11])*U,y+=r*D,v+=r*$,b+=r*M,w+=r*B,_+=r*W,S+=r*z,x+=r*q,k+=r*F,E+=r*K,C+=r*H,j+=r*V,T+=r*G,R+=r*J,O+=r*Y,N+=r*Q,y+=(r=t[12])*U,v+=r*D,b+=r*$,w+=r*M,_+=r*B,S+=r*W,x+=r*z,k+=r*q,E+=r*F,C+=r*K,j+=r*H,T+=r*V,R+=r*G,O+=r*J,N+=r*Y,P+=r*Q,v+=(r=t[13])*U,b+=r*D,w+=r*$,_+=r*M,S+=r*B,x+=r*W,k+=r*z,E+=r*q,C+=r*F,j+=r*K,T+=r*H,R+=r*V,O+=r*G,N+=r*J,P+=r*Y,I+=r*Q,b+=(r=t[14])*U,w+=r*D,_+=r*$,S+=r*M,x+=r*B,k+=r*W,E+=r*z,C+=r*q,j+=r*F,T+=r*K,R+=r*H,O+=r*V,N+=r*G,P+=r*J,I+=r*Y,A+=r*Q,w+=(r=t[15])*U,a+=38*(S+=r*$),o+=38*(x+=r*M),l+=38*(k+=r*B),c+=38*(E+=r*W),u+=38*(C+=r*z),d+=38*(j+=r*q),h+=38*(T+=r*F),f+=38*(R+=r*K),p+=38*(O+=r*H),m+=38*(N+=r*V),g+=38*(P+=r*G),y+=38*(I+=r*J),v+=38*(A+=r*Y),b+=38*(L+=r*Q),s=(r=(s+=38*(_+=r*D))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),o=(r=o+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),w=(r=w+i+65535)-65536*(i=Math.floor(r/65536)),s=(r=(s+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),o=(r=o+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),w=(r=w+i+65535)-65536*(i=Math.floor(r/65536)),s+=i-1+37*(i-1),e[0]=s,e[1]=a,e[2]=o,e[3]=l,e[4]=c,e[5]=u,e[6]=d,e[7]=h,e[8]=f,e[9]=p,e[10]=m,e[11]=g,e[12]=y,e[13]=v,e[14]=b,e[15]=w}function W(e,t){B(e,t,t)}function z(e,n){var r,i=t();for(r=0;r<16;r++)i[r]=n[r];for(r=253;r>=0;r--)W(i,i),2!==r&&4!==r&&B(i,i,n);for(r=0;r<16;r++)e[r]=i[r]}function q(e,n){var r,i=t();for(r=0;r<16;r++)i[r]=n[r];for(r=250;r>=0;r--)W(i,i),1!==r&&B(i,i,n);for(r=0;r<16;r++)e[r]=i[r]}function F(e,n,r){var i,s,a=new Uint8Array(32),l=new Float64Array(80),c=t(),u=t(),d=t(),h=t(),f=t(),p=t();for(s=0;s<31;s++)a[s]=n[s];for(a[31]=127&n[31]|64,a[0]&=248,L(l,r),s=0;s<16;s++)u[s]=l[s],h[s]=c[s]=d[s]=0;for(c[0]=h[0]=1,s=254;s>=0;--s)N(c,u,i=a[s>>>3]>>>(7&s)&1),N(d,h,i),D(f,c,d),M(c,c,d),D(d,u,h),M(u,u,h),W(h,f),W(p,c),B(c,d,c),B(d,u,f),D(f,c,d),M(c,c,d),W(u,c),M(d,h,p),B(c,d,o),D(c,c,h),B(d,d,c),B(c,h,p),B(h,u,l),W(u,f),N(c,u,i),N(d,h,i);for(s=0;s<16;s++)l[s+16]=c[s],l[s+32]=d[s],l[s+48]=u[s],l[s+64]=h[s];var m=l.subarray(32),g=l.subarray(16);return z(m,m),B(g,g,m),P(e,g),0}function K(e,t){return F(e,t,i)}function H(e,t){return n(t,32),K(e,t)}function V(e,t,n){var i=new Uint8Array(32);return F(i,n,t),v(e,r,i,b)}k.prototype.blocks=function(e,t,n){for(var r,i,s,a,o,l,c,u,d,h,f,p,m,g,y,v,b,w,_,S=this.fin?0:2048,x=this.h[0],k=this.h[1],E=this.h[2],C=this.h[3],j=this.h[4],T=this.h[5],R=this.h[6],O=this.h[7],N=this.h[8],P=this.h[9],I=this.r[0],A=this.r[1],L=this.r[2],U=this.r[3],D=this.r[4],$=this.r[5],M=this.r[6],B=this.r[7],W=this.r[8],z=this.r[9];n>=16;)h=d=0,h+=(x+=8191&(r=255&e[t+0]|(255&e[t+1])<<8))*I,h+=(k+=8191&(r>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*z),h+=(E+=8191&(i>>>10|(s=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*W),h+=(C+=8191&(s>>>7|(a=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*B),d=(h+=(j+=8191&(a>>>4|(o=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*M))>>>13,h&=8191,h+=(T+=o>>>1&8191)*(5*$),h+=(R+=8191&(o>>>14|(l=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*D),h+=(O+=8191&(l>>>11|(c=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*U),h+=(N+=8191&(c>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*L),f=d+=(h+=(P+=u>>>5|S)*(5*A))>>>13,f+=x*A,f+=k*I,f+=E*(5*z),f+=C*(5*W),d=(f+=j*(5*B))>>>13,f&=8191,f+=T*(5*M),f+=R*(5*$),f+=O*(5*D),f+=N*(5*U),d+=(f+=P*(5*L))>>>13,f&=8191,p=d,p+=x*L,p+=k*A,p+=E*I,p+=C*(5*z),d=(p+=j*(5*W))>>>13,p&=8191,p+=T*(5*B),p+=R*(5*M),p+=O*(5*$),p+=N*(5*D),m=d+=(p+=P*(5*U))>>>13,m+=x*U,m+=k*L,m+=E*A,m+=C*I,d=(m+=j*(5*z))>>>13,m&=8191,m+=T*(5*W),m+=R*(5*B),m+=O*(5*M),m+=N*(5*$),g=d+=(m+=P*(5*D))>>>13,g+=x*D,g+=k*U,g+=E*L,g+=C*A,d=(g+=j*I)>>>13,g&=8191,g+=T*(5*z),g+=R*(5*W),g+=O*(5*B),g+=N*(5*M),y=d+=(g+=P*(5*$))>>>13,y+=x*$,y+=k*D,y+=E*U,y+=C*L,d=(y+=j*A)>>>13,y&=8191,y+=T*I,y+=R*(5*z),y+=O*(5*W),y+=N*(5*B),v=d+=(y+=P*(5*M))>>>13,v+=x*M,v+=k*$,v+=E*D,v+=C*U,d=(v+=j*L)>>>13,v&=8191,v+=T*A,v+=R*I,v+=O*(5*z),v+=N*(5*W),b=d+=(v+=P*(5*B))>>>13,b+=x*B,b+=k*M,b+=E*$,b+=C*D,d=(b+=j*U)>>>13,b&=8191,b+=T*L,b+=R*A,b+=O*I,b+=N*(5*z),w=d+=(b+=P*(5*W))>>>13,w+=x*W,w+=k*B,w+=E*M,w+=C*$,d=(w+=j*D)>>>13,w&=8191,w+=T*U,w+=R*L,w+=O*A,w+=N*I,_=d+=(w+=P*(5*z))>>>13,_+=x*z,_+=k*W,_+=E*B,_+=C*M,d=(_+=j*$)>>>13,_&=8191,_+=T*D,_+=R*U,_+=O*L,_+=N*A,x=h=8191&(d=(d=((d+=(_+=P*I)>>>13)<<2)+d|0)+(h&=8191)|0),k=f+=d>>>=13,E=p&=8191,C=m&=8191,j=g&=8191,T=y&=8191,R=v&=8191,O=b&=8191,N=w&=8191,P=_&=8191,t+=16,n-=16;this.h[0]=x,this.h[1]=k,this.h[2]=E,this.h[3]=C,this.h[4]=j,this.h[5]=T,this.h[6]=R,this.h[7]=O,this.h[8]=N,this.h[9]=P},k.prototype.finish=function(e,t){var n,r,i,s,a=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=n,n=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,a[0]=this.h[0]+5,n=a[0]>>>13,a[0]&=8191,s=1;s<10;s++)a[s]=this.h[s]+n,n=a[s]>>>13,a[s]&=8191;for(a[9]-=8192,r=(1^n)-1,s=0;s<10;s++)a[s]&=r;for(r=~r,s=0;s<10;s++)this.h[s]=this.h[s]&r|a[s];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,s=1;s<8;s++)i=(this.h[s]+this.pad[s]|0)+(i>>>16)|0,this.h[s]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},k.prototype.update=function(e,t,n){var r,i;if(this.leftover){for((i=16-this.leftover)>n&&(i=n),r=0;r<i;r++)this.buffer[this.leftover+r]=e[t+r];if(n-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(i=n-n%16,this.blocks(e,t,i),t+=i,n-=i),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=e[t+r];this.leftover+=n}};var G=j,J=T,Y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Q(e,t,n,r){for(var i,s,a,o,l,c,u,d,h,f,p,m,g,y,v,b,w,_,S,x,k,E,C,j,T,R,O=new Int32Array(16),N=new Int32Array(16),P=e[0],I=e[1],A=e[2],L=e[3],U=e[4],D=e[5],$=e[6],M=e[7],B=t[0],W=t[1],z=t[2],q=t[3],F=t[4],K=t[5],H=t[6],V=t[7],G=0;r>=128;){for(S=0;S<16;S++)x=8*S+G,O[S]=n[x+0]<<24|n[x+1]<<16|n[x+2]<<8|n[x+3],N[S]=n[x+4]<<24|n[x+5]<<16|n[x+6]<<8|n[x+7];for(S=0;S<80;S++)if(i=P,s=I,a=A,o=L,l=U,c=D,u=$,h=B,f=W,p=z,m=q,g=F,y=K,v=H,C=65535&(E=V),j=E>>>16,T=65535&(k=M),R=k>>>16,C+=65535&(E=(F>>>14|U<<18)^(F>>>18|U<<14)^(U>>>9|F<<23)),j+=E>>>16,T+=65535&(k=(U>>>14|F<<18)^(U>>>18|F<<14)^(F>>>9|U<<23)),R+=k>>>16,C+=65535&(E=F&K^~F&H),j+=E>>>16,T+=65535&(k=U&D^~U&$),R+=k>>>16,C+=65535&(E=Y[2*S+1]),j+=E>>>16,T+=65535&(k=Y[2*S]),R+=k>>>16,k=O[S%16],j+=(E=N[S%16])>>>16,T+=65535&k,R+=k>>>16,T+=(j+=(C+=65535&E)>>>16)>>>16,C=65535&(E=_=65535&C|j<<16),j=E>>>16,T=65535&(k=w=65535&T|(R+=T>>>16)<<16),R=k>>>16,C+=65535&(E=(B>>>28|P<<4)^(P>>>2|B<<30)^(P>>>7|B<<25)),j+=E>>>16,T+=65535&(k=(P>>>28|B<<4)^(B>>>2|P<<30)^(B>>>7|P<<25)),R+=k>>>16,j+=(E=B&W^B&z^W&z)>>>16,T+=65535&(k=P&I^P&A^I&A),R+=k>>>16,d=65535&(T+=(j+=(C+=65535&E)>>>16)>>>16)|(R+=T>>>16)<<16,b=65535&C|j<<16,C=65535&(E=m),j=E>>>16,T=65535&(k=o),R=k>>>16,j+=(E=_)>>>16,T+=65535&(k=w),R+=k>>>16,I=i,A=s,L=a,U=o=65535&(T+=(j+=(C+=65535&E)>>>16)>>>16)|(R+=T>>>16)<<16,D=l,$=c,M=u,P=d,W=h,z=f,q=p,F=m=65535&C|j<<16,K=g,H=y,V=v,B=b,S%16==15)for(x=0;x<16;x++)k=O[x],C=65535&(E=N[x]),j=E>>>16,T=65535&k,R=k>>>16,k=O[(x+9)%16],C+=65535&(E=N[(x+9)%16]),j+=E>>>16,T+=65535&k,R+=k>>>16,w=O[(x+1)%16],C+=65535&(E=((_=N[(x+1)%16])>>>1|w<<31)^(_>>>8|w<<24)^(_>>>7|w<<25)),j+=E>>>16,T+=65535&(k=(w>>>1|_<<31)^(w>>>8|_<<24)^w>>>7),R+=k>>>16,w=O[(x+14)%16],j+=(E=((_=N[(x+14)%16])>>>19|w<<13)^(w>>>29|_<<3)^(_>>>6|w<<26))>>>16,T+=65535&(k=(w>>>19|_<<13)^(_>>>29|w<<3)^w>>>6),R+=k>>>16,R+=(T+=(j+=(C+=65535&E)>>>16)>>>16)>>>16,O[x]=65535&T|R<<16,N[x]=65535&C|j<<16;C=65535&(E=B),j=E>>>16,T=65535&(k=P),R=k>>>16,k=e[0],j+=(E=t[0])>>>16,T+=65535&k,R+=k>>>16,R+=(T+=(j+=(C+=65535&E)>>>16)>>>16)>>>16,e[0]=P=65535&T|R<<16,t[0]=B=65535&C|j<<16,C=65535&(E=W),j=E>>>16,T=65535&(k=I),R=k>>>16,k=e[1],j+=(E=t[1])>>>16,T+=65535&k,R+=k>>>16,R+=(T+=(j+=(C+=65535&E)>>>16)>>>16)>>>16,e[1]=I=65535&T|R<<16,t[1]=W=65535&C|j<<16,C=65535&(E=z),j=E>>>16,T=65535&(k=A),R=k>>>16,k=e[2],j+=(E=t[2])>>>16,T+=65535&k,R+=k>>>16,R+=(T+=(j+=(C+=65535&E)>>>16)>>>16)>>>16,e[2]=A=65535&T|R<<16,t[2]=z=65535&C|j<<16,C=65535&(E=q),j=E>>>16,T=65535&(k=L),R=k>>>16,k=e[3],j+=(E=t[3])>>>16,T+=65535&k,R+=k>>>16,R+=(T+=(j+=(C+=65535&E)>>>16)>>>16)>>>16,e[3]=L=65535&T|R<<16,t[3]=q=65535&C|j<<16,C=65535&(E=F),j=E>>>16,T=65535&(k=U),R=k>>>16,k=e[4],j+=(E=t[4])>>>16,T+=65535&k,R+=k>>>16,R+=(T+=(j+=(C+=65535&E)>>>16)>>>16)>>>16,e[4]=U=65535&T|R<<16,t[4]=F=65535&C|j<<16,C=65535&(E=K),j=E>>>16,T=65535&(k=D),R=k>>>16,k=e[5],j+=(E=t[5])>>>16,T+=65535&k,R+=k>>>16,R+=(T+=(j+=(C+=65535&E)>>>16)>>>16)>>>16,e[5]=D=65535&T|R<<16,t[5]=K=65535&C|j<<16,C=65535&(E=H),j=E>>>16,T=65535&(k=$),R=k>>>16,k=e[6],j+=(E=t[6])>>>16,T+=65535&k,R+=k>>>16,R+=(T+=(j+=(C+=65535&E)>>>16)>>>16)>>>16,e[6]=$=65535&T|R<<16,t[6]=H=65535&C|j<<16,C=65535&(E=V),j=E>>>16,T=65535&(k=M),R=k>>>16,k=e[7],j+=(E=t[7])>>>16,T+=65535&k,R+=k>>>16,R+=(T+=(j+=(C+=65535&E)>>>16)>>>16)>>>16,e[7]=M=65535&T|R<<16,t[7]=V=65535&C|j<<16,G+=128,r-=128}return r}function X(e,t,n){var r,i=new Int32Array(8),s=new Int32Array(8),a=new Uint8Array(256),o=n;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,Q(i,s,t,n),n%=128,r=0;r<n;r++)a[r]=t[o-n+r];for(a[n]=128,a[(n=256-128*(n<112?1:0))-9]=0,f(a,n-8,o/536870912|0,o<<3),Q(i,s,a,n),r=0;r<8;r++)f(e,8*r,i[r],s[r]);return 0}function Z(e,n){var r=t(),i=t(),s=t(),a=t(),o=t(),l=t(),u=t(),d=t(),h=t();M(r,e[1],e[0]),M(h,n[1],n[0]),B(r,r,h),D(i,e[0],e[1]),D(h,n[0],n[1]),B(i,i,h),B(s,e[3],n[3]),B(s,s,c),B(a,e[2],n[2]),D(a,a,a),M(o,i,r),M(l,a,s),D(u,a,s),D(d,i,r),B(e[0],o,l),B(e[1],d,u),B(e[2],u,l),B(e[3],o,d)}function ee(e,t,n){var r;for(r=0;r<4;r++)N(e[r],t[r],n)}function te(e,n){var r=t(),i=t(),s=t();z(s,n[2]),B(r,n[0],s),B(i,n[1],s),P(e,i),e[31]^=A(r)<<7}function ne(e,t,n){var r,i;for(R(e[0],s),R(e[1],a),R(e[2],a),R(e[3],s),i=255;i>=0;--i)ee(e,t,r=n[i/8|0]>>(7&i)&1),Z(t,e),Z(e,e),ee(e,t,r)}function re(e,n){var r=[t(),t(),t(),t()];R(r[0],u),R(r[1],d),R(r[2],a),B(r[3],u,d),ne(e,r,n)}function ie(e,r,i){var s,a=new Uint8Array(64),o=[t(),t(),t(),t()];for(i||n(r,32),X(a,r,32),a[0]&=248,a[31]&=127,a[31]|=64,re(o,a),te(e,o),s=0;s<32;s++)r[s+32]=e[s];return 0}var se=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ae(e,t){var n,r,i,s;for(r=63;r>=32;--r){for(n=0,i=r-32,s=r-12;i<s;++i)t[i]+=n-16*t[r]*se[i-(r-32)],n=Math.floor((t[i]+128)/256),t[i]-=256*n;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;i++)t[i]+=n-(t[31]>>4)*se[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=n*se[i];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function oe(e){var t,n=new Float64Array(64);for(t=0;t<64;t++)n[t]=e[t];for(t=0;t<64;t++)e[t]=0;ae(e,n)}function le(e,n,r,i){var s,a,o=new Uint8Array(64),l=new Uint8Array(64),c=new Uint8Array(64),u=new Float64Array(64),d=[t(),t(),t(),t()];X(o,i,32),o[0]&=248,o[31]&=127,o[31]|=64;var h=r+64;for(s=0;s<r;s++)e[64+s]=n[s];for(s=0;s<32;s++)e[32+s]=o[32+s];for(X(c,e.subarray(32),r+32),oe(c),re(d,c),te(e,d),s=32;s<64;s++)e[s]=i[s];for(X(l,e,r+64),oe(l),s=0;s<64;s++)u[s]=0;for(s=0;s<32;s++)u[s]=c[s];for(s=0;s<32;s++)for(a=0;a<32;a++)u[s+a]+=l[s]*o[a];return ae(e.subarray(32),u),h}function ce(e,n,r,i){var o,c=new Uint8Array(32),u=new Uint8Array(64),d=[t(),t(),t(),t()],f=[t(),t(),t(),t()];if(r<64)return-1;if(function(e,n){var r=t(),i=t(),o=t(),c=t(),u=t(),d=t(),f=t();return R(e[2],a),L(e[1],n),W(o,e[1]),B(c,o,l),M(o,o,e[2]),D(c,e[2],c),W(u,c),W(d,u),B(f,d,u),B(r,f,o),B(r,r,c),q(r,r),B(r,r,o),B(r,r,c),B(r,r,c),B(e[0],r,c),W(i,e[0]),B(i,i,c),I(i,o)&&B(e[0],e[0],h),W(i,e[0]),B(i,i,c),I(i,o)?-1:(A(e[0])===n[31]>>7&&M(e[0],s,e[0]),B(e[3],e[0],e[1]),0)}(f,i))return-1;for(o=0;o<r;o++)e[o]=n[o];for(o=0;o<32;o++)e[o+32]=i[o];if(X(u,e,r),oe(u),ne(d,f,u),re(f,n.subarray(32)),Z(d,f),te(c,d),r-=64,g(n,0,c,0)){for(o=0;o<r;o++)e[o]=0;return-1}for(o=0;o<r;o++)e[o]=n[o+64];return r}var ue=16,de=64,he=32,fe=64;function pe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function me(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ge(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:v,crypto_stream_xor:x,crypto_stream:S,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:_,crypto_onetimeauth:E,crypto_onetimeauth_verify:C,crypto_verify_16:m,crypto_verify_32:g,crypto_secretbox:j,crypto_secretbox_open:T,crypto_scalarmult:F,crypto_scalarmult_base:K,crypto_box_beforenm:V,crypto_box_afternm:G,crypto_box:function(e,t,n,r,i,s){var a=new Uint8Array(32);return V(a,i,s),G(e,t,n,r,a)},crypto_box_open:function(e,t,n,r,i,s){var a=new Uint8Array(32);return V(a,i,s),J(e,t,n,r,a)},crypto_box_keypair:H,crypto_hash:X,crypto_sign:le,crypto_sign_keypair:ie,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ue,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:de,crypto_sign_PUBLICKEYBYTES:he,crypto_sign_SECRETKEYBYTES:fe,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:l,L:se,pack25519:P,unpack25519:L,M:B,A:D,S:W,Z:M,pow2523:q,add:Z,set25519:R,modL:ae,scalarmult:ne,scalarbase:re},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,n){me(e,t,n),pe(n,t);for(var r=new Uint8Array(32+e.length),i=new Uint8Array(r.length),s=0;s<e.length;s++)r[s+32]=e[s];return j(i,r,r.length,t,n),i.subarray(ue)},e.secretbox.open=function(e,t,n){me(e,t,n),pe(n,t);for(var r=new Uint8Array(ue+e.length),i=new Uint8Array(r.length),s=0;s<e.length;s++)r[s+ue]=e[s];return r.length<32||0!==T(i,r,r.length,t,n)?null:i.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=ue,e.scalarMult=function(e,t){if(me(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var n=new Uint8Array(32);return F(n,e,t),n},e.scalarMult.base=function(e){if(me(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return K(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,n,r,i){var s=e.box.before(r,i);return e.secretbox(t,n,s)},e.box.before=function(e,t){me(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var n=new Uint8Array(32);return V(n,e,t),n},e.box.after=e.secretbox,e.box.open=function(t,n,r,i){var s=e.box.before(r,i);return e.secretbox.open(t,n,s)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return H(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(me(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return K(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(me(e,t),t.length!==fe)throw new Error("bad secret key size");var n=new Uint8Array(de+e.length);return le(n,e,e.length,t),n},e.sign.open=function(e,t){if(me(e,t),t.length!==he)throw new Error("bad public key size");var n=new Uint8Array(e.length),r=ce(n,e,e.length,t);if(r<0)return null;for(var i=new Uint8Array(r),s=0;s<i.length;s++)i[s]=n[s];return i},e.sign.detached=function(t,n){for(var r=e.sign(t,n),i=new Uint8Array(de),s=0;s<i.length;s++)i[s]=r[s];return i},e.sign.detached.verify=function(e,t,n){if(me(e,t,n),t.length!==de)throw new Error("bad signature size");if(n.length!==he)throw new Error("bad public key size");var r,i=new Uint8Array(de+e.length),s=new Uint8Array(de+e.length);for(r=0;r<de;r++)i[r]=t[r];for(r=0;r<e.length;r++)i[r+de]=e[r];return ce(s,i,i.length,n)>=0},e.sign.keyPair=function(){var e=new Uint8Array(he),t=new Uint8Array(fe);return ie(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(me(e),e.length!==fe)throw new Error("bad secret key size");for(var t=new Uint8Array(he),n=0;n<t.length;n++)t[n]=e[32+n];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(me(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(he),n=new Uint8Array(fe),r=0;r<32;r++)n[r]=e[r];return ie(t,n,!0),{publicKey:t,secretKey:n}},e.sign.publicKeyLength=he,e.sign.secretKeyLength=fe,e.sign.seedLength=32,e.sign.signatureLength=de,e.hash=function(e){me(e);var t=new Uint8Array(64);return X(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return me(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===p(e,0,t,0,e.length)},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues?e.setPRNG(function(e,n){var r,i=new Uint8Array(n);for(r=0;r<n;r+=65536)t.getRandomValues(i.subarray(r,r+Math.min(n-r,65536)));for(r=0;r<n;r++)e[r]=i[r];ge(i)}):void 0!==U&&(t=$)&&t.randomBytes&&e.setPRNG(function(e,n){var r,i=t.randomBytes(n);for(r=0;r<n;r++)e[r]=i[r];ge(i)})}()}(D.exports?D.exports:self.nacl=self.nacl||{})),D.exports);const W=t(B);var z,q,F,K,H,V;!function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",e[e.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",e[e.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",e[e.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",e[e.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",e[e.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(z||(z={})),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(q||(q={})),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",e[e.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",e[e.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",e[e.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(F||(F={})),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",e[e.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",e[e.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",e[e.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(K||(K={})),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",e[e.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",e[e.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(H||(H={})),function(e){e.MAINNET="-239",e.TESTNET="-3"}(V||(V={}));const G={encode:function(e,t=!1){let n;return e instanceof Uint8Array?n=e:("string"!=typeof e&&(e=JSON.stringify(e)),n=L.decodeUTF8(e)),function(e,t){const n=L.encodeBase64(e);return t?encodeURIComponent(n):n}(n,t)},decode:function(e,t=!1){const n=function(e,t){return t&&(e=decodeURIComponent(e)),L.decodeBase64(e)}(e,t);return{toString:()=>L.encodeUTF8(n),toObject(){try{return JSON.parse(L.encodeUTF8(n))}catch(tc){return null}},toUint8Array:()=>n}}};function J(e){let t="";return e.forEach(e=>{t+=("0"+(255&e).toString(16)).slice(-2)}),t}function Y(e){if(e.length%2!=0)throw new Error(`Cannot convert ${e} to bytesArray`);const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t}class Q{constructor(e){this.nonceLength=24,this.keyPair=e?this.createKeypairFromString(e):this.createKeypair(),this.sessionId=J(this.keyPair.publicKey)}createKeypair(){return W.box.keyPair()}createKeypairFromString(e){return{publicKey:Y(e.publicKey),secretKey:Y(e.secretKey)}}createNonce(){return W.randomBytes(this.nonceLength)}encrypt(e,t){const n=(new TextEncoder).encode(e),r=this.createNonce();return function(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(r,W.box(n,r,t,this.keyPair.secretKey))}decrypt(e,t){const[n,r]=function(e,t){if(t>=e.length)throw new Error("Index is out of buffer");return[e.slice(0,t),e.slice(t)]}(e,this.nonceLength),i=W.box.open(r,n,t,this.keyPair.secretKey);if(!i)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${this.keyPair.publicKey.toString()} \n keypair secretkey: ${this.keyPair.secretKey.toString()}`);return(new TextDecoder).decode(i)}stringifyKeypair(){return{publicKey:J(this.keyPair.publicKey),secretKey:J(this.keyPair.secretKey)}}}function X(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Z(e,t,n,r){return new(n||(n=Promise))(function(t,i){function s(e){try{o(r.next(e))}catch(tc){i(tc)}}function a(e){try{o(r.throw(e))}catch(tc){i(tc)}}function o(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(s,a)}o((r=r.apply(e,[])).next())})}"function"==typeof SuppressedError&&SuppressedError;class ee extends Error{get info(){return""}constructor(e,t){super(e,t),this.message=`${ee.prefix} ${this.constructor.name}${this.info?": "+this.info:""}${e?"\n"+e:""}`,Object.setPrototypeOf(this,ee.prototype)}}ee.prefix="[TON_CONNECT_SDK_ERROR]";class te extends ee{get info(){return"Passed DappMetadata is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,te.prototype)}}class ne extends ee{get info(){return"Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,ne.prototype)}}class re extends ee{get info(){return"Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,re.prototype)}}class ie extends ee{get info(){return"Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection."}constructor(...e){super(...e),Object.setPrototypeOf(this,ie.prototype)}}class se extends ee{get info(){return"Send transaction or other protocol methods called while wallet is not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,se.prototype)}}class ae extends ee{get info(){return"There is an attempt to connect to the injected wallet while it is not exists in the webpage."}constructor(...e){super(...e),Object.setPrototypeOf(this,ae.prototype)}}class oe extends ee{get info(){return"Wallet doesn't support requested feature method."}constructor(e,t){super(e,t),Object.setPrototypeOf(this,oe.prototype)}}class le extends ee{get info(){return"Missing required features. You need to update your wallet."}constructor(e,t){super(e,t),Object.setPrototypeOf(this,le.prototype)}}class ce extends ee{constructor(e,t){super(e,t),this.name="WalletWrongNetworkError",Object.setPrototypeOf(this,ce.prototype)}}class ue extends ee{get info(){return"User rejects the action in the wallet."}constructor(...e){super(...e),Object.setPrototypeOf(this,ue.prototype)}}class de extends ee{get info(){return"Request to the wallet contains errors."}constructor(...e){super(...e),Object.setPrototypeOf(this,de.prototype)}}class he extends ee{get info(){return"App tries to send rpc request to the injected wallet while not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,he.prototype)}}class fe extends ee{get info(){return"An error occurred while fetching the wallets list."}constructor(...e){super(...e),Object.setPrototypeOf(this,fe.prototype)}}class pe extends ee{get info(){return"Passed address is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,pe.prototype)}}class me extends ee{get info(){return"Passed hex is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,me.prototype)}}class ge extends ee{constructor(...e){super(...e),Object.setPrototypeOf(this,ge.prototype)}}const ye={[z.UNKNOWN_ERROR]:ge,[z.USER_REJECTS_ERROR]:ue,[z.BAD_REQUEST_ERROR]:de,[z.UNKNOWN_APP_ERROR]:he,[z.MANIFEST_NOT_FOUND_ERROR]:re,[z.MANIFEST_CONTENT_ERROR]:ne};const ve=new class{parseError(e){let t=ge;return e.code in ye&&(t=ye[e.code]||ge),new t(e.message)}};class be{isError(e){return"error"in e}}const we={[F.UNKNOWN_ERROR]:ge,[F.USER_REJECTS_ERROR]:ue,[F.BAD_REQUEST_ERROR]:de,[F.UNKNOWN_APP_ERROR]:he};const _e=new class extends be{convertToRpcRequest(e){return{method:"sendTransaction",params:[JSON.stringify(e)]}}parseAndThrowError(e){let t=ge;throw e.error.code in we&&(t=we[e.error.code]||ge),new t(e.error.message)}convertFromRpcResponse(e){return{boc:e.result}}},Se={[K.UNKNOWN_ERROR]:ge,[K.USER_REJECTS_ERROR]:ue,[K.BAD_REQUEST_ERROR]:de,[K.UNKNOWN_APP_ERROR]:he};const xe=new class extends be{convertToRpcRequest(e){return{method:"signData",params:[JSON.stringify(e)]}}parseAndThrowError(e){let t=ge;throw e.error.code in Se&&(t=Se[e.error.code]||ge),new t(e.error.message)}convertFromRpcResponse(e){return e.result}};class ke{constructor(e,t){this.storage=e,this.storeKey="ton-connect-storage_http-bridge-gateway::"+t}storeLastEventId(e){return Z(this,0,void 0,function*(){return this.storage.setItem(this.storeKey,e)})}removeLastEventId(){return Z(this,0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getLastEventId(){return Z(this,0,void 0,function*(){const e=yield this.storage.getItem(this.storeKey);return e||null})}}function Ee(e,t){return function(e){return"/"===e.slice(-1)?e.slice(0,-1):e}(e)+"/"+t}function Ce(e,t){return Z(this,0,void 0,function*(){return new Promise((t,n)=>{setTimeout(()=>t(),e)})})}function je(e){const t=new AbortController;return(null==e?void 0:e.aborted)?t.abort():null==e||e.addEventListener("abort",()=>t.abort(),{once:!0}),t}function Te(e,t){return Z(this,0,void 0,function*(){var n,r;const i=null!==(n=null==t?void 0:t.attempts)&&void 0!==n?n:10,s=null!==(r=null==t?void 0:t.delayMs)&&void 0!==r?r:200,a=je(null==t?void 0:t.signal);if("function"!=typeof e)throw new ee("Expected a function, got "+typeof e);let o,l=0;for(;l<i;){if(a.signal.aborted)throw new ee(`Aborted after attempts ${l}`);try{return yield e({signal:a.signal})}catch(c){o=c,l++,l<i&&(yield Ce(s))}}throw o})}function Re(...e){try{console.debug("[TON_CONNECT_SDK]",...e)}catch(t){}}function Oe(...e){try{console.error("[TON_CONNECT_SDK]",...e)}catch(t){}}class Ne{get isReady(){const e=this.eventSource.current();return(null==e?void 0:e.readyState)===EventSource.OPEN}get isClosed(){const e=this.eventSource.current();return(null==e?void 0:e.readyState)!==EventSource.OPEN}get isConnecting(){const e=this.eventSource.current();return(null==e?void 0:e.readyState)===EventSource.CONNECTING}constructor(e,t,n,r,i,s){this.bridgeUrl=t,this.sessionId=n,this.listener=r,this.errorsListener=i,this.ssePath="events",this.postPath="message",this.heartbeatMessage="heartbeat",this.defaultTtl=300,this.defaultReconnectDelay=2e3,this.defaultResendDelay=5e3,this.eventSource=function(e,t){let n=null,r=null,i=null,s=null,a=null;const o=(o,...l)=>Z(this,0,void 0,function*(){if(s=null!=o?o:null,null==a||a.abort(),a=je(o),a.signal.aborted)throw new ee("Resource creation was aborted");r=null!=l?l:null;const c=e(a.signal,...l);i=c;const u=yield c;if(i!==c&&u!==n)throw yield t(u),new ee("Resource creation was aborted by a new resource creation");return n=u,n});return{create:o,current:()=>null!=n?n:null,dispose:()=>Z(this,0,void 0,function*(){try{const e=n;n=null;const r=i;i=null;try{null==a||a.abort()}catch(tc){}yield Promise.allSettled([e?t(e):Promise.resolve(),r?t(yield r):Promise.resolve()])}catch(tc){}}),recreate:e=>Z(this,0,void 0,function*(){const t=n,a=i,l=r,c=s;if(yield Ce(e),t===n&&a===i&&l===r&&c===s)return yield o(s,...null!=l?l:[]);throw new ee("Resource recreation was aborted by a new resource creation")})}}((e,t,n)=>Z(this,0,void 0,function*(){const r={bridgeUrl:this.bridgeUrl,ssePath:this.ssePath,sessionId:this.sessionId,bridgeGatewayStorage:this.bridgeGatewayStorage,errorHandler:this.errorsHandler.bind(this),messageHandler:this.messagesHandler.bind(this),signal:e,openingDeadlineMS:t,traceId:n};return yield function(e){return Z(this,0,void 0,function*(){return yield function(e,t){const n=null==t?void 0:t.timeout,r=je(null==t?void 0:t.signal);return new Promise((t,i)=>Z(this,0,void 0,function*(){if(r.signal.aborted)return void i(new ee("Operation aborted"));let s;void 0!==n&&(s=setTimeout(()=>{r.abort(),i(new ee(`Timeout after ${n}ms`))},n)),r.signal.addEventListener("abort",()=>{clearTimeout(s),i(new ee("Operation aborted"))},{once:!0});const a={timeout:n,abort:r.signal};yield e((...e)=>{clearTimeout(s),t(...e)},()=>{clearTimeout(s),i()},a)}))}((t,n,r)=>Z(this,0,void 0,function*(){var i;const s=je(r.signal).signal;if(s.aborted)return void n(new ee("Bridge connection aborted"));const a=new URL(Ee(e.bridgeUrl,e.ssePath));a.searchParams.append("client_id",e.sessionId);const o=yield e.bridgeGatewayStorage.getLastEventId();if(o&&a.searchParams.append("last_event_id",o),e.traceId&&a.searchParams.append("trace_id",e.traceId),s.aborted)return void n(new ee("Bridge connection aborted"));const l=new EventSource(a.toString());l.onerror=r=>Z(this,0,void 0,function*(){if(s.aborted)return l.close(),void n(new ee("Bridge connection aborted"));try{const n=yield e.errorHandler(l,r);n!==l&&l.close(),n&&n!==l&&t(n)}catch(tc){l.close(),n(tc)}}),l.onopen=()=>{if(s.aborted)return l.close(),void n(new ee("Bridge connection aborted"));t(l)},l.onmessage=t=>{if(s.aborted)return l.close(),void n(new ee("Bridge connection aborted"));e.messageHandler(t)},null===(i=e.signal)||void 0===i||i.addEventListener("abort",()=>{l.close(),n(new ee("Bridge connection aborted"))})}),{timeout:e.openingDeadlineMS,signal:e.signal})})}(r)}),e=>Z(this,0,void 0,function*(){e.close()})),this.bridgeGatewayStorage=new ke(e,t),this.analytics=null==s?void 0:s.scoped({bridge_url:t,client_id:n})}registerSession(e){return Z(this,0,void 0,function*(){var t,n,r;try{null===(t=this.analytics)||void 0===t||t.emitBridgeClientConnectStarted({trace_id:null==e?void 0:e.traceId});const r=Date.now();yield this.eventSource.create(null==e?void 0:e.signal,null==e?void 0:e.openingDeadlineMS,null==e?void 0:e.traceId);const i=Date.now()-r;null===(n=this.analytics)||void 0===n||n.emitBridgeClientConnectEstablished({bridge_connect_duration:i,trace_id:null==e?void 0:e.traceId})}catch(i){throw null===(r=this.analytics)||void 0===r||r.emitBridgeClientConnectError({trace_id:null==e?void 0:e.traceId,error_message:String(i)}),i}})}send(e,t,n,r){return Z(this,0,void 0,function*(){var i;const s={};"number"==typeof r?s.ttl=r:(s.ttl=null==r?void 0:r.ttl,s.signal=null==r?void 0:r.signal,s.attempts=null==r?void 0:r.attempts,s.traceId=null==r?void 0:r.traceId);const a=new URL(Ee(this.bridgeUrl,this.postPath));a.searchParams.append("client_id",this.sessionId),a.searchParams.append("to",t),a.searchParams.append("ttl",((null==s?void 0:s.ttl)||this.defaultTtl).toString()),a.searchParams.append("topic",n),(null==s?void 0:s.traceId)&&a.searchParams.append("trace_id",s.traceId);const o=G.encode(e);yield Te(e=>Z(this,0,void 0,function*(){const t=yield this.post(a,o,e.signal);if(!t.ok)throw new ee(`Bridge send failed, status ${t.status}`)}),{attempts:null!==(i=null==s?void 0:s.attempts)&&void 0!==i?i:Number.MAX_SAFE_INTEGER,delayMs:this.defaultResendDelay,signal:null==s?void 0:s.signal})})}pause(){this.eventSource.dispose().catch(e=>Oe(`Bridge pause failed, ${e}`))}unPause(){return Z(this,0,void 0,function*(){yield this.eventSource.recreate(0)})}close(){return Z(this,0,void 0,function*(){yield this.eventSource.dispose().catch(e=>Oe(`Bridge close failed, ${e}`))})}setListener(e){this.listener=e}setErrorsListener(e){this.errorsListener=e}post(e,t,n){return Z(this,0,void 0,function*(){const r=yield fetch(e,{method:"post",body:t,signal:n});if(!r.ok)throw new ee(`Bridge send failed, status ${r.status}`);return r})}errorsHandler(e,t){return Z(this,0,void 0,function*(){if(this.isConnecting)throw e.close(),new ee("Bridge error, failed to connect");if(!this.isReady){if(this.isClosed)return e.close(),Re(`Bridge reconnecting, ${this.defaultReconnectDelay}ms delay`),yield this.eventSource.recreate(this.defaultReconnectDelay);throw new ee("Bridge error, unknown state")}try{this.errorsListener(t)}catch(t){}})}messagesHandler(e){return Z(this,0,void 0,function*(){if(e.data===this.heartbeatMessage)return;if(yield this.bridgeGatewayStorage.storeLastEventId(e.lastEventId),this.isClosed)return;let t;try{const n=JSON.parse(e.data);t={message:n.message,from:n.from,traceId:n.trace_id}}catch(n){throw new ee(`Bridge message parse failed, message ${e.data}`)}this.listener(t)})}}function Pe(e){return!("connectEvent"in e)}let Ie;const Ae=new Uint8Array(16);const Le=[];for(let fc=0;fc<256;++fc)Le.push((fc+256).toString(16).slice(1));const Ue={};function De(e,t,n){let r;{const e=Date.now(),i=function(){if(!Ie){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ie=crypto.getRandomValues.bind(crypto)}return Ie(Ae)}();!function(e,t,n){var r,i;null!==(r=e.msecs)&&void 0!==r||(e.msecs=-1/0),null!==(i=e.seq)&&void 0!==i||(e.seq=0),t>e.msecs?(e.seq=n[6]<<23|n[7]<<16|n[8]<<8|n[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++)}(Ue,e,i),r=function(e,t,n,r,i=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(r){if(i<0||i+16>r.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`)}else r=new Uint8Array(16),i=0;return null!=t||(t=Date.now()),null!=n||(n=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9]),r[i++]=t/1099511627776&255,r[i++]=t/4294967296&255,r[i++]=t/16777216&255,r[i++]=t/65536&255,r[i++]=t/256&255,r[i++]=255&t,r[i++]=112|n>>>28&15,r[i++]=n>>>20&255,r[i++]=128|n>>>14&63,r[i++]=n>>>6&255,r[i++]=n<<2&255|3&e[10],r[i++]=e[11],r[i++]=e[12],r[i++]=e[13],r[i++]=e[14],r[i++]=e[15],r}(i,Ue.msecs,Ue.seq,t,n)}return function(e,t=0){return(Le[e[t+0]]+Le[e[t+1]]+Le[e[t+2]]+Le[e[t+3]]+"-"+Le[e[t+4]]+Le[e[t+5]]+"-"+Le[e[t+6]]+Le[e[t+7]]+"-"+Le[e[t+8]]+Le[e[t+9]]+"-"+Le[e[t+10]]+Le[e[t+11]]+Le[e[t+12]]+Le[e[t+13]]+Le[e[t+14]]+Le[e[t+15]]).toLowerCase()}(r)}class $e{static fromStorage(e,t){return Z(this,0,void 0,function*(){const n=yield e.getHttpConnection();return Pe(n)?new $e(e,n.connectionSource,t):new $e(e,{bridgeUrl:n.session.bridgeUrl},t)})}constructor(e,t,n){var r;this.connectionStorage=e,this.walletConnectionSource=t,this.analyticsManager=n,this.type="http",this.standardUniversalLink="tc://",this.pendingRequests=new Map,this.session=null,this.gateway=null,this.pendingGateways=[],this.listeners=[],this.defaultOpeningDeadlineMS=12e3,this.defaultRetryTimeoutMS=2e3,this.optionalOpenGateways=3,this.analytics=null===(r=this.analyticsManager)||void 0===r?void 0:r.scoped()}connect(e,t){var n,r;const i=null!==(n=null==t?void 0:t.traceId)&&void 0!==n?n:De(),s=je(null==t?void 0:t.signal);null===(r=this.abortController)||void 0===r||r.abort(),this.abortController=s,this.closeGateways();const a=new Q;this.session={sessionCrypto:a,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},this.connectionStorage.storeConnection({type:"http",connectionSource:this.walletConnectionSource,sessionCrypto:a}).then(()=>Z(this,0,void 0,function*(){s.signal.aborted||(yield Te(e=>{var n;return this.openGateways(a,{openingDeadlineMS:null!==(n=null==t?void 0:t.openingDeadlineMS)&&void 0!==n?n:this.defaultOpeningDeadlineMS,signal:null==e?void 0:e.signal,traceId:i})},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:s.signal}))}));const o="universalLink"in this.walletConnectionSource&&this.walletConnectionSource.universalLink?this.walletConnectionSource.universalLink:this.standardUniversalLink;return this.generateUniversalLink(o,e,{traceId:i})}restoreConnection(e){return Z(this,0,void 0,function*(){var t,n,r;const i=null!==(t=null==e?void 0:e.traceId)&&void 0!==t?t:De(),s=je(null==e?void 0:e.signal);if(null===(n=this.abortController)||void 0===n||n.abort(),this.abortController=s,s.signal.aborted)return;this.closeGateways();const a=yield this.connectionStorage.getHttpConnection();if(!a)return;if(s.signal.aborted)return;const o=null!==(r=null==e?void 0:e.openingDeadlineMS)&&void 0!==r?r:this.defaultOpeningDeadlineMS;if(Pe(a))return this.session={sessionCrypto:a.sessionCrypto,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},yield this.openGateways(a.sessionCrypto,{openingDeadlineMS:o,signal:null==s?void 0:s.signal,traceId:null==e?void 0:e.traceId});if(Array.isArray(this.walletConnectionSource))throw new ee("Internal error. Connection source is array while WalletConnectionSourceHTTP was expected.");if(this.session=a.session,this.gateway&&(Re("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new Ne(this.connectionStorage.storage,this.walletConnectionSource.bridgeUrl,a.session.sessionCrypto.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this),this.analyticsManager),!s.signal.aborted){this.listeners.forEach(e=>e(Object.assign(Object.assign({},a.connectEvent),{traceId:i})));try{yield Te(e=>this.gateway.registerSession({openingDeadlineMS:o,signal:e.signal,traceId:i}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:s.signal})}catch(tc){return void(yield this.disconnect({signal:s.signal,traceId:i}))}}})}sendRequest(e,t){var n;const r={};return"function"==typeof t?r.onRequestSent=t:(r.onRequestSent=null==t?void 0:t.onRequestSent,r.signal=null==t?void 0:t.signal,r.attempts=null==t?void 0:t.attempts,r.traceId=null==t?void 0:t.traceId),null!==(n=r.traceId)&&void 0!==n||(r.traceId=De()),new Promise((t,n)=>Z(this,0,void 0,function*(){var i,s;if(!this.gateway||!this.session||!("walletPublicKey"in this.session))throw new ee("Trying to send bridge request without session");const a=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),Re("Send http-bridge request:",Object.assign(Object.assign({},e),{id:a}));const o=this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({},e),{id:a})),Y(this.session.walletPublicKey));try{null===(i=this.analytics)||void 0===i||i.emitBridgeClientMessageSent({bridge_url:this.gateway.bridgeUrl,client_id:this.session.sessionCrypto.sessionId,wallet_id:this.session.walletPublicKey,message_id:a,request_type:e.method,trace_id:r.traceId}),yield this.gateway.send(o,this.session.walletPublicKey,e.method,{attempts:null==r?void 0:r.attempts,signal:null==r?void 0:r.signal,traceId:r.traceId}),null===(s=null==r?void 0:r.onRequestSent)||void 0===s||s.call(r),this.pendingRequests.set(a.toString(),t)}catch(tc){n(tc)}}))}closeConnection(){this.closeGateways(),this.listeners=[],this.session=null,this.gateway=null}disconnect(e){return Z(this,0,void 0,function*(){var t;const n=null!==(t=null==e?void 0:e.traceId)&&void 0!==t?t:De();return new Promise(t=>Z(this,0,void 0,function*(){let r=!1,i=null;const s=()=>{r||(r=!0,this.removeBridgeAndSession().then(t))};try{this.closeGateways();const t=je(null==e?void 0:e.signal);i=setTimeout(()=>{t.abort()},this.defaultOpeningDeadlineMS),yield this.sendRequest({method:"disconnect",params:[]},{onRequestSent:s,signal:t.signal,attempts:1,traceId:n})}catch(tc){Re("Disconnect error:",tc),r||this.removeBridgeAndSession().then(t)}finally{i&&clearTimeout(i),s()}}))})}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(t=>t!==e)}pause(){var e;null===(e=this.gateway)||void 0===e||e.pause(),this.pendingGateways.forEach(e=>e.pause())}unPause(){return Z(this,0,void 0,function*(){const e=this.pendingGateways.map(e=>e.unPause());this.gateway&&e.push(this.gateway.unPause()),yield Promise.all(e)})}pendingGatewaysListener(e,t,n){return Z(this,0,void 0,function*(){if(this.pendingGateways.includes(e))return this.closeGateways({except:e}),this.gateway&&(Re("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.session.bridgeUrl=t,this.gateway=e,this.gateway.setErrorsListener(this.gatewayErrorsListener.bind(this)),this.gateway.setListener(this.gatewayListener.bind(this)),this.gatewayListener(n);yield e.close()})}gatewayListener(e){return Z(this,0,void 0,function*(){var t,n,r;const i=null!==(t=e.traceId)&&void 0!==t?t:De();let s;try{s=JSON.parse(this.session.sessionCrypto.decrypt(G.decode(e.message).toUint8Array(),Y(e.from)))}catch(l){throw null===(n=this.analytics)||void 0===n||n.emitBridgeClientMessageDecodeError({bridge_url:this.session.bridgeUrl,client_id:this.session.sessionCrypto.sessionId,wallet_id:e.from,error_message:String(l),trace_id:null==e?void 0:e.traceId}),l}Re("Wallet message received:",s);const a="event"in s?s.event:"";if(null===(r=this.analytics)||void 0===r||r.emitBridgeClientMessageReceived({bridge_url:this.session.bridgeUrl,client_id:this.session.sessionCrypto.sessionId,wallet_id:e.from,message_id:String(s.id),request_type:a,trace_id:null==e?void 0:e.traceId}),!("event"in s)){const e=s.id.toString(),t=this.pendingRequests.get(e);return t?(t(Object.assign(Object.assign({},s),{traceId:i})),void this.pendingRequests.delete(e)):void Re(`Response id ${e} doesn't match any request's id`)}if(void 0!==s.id){const e=yield this.connectionStorage.getLastWalletEventId();if(void 0!==e&&s.id<=e)return void Oe(`Received event id (=${s.id}) must be greater than stored last wallet event id (=${e}) `);"connect"!==s.event&&(yield this.connectionStorage.storeLastWalletEventId(s.id))}const o=this.listeners;"connect"===s.event&&(yield this.updateSession(s,e.from)),"disconnect"===s.event&&(Re("Removing bridge and session: received disconnect event"),yield this.removeBridgeAndSession()),o.forEach(e=>e(Object.assign(Object.assign({},s),{traceId:i})))})}gatewayErrorsListener(e){return Z(this,0,void 0,function*(){throw new ee(`Bridge error ${JSON.stringify(e)}`)})}updateSession(e,t){return Z(this,0,void 0,function*(){this.session=Object.assign(Object.assign({},this.session),{walletPublicKey:t});const n=e.payload.items.find(e=>"ton_addr"===e.name),r=Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{items:[n]})});yield this.connectionStorage.storeConnection({type:"http",session:this.session,lastWalletEventId:e.id,connectEvent:r,nextRpcRequestId:0})})}removeBridgeAndSession(){return Z(this,0,void 0,function*(){this.closeConnection(),yield this.connectionStorage.removeConnection()})}generateUniversalLink(e,t,n){return function(e){if(!e)return!1;const t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname}(e)?this.generateTGUniversalLink(e,t,n):this.generateRegularUniversalLink(e,t,n)}generateRegularUniversalLink(e,t,n){const r=new URL(e);return r.searchParams.append("v",2..toString()),r.searchParams.append("id",this.session.sessionCrypto.sessionId),r.searchParams.append("trace_id",n.traceId),r.searchParams.append("r",JSON.stringify(t)),r.toString()}generateTGUniversalLink(e,t,n){const r=this.generateRegularUniversalLink("about:blank",t,n).split("?")[1],i="tonconnect-"+r.replaceAll(".","%2E").replaceAll("-","%2D").replaceAll("_","%5F").replaceAll("&","-").replaceAll("=","__").replaceAll("%","--");const s=this.convertToDirectLink(e),a=new URL(s);return a.searchParams.append("startapp",i),a.toString()}convertToDirectLink(e){const t=new URL(e);return t.searchParams.has("attach")&&(t.searchParams.delete("attach"),t.pathname+="/start"),t.toString()}openGateways(e,t){return Z(this,0,void 0,function*(){var n;const r=null!==(n=null==t?void 0:t.traceId)&&void 0!==n?n:De();if(Array.isArray(this.walletConnectionSource)){this.pendingGateways.map(e=>e.close().catch()),this.pendingGateways=this.walletConnectionSource.map(t=>{const n=new Ne(this.connectionStorage.storage,t.bridgeUrl,e.sessionId,()=>{},()=>{},this.analyticsManager);return n.setListener(e=>this.pendingGatewaysListener(n,t.bridgeUrl,e)),n});const n=Math.max(this.pendingGateways.length-this.optionalOpenGateways,1);return void(yield function(e,t){return Z(this,0,void 0,function*(){if(t<=0)return[];if(t>e.length)throw new RangeError("count cannot be greater than the number of promises");const n=new Array(e.length);let r=0;return new Promise(i=>{e.forEach((e,s)=>{Promise.resolve(e).then(e=>({status:"fulfilled",value:e})).catch(e=>({status:"rejected",reason:e})).then(e=>{n[s]=e,r++,r===t&&i(n)})})})})}(this.pendingGateways.map(e=>Te(n=>{var i;return this.pendingGateways.some(t=>t===e)?e.registerSession({openingDeadlineMS:null!==(i=null==t?void 0:t.openingDeadlineMS)&&void 0!==i?i:this.defaultOpeningDeadlineMS,signal:n.signal,traceId:r}):e.close()},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:null==t?void 0:t.signal})),n))}return this.gateway&&(Re("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new Ne(this.connectionStorage.storage,this.walletConnectionSource.bridgeUrl,e.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this),this.analyticsManager),yield this.gateway.registerSession({openingDeadlineMS:null==t?void 0:t.openingDeadlineMS,signal:null==t?void 0:t.signal,traceId:r})})}closeGateways(e){var t;null===(t=this.gateway)||void 0===t||t.close(),this.pendingGateways.filter(t=>t!==(null==e?void 0:e.except)).forEach(e=>e.close()),this.pendingGateways=[]}}function Me(e,t){return Be(e,[t])}function Be(e,t){return!(!e||"object"!=typeof e)&&t.every(t=>t in e)}class We{static getInstance(){return We.instance||(We.instance=new We),We.instance}constructor(){this.storage={}}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){var t;return null!==(t=this.storage[e])&&void 0!==t?t:null}key(e){var t;const n=Object.keys(this.storage);return e<0||e>=n.length?null:null!==(t=n[e])&&void 0!==t?t:null}removeItem(e){delete this.storage[e]}setItem(e,t){this.storage[e]=t}}function ze(){if("undefined"!=typeof window)return window}function qe(){if("undefined"!=typeof document)return document}function Fe(){var e,t,n,r;const i=null===(t=null===(e=ze())||void 0===e?void 0:e.location)||void 0===t?void 0:t.origin,s=null===(r=null===(n=ze())||void 0===n?void 0:n.location)||void 0===r?void 0:r.pathname;return i&&s?i+s:""}function Ke(){if(function(){try{return"undefined"!=typeof localStorage}catch(e){return!1}}())return localStorage;if("undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node)throw new ee("`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector");return We.getInstance()}class He{static fromStorage(e,t){return Z(this,0,void 0,function*(){const n=yield e.getInjectedConnection();return new He(e,n.jsBridgeKey,t)})}static isWalletInjected(e){return He.isWindowContainsWallet(this.window,e)}static isInsideWalletBrowser(e){return!!He.isWindowContainsWallet(this.window,e)&&this.window[e].tonconnect.isWalletBrowser}static getCurrentlyInjectedWallets(){if(!this.window)return[];return function(){const e=ze();if(!e)return[];try{return Object.entries(e)}catch(t){return[]}}().filter(([e,t])=>function(e){try{return!(!Me(e,"tonconnect")||!Me(e.tonconnect,"walletInfo"))&&Be(e.tonconnect.walletInfo,["name","app_name","image","about_url","platforms"])}catch(t){return!1}}(t)).map(([e,t])=>({name:t.tonconnect.walletInfo.name,appName:t.tonconnect.walletInfo.app_name,aboutUrl:t.tonconnect.walletInfo.about_url,imageUrl:t.tonconnect.walletInfo.image,tondns:t.tonconnect.walletInfo.tondns,jsBridgeKey:e,injected:!0,embedded:t.tonconnect.isWalletBrowser,platforms:t.tonconnect.walletInfo.platforms,features:t.tonconnect.walletInfo.features}))}static isWindowContainsWallet(e,t){return!!e&&t in e&&"object"==typeof e[t]&&"tonconnect"in e[t]}constructor(e,t,n){this.connectionStorage=e,this.injectedWalletKey=t,this.type="injected",this.unsubscribeCallback=null,this.listenSubscriptions=!1,this.listeners=[];const r=He.window;if(!He.isWindowContainsWallet(r,t))throw new ae;this.injectedWallet=r[t].tonconnect,n&&(this.analytics=n.scoped({bridge_key:t,wallet_app_name:this.injectedWallet.deviceInfo.appName,wallet_app_version:this.injectedWallet.deviceInfo.appVersion}))}connect(e,t){this._connect(2,e,t)}restoreConnection(e){return Z(this,0,void 0,function*(){var t,n,r,i;const s=null!==(t=null==e?void 0:e.traceId)&&void 0!==t?t:De();try{Re("Injected Provider restoring connection..."),null===(n=this.analytics)||void 0===n||n.emitJsBridgeCall({js_bridge_method:"restoreConnection",trace_id:s});const e=yield this.injectedWallet.restoreConnection();null===(r=this.analytics)||void 0===r||r.emitJsBridgeResponse({js_bridge_method:"restoreConnection",trace_id:s}),Re("Injected Provider restoring connection response",e),"connect"===e.event?(this.makeSubscriptions({traceId:s}),this.listeners.forEach(t=>t(Object.assign(Object.assign({},e),{traceId:s})))):yield this.connectionStorage.removeConnection()}catch(tc){null===(i=this.analytics)||void 0===i||i.emitJsBridgeError({js_bridge_method:"restoreConnection",error_message:String(tc),trace_id:s}),yield this.connectionStorage.removeConnection(),console.error(tc)}})}closeConnection(){this.listenSubscriptions&&this.injectedWallet.disconnect(),this.closeAllListeners()}disconnect(e){return Z(this,0,void 0,function*(){var t;const n=null!==(t=null==e?void 0:e.traceId)&&void 0!==t?t:De();return new Promise(e=>{const t=()=>{this.closeAllListeners(),this.connectionStorage.removeConnection().then(e)};try{this.injectedWallet.disconnect(),t()}catch(tc){Re(tc),this.sendRequest({method:"disconnect",params:[]},{onRequestSent:t,traceId:n})}})})}closeAllListeners(){var e;this.listenSubscriptions=!1,this.listeners=[],null===(e=this.unsubscribeCallback)||void 0===e||e.call(this)}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(t=>t!==e)}sendRequest(e,t){return Z(this,0,void 0,function*(){var n,r,i;const s={};"function"==typeof t?(s.onRequestSent=t,s.traceId=De()):(s.onRequestSent=null==t?void 0:t.onRequestSent,s.signal=null==t?void 0:t.signal,s.attempts=null==t?void 0:t.attempts,s.traceId=null!==(n=null==t?void 0:t.traceId)&&void 0!==n?n:De());const a=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),Re("Send injected-bridge request:",Object.assign(Object.assign({},e),{id:a})),null===(r=this.analytics)||void 0===r||r.emitJsBridgeCall({js_bridge_method:"send"});const o=this.injectedWallet.send(Object.assign(Object.assign({},e),{id:a}));return o.then(e=>{var t;null===(t=this.analytics)||void 0===t||t.emitJsBridgeResponse({js_bridge_method:"send"}),Re("Wallet message received:",e)}).catch(e=>{var t;null===(t=this.analytics)||void 0===t||t.emitJsBridgeError({js_bridge_method:"send",error_message:String(e)})}),null===(i=null==s?void 0:s.onRequestSent)||void 0===i||i.call(s),o})}_connect(e,t,n){return Z(this,0,void 0,function*(){var r,i,s,a;const o=null!==(r=null==n?void 0:n.traceId)&&void 0!==r?r:De();try{Re(`Injected Provider connect request: protocolVersion: ${e}, message:`,t),null===(i=this.analytics)||void 0===i||i.emitJsBridgeCall({js_bridge_method:"connect",trace_id:o});const n=yield this.injectedWallet.connect(e,t);null===(s=this.analytics)||void 0===s||s.emitJsBridgeResponse({js_bridge_method:"connect"}),Re("Injected Provider connect response:",n),"connect"===n.event&&(yield this.updateSession(),this.makeSubscriptions({traceId:o})),this.listeners.forEach(e=>e(Object.assign(Object.assign({},n),{traceId:o})))}catch(tc){null===(a=this.analytics)||void 0===a||a.emitJsBridgeError({js_bridge_method:"connect",error_message:String(tc),trace_id:o}),Re("Injected Provider connect error:",tc);const t={event:"connect_error",payload:{code:0,message:null==tc?void 0:tc.toString()}};this.listeners.forEach(e=>e(Object.assign(Object.assign({},t),{traceId:o})))}})}makeSubscriptions(e){var t,n,r;this.listenSubscriptions=!0,null===(t=this.analytics)||void 0===t||t.emitJsBridgeCall({js_bridge_method:"listen",trace_id:e.traceId});try{this.unsubscribeCallback=this.injectedWallet.listen(e=>{var t;const n=null!==(t=e.traceId)&&void 0!==t?t:De();Re("Wallet message received:",e),this.listenSubscriptions&&this.listeners.forEach(t=>t(Object.assign(Object.assign({},e),{traceId:n}))),"disconnect"===e.event&&this.disconnect({traceId:n})}),null===(n=this.analytics)||void 0===n||n.emitJsBridgeResponse({js_bridge_method:"listen",trace_id:e.traceId})}catch(i){throw null===(r=this.analytics)||void 0===r||r.emitJsBridgeError({js_bridge_method:"listen",error_message:String(i),trace_id:e.traceId}),i}}updateSession(){return this.connectionStorage.storeConnection({type:"injected",jsBridgeKey:this.injectedWalletKey,nextRpcRequestId:0})}}He.window=ze();class Ve{constructor(e,t){this.storage=e,this.walletsListManager=t,this.storeKey="ton-connect-storage_bridge-connection"}storeConnection(e){return Z(this,0,void 0,function*(){if("injected"===e.type||"wallet-connect"===e.type)return this.storage.setItem(this.storeKey,JSON.stringify(e));if(!Pe(e)){const t={sessionKeyPair:e.session.sessionCrypto.stringifyKeypair(),walletPublicKey:e.session.walletPublicKey,bridgeUrl:e.session.bridgeUrl},n={type:"http",connectEvent:e.connectEvent,session:t,lastWalletEventId:e.lastWalletEventId,nextRpcRequestId:e.nextRpcRequestId};return this.storage.setItem(this.storeKey,JSON.stringify(n))}const t={type:"http",connectionSource:e.connectionSource,sessionCrypto:e.sessionCrypto.stringifyKeypair(),createdAt:Date.now()};return this.storage.setItem(this.storeKey,JSON.stringify(t))})}removeConnection(){return Z(this,0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getConnection(){return Z(this,0,void 0,function*(){try{const e=yield this.storage.getItem(this.storeKey);if(!e)return null;const t=JSON.parse(e);if("injected"===t.type||"wallet-connect"===t.type)return t;if(!function(e){return!("connectEvent"in e)}(t)){const e=new Q(t.session.sessionKeyPair);return yield this.actualizeBridgeConnection({type:"http",connectEvent:t.connectEvent,lastWalletEventId:t.lastWalletEventId,nextRpcRequestId:t.nextRpcRequestId,session:{sessionCrypto:e,bridgeUrl:t.session.bridgeUrl,walletPublicKey:t.session.walletPublicKey}})}return function(e){var t;return Date.now()-(null!==(t=e.createdAt)&&void 0!==t?t:0)>3e5}(t)?(yield this.removeConnection(),null):{type:"http",sessionCrypto:new Q(t.sessionCrypto),connectionSource:t.connectionSource}}catch(e){return Re("Error retrieving connection",e),null}})}getHttpConnection(){return Z(this,0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new ee("Trying to read HTTP connection source while nothing is stored");if("http"!==e.type)throw new ee(`Trying to read HTTP connection source while ${e.type} connection is stored`);return e})}getHttpPendingConnection(){return Z(this,0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new ee("Trying to read HTTP connection source while nothing is stored");if("http"!==e.type)throw new ee(`Trying to read HTTP connection source while ${e.type} connection is stored`);if(!Pe(e))throw new ee("Trying to read HTTP-pending connection while http connection is stored");return e})}getInjectedConnection(){return Z(this,0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new ee("Trying to read Injected bridge connection source while nothing is stored");if("injected"!==(null==e?void 0:e.type))throw new ee(`Trying to read Injected bridge connection source while ${e.type} connection is stored`);return e})}getWalletConnectConnection(){return Z(this,0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new ee("Trying to read wallet connect bridge connection source while nothing is stored");if("wallet-connect"!==(null==e?void 0:e.type))throw new ee(`Trying to read wallet connect bridge connection source while ${e.type} connection is stored`);return e})}storedConnectionType(){return Z(this,0,void 0,function*(){const e=yield this.storage.getItem(this.storeKey);if(!e)return null;return JSON.parse(e).type})}storeLastWalletEventId(e){return Z(this,0,void 0,function*(){const t=yield this.getConnection();if(t&&"http"===t.type&&!Pe(t))return t.lastWalletEventId=e,this.storeConnection(t)})}getLastWalletEventId(){return Z(this,0,void 0,function*(){const e=yield this.getConnection();if(e&&"lastWalletEventId"in e)return e.lastWalletEventId})}increaseNextRpcRequestId(){return Z(this,0,void 0,function*(){const e=yield this.getConnection();if(e&&"nextRpcRequestId"in e){const t=e.nextRpcRequestId||0;return e.nextRpcRequestId=t+1,this.storeConnection(e)}})}getNextRpcRequestId(){return Z(this,0,void 0,function*(){const e=yield this.getConnection();return e&&"nextRpcRequestId"in e&&e.nextRpcRequestId||0})}actualizeBridgeConnection(e){return Z(this,0,void 0,function*(){try{const t=e.connectEvent.payload.device.appName,n=yield this.walletsListManager.getRemoteWallet(t);if(n.bridgeUrl===e.session.bridgeUrl)return e;const r=Object.assign(Object.assign({},e),{session:Object.assign(Object.assign({},e.session),{bridgeUrl:n.bridgeUrl})});return yield this.storeConnection(r),r}catch(t){return Re("Failed to actualize bridge connection",t),e}})}}class Ge{constructor(){this.localStorage=Ke()}getItem(e){return Z(this,0,void 0,function*(){return this.localStorage.getItem(e)})}removeItem(e){return Z(this,0,void 0,function*(){this.localStorage.removeItem(e)})}setItem(e,t){return Z(this,0,void 0,function*(){this.localStorage.setItem(e,t)})}}function Je(e){return function(e){return function(e){return"jsBridgeKey"in e}(e)&&e.injected}(e)&&e.embedded}const Ye=[{app_name:"telegram-wallet",name:"Wallet",image:"https://wallet.tg/images/logo-288.png",about_url:"https://wallet.tg/",universal_url:"https://t.me/wallet?attach=wallet",bridge:[{type:"sse",url:"https://walletbot.me/tonconnect-bridge/bridge"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!0},{name:"SignData",types:["text","binary","cell"]}]},{app_name:"tonkeeper",name:"Tonkeeper",image:"https://tonkeeper.com/assets/tonconnect-icon.png",tondns:"tonkeeper.ton",about_url:"https://tonkeeper.com",universal_url:"https://app.tonkeeper.com/ton-connect",deepLink:"tonkeeper-tc://",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"},{type:"js",key:"tonkeeper"}],platforms:["ios","android","chrome","firefox","macos"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!0},{name:"SignData",types:["text","binary","cell"]}]},{app_name:"mytonwallet",name:"MyTonWallet",image:"https://static.mytonwallet.io/icon-256.png",about_url:"https://mytonwallet.io",universal_url:"https://connect.mytonwallet.org",deepLink:"mytonwallet-tc://",bridge:[{type:"js",key:"mytonwallet"},{type:"sse",url:"https://tonconnectbridge.mytonwallet.org/bridge/"}],platforms:["chrome","windows","macos","linux","ios","android","firefox"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!1},{name:"SignData",types:["text","binary","cell"]}]},{app_name:"tonhub",name:"Tonhub",image:"https://tonhub.com/tonconnect_logo.png",about_url:"https://tonhub.com",universal_url:"https://tonhub.com/ton-connect",bridge:[{type:"js",key:"tonhub"},{type:"sse",url:"https://connect.tonhubapi.com/tonconnect"}],platforms:["ios","android"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!0},{name:"SignData",types:["text","binary","cell"]}]},{app_name:"bitgetTonWallet",name:"Bitget Wallet",image:"https://raw.githubusercontent.com/bitgetwallet/download/refs/heads/main/logo/png/bitget_wallet_logo_288_mini.png",about_url:"https://web3.bitget.com",deepLink:"bitkeep://",bridge:[{type:"js",key:"bitgetTonWallet"},{type:"sse",url:"https://ton-connect-bridge.bgwapi.io/bridge"}],platforms:["ios","android","chrome"],universal_url:"https://bkcode.vip/ton-connect",features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"okxMiniWallet",name:"OKX Mini Wallet",image:"https://static.okx.com/cdn/assets/imgs/2411/8BE1A4A434D8F58A.png",about_url:"https://www.okx.com/web3",universal_url:"https://t.me/OKX_WALLET_BOT?attach=wallet",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"binanceWeb3TonWallet",name:"Binance Wallet",image:"https://public.bnbstatic.com/static/binance-w3w/ton-provider/binancew3w.png",about_url:"https://www.binance.com/en/web3wallet",deepLink:"bnc://app.binance.com/cedefi/ton-connect",bridge:[{type:"js",key:"binancew3w"},{type:"sse",url:"https://wallet.binance.com/tonbridge/bridge"}],platforms:["ios","android","macos","windows","linux"],universal_url:"https://app.binance.com/cedefi/ton-connect",features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"fintopio-tg",name:"Fintopio",image:"https://raw.githubusercontent.com/fintopio/ton-pub/refs/heads/main/logos/tonconnect-icon.png",about_url:"https://fintopio.com",universal_url:"https://t.me/fintopio?attach=wallet",bridge:[{type:"sse",url:"https://wallet-bridge.fintopio.com/bridge"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"okxTonWallet",name:"OKX Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",universal_url:"https://www.okx.com/download?appendQuery=true&deeplink=okx://web3/wallet/tonconnect",bridge:[{type:"js",key:"okxTonWallet"},{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["chrome","safari","firefox","ios","android"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"hot",name:"HOT",image:"https://raw.githubusercontent.com/hot-dao/media/main/logo.png",about_url:"https://hot-labs.org/",universal_url:"https://t.me/herewalletbot?attach=wallet",bridge:[{type:"sse",url:"https://sse-bridge.hot-labs.org"},{type:"js",key:"hotWallet"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"bybitTonWallet",name:"Bybit Wallet",image:"https://raw.githubusercontent.com/bybit-web3/bybit-web3.github.io/main/docs/images/bybit-logo.png",about_url:"https://www.bybit.com/web3",universal_url:"https://app.bybit.com/ton-connect",deepLink:"bybitapp://",bridge:[{type:"js",key:"bybitTonWallet"},{type:"sse",url:"https://api-node.bybit.com/spot/api/web3/bridge/ton/bridge"}],platforms:["ios","android","chrome"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"dewallet",name:"DeWallet",image:"https://raw.githubusercontent.com/delab-team/manifests-images/main/WalletAvatar.png",about_url:"https://delabwallet.com",universal_url:"https://t.me/dewallet?attach=wallet",bridge:[{type:"sse",url:"https://bridge.dewallet.pro/bridge"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"safepalwallet",name:"SafePal",image:"https://s.pvcliping.com/web/public_image/SafePal_x288.png",tondns:"",about_url:"https://www.safepal.com",universal_url:"https://link.safepal.io/ton-connect",deepLink:"safepal-tc://",bridge:[{type:"sse",url:"https://ton-bridge.safepal.com/tonbridge/v1/bridge"},{type:"js",key:"safepalwallet"}],platforms:["ios","android","chrome","firefox"],features:[{name:"SendTransaction",maxMessages:1,extraCurrencySupported:!1}]},{app_name:"GateWallet",name:"GateWallet",image:"https://img.gatedataimg.com/prd-ordinal-imgs/036f07bb8730716e/gateio-0925.png",about_url:"https://www.gate.io/",bridge:[{type:"js",key:"gatetonwallet"},{type:"sse",url:"https://dapp.gateio.services/tonbridge_api/bridge/v1"}],platforms:["ios","android"],universal_url:"https://gate.onelink.me/Hls0/web3?gate_web3_wallet_universal_type=ton_connect",features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"openmask",name:"OpenMask",image:"https://raw.githubusercontent.com/OpenProduct/openmask-extension/main/public/openmask-logo-288.png",about_url:"https://www.openmask.app/",bridge:[{type:"js",key:"openmask"}],platforms:["chrome"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"BitgetWeb3",name:"BitgetWeb3",image:"https://img.bitgetimg.com/image/third/1731638059795.png",about_url:"https://www.bitget.com",universal_url:"https://t.me/BitgetOfficialBot?attach=wallet",bridge:[{type:"sse",url:"https://ton-connect-bridge.bgwapi.io/bridge"}],platforms:["ios","android","windows","macos","linux"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"xtonwallet",name:"XTONWallet",image:"https://xtonwallet.com/assets/img/icon-256-back.png",about_url:"https://xtonwallet.com",bridge:[{type:"js",key:"xtonwallet"}],platforms:["chrome","firefox"],features:[{name:"SendTransaction",maxMessages:1,extraCurrencySupported:!1}]},{app_name:"tonwallet",name:"TON Wallet",image:"https://wallet.ton.org/assets/ui/qr-logo.png",about_url:"https://chrome.google.com/webstore/detail/ton-wallet/nphplpgoakhhjchkkhmiggakijnkhfnd",bridge:[{type:"js",key:"tonwallet"}],platforms:["chrome"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"bitgetWalletLite",name:"Bitget Wallet Lite",image:"https://raw.githubusercontent.com/bitgetwallet/download/refs/heads/main/logo/png/bitget_wallet_lite_logo_288.png",about_url:"https://web3.bitget.com",universal_url:"https://t.me/BitgetWallet_TGBot?attach=wallet",bridge:[{type:"sse",url:"https://ton-connect-bridge.bgwapi.io/bridge"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!1}]},{app_name:"tomoWallet",name:"Tomo Wallet",image:"https://pub.tomo.inc/logo.png",about_url:"https://www.tomo.inc/",universal_url:"https://t.me/tomowalletbot?attach=wallet",bridge:[{type:"sse",url:"https://go-bridge.tomo.inc/bridge"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"miraiapp-tg",name:"Mirai Mini App",image:"https://cdn.mirailabs.co/miraihub/miraiapp-tg-icon-288.png",about_url:"https://mirai.app",universal_url:"https://t.me/MiraiAppBot?attach=wallet",bridge:[{type:"sse",url:"https://bridge.mirai.app"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!1},{name:"SignData",types:["text","binary","cell"]}]},{app_name:"Architec.ton",name:"Architec.ton",image:"https://raw.githubusercontent.com/Architec-Ton/wallet-tma/refs/heads/dev/public/images/arcwallet_logo.png",about_url:"https://architecton.tech",universal_url:"https://t.me/architec_ton_bot?attach=wallet",bridge:[{type:"sse",url:"https://tc.architecton.su/bridge"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!1}]},{app_name:"tokenpocket",name:"TokenPocket",image:"https://hk.tpstatic.net/logo/tokenpocket.png",about_url:"https://www.tokenpocket.pro",universal_url:"https://tp-lab.tptool.pro/ton-connect/",bridge:[{type:"js",key:"tokenpocket"},{type:"sse",url:"https://ton-connect.mytokenpocket.vip/bridge"}],platforms:["ios","android"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"uxuyWallet",name:"UXUY Wallet",image:"https://chain-cdn.uxuy.com/logo/square_288.png",about_url:"https://docs.uxuy.com",universal_url:"https://t.me/UXUYbot?attach=wallet",bridge:[{type:"sse",url:"https://bridge.uxuy.me/bridge"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"tonkeeper-pro",name:"Tonkeeper Pro",image:"https://tonkeeper.com/assets/tonconnect-icon-pro.png",tondns:"tonkeeper.ton",about_url:"https://tonkeeper.com/pro",universal_url:"https://app.tonkeeper.com/pro/ton-connect",deepLink:"tonkeeper-pro-tc://",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"}],platforms:["ios","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!0},{name:"SignData",types:["text","binary","cell"]}]},{app_name:"nicegramWallet",name:"Nicegram Wallet",image:"https://static.nicegram.app/icon.png",about_url:"https://nicegram.app",universal_url:"https://nicegram.app/tc",deepLink:"nicegram-tc://",bridge:[{type:"sse",url:"https://tc.nicegram.app/bridge"},{type:"js",key:"nicegramWallet"}],platforms:["ios","android"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!1}]},{app_name:"echoooTonWallet",name:"EchoooWallet",image:"https://cdn.echooo.xyz/front-end/source/images/logo/echooo-ton.png",about_url:"https://www.echooo.xyz",universal_url:"https://www.echooo.xyz/ton-connect",deepLink:"echooo://",bridge:[{type:"js",key:"echoooTonWallet"},{type:"sse",url:"https://ton-connect-bridge.echooo.link/bridge"}],platforms:["ios","android"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!1}]},{app_name:"blitzwallet",name:"BLITZ wallet",image:"https://blitzwallet.cfd/wallet/public/logo.png",about_url:"https://blitzwallet.cfd",universal_url:"https://t.me/blitz_wallet_bot?attach=wallet",bridge:[{type:"sse",url:"https://blitzwallet.cfd/bridge/"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]},{app_name:"koloWeb3Wallet",name:"Kolo",image:"https://raw.githubusercontent.com/onidev1/tc-assets/refs/heads/main/kolo_logo_288.png",about_url:"https://kolo.xyz",universal_url:"https://t.me/kolo?attach=wallet",bridge:[{type:"sse",url:"https://web3-bridge.kolo.in/bridge"}],platforms:["ios","android","macos","windows","linux"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!1}]},{app_name:"imToken",name:"imToken",image:"https://aws-v2-cdn.token.im/orbit/token-v2/icons/logo-ton-connect.png",about_url:"https://token.im",universal_url:"https://connect.token.im/link/ton-connect",deepLink:"imtokenv2://link/ton-connect",bridge:[{type:"sse",url:"https://connect.token.im/tonbridge"},{type:"js",key:"imToken"}],platforms:["ios","android"],features:[{name:"SendTransaction",maxMessages:255,extraCurrencySupported:!1}]},{app_name:"cactuslink",name:"Cactus Link",image:"https://downloads.mycactus.com/288_cactus_link.png",about_url:"https://www.mycactus.com/defi-connector",bridge:[{type:"js",key:"cactuslink_ton"}],platforms:["chrome"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1},{name:"SignData",types:["text","binary"]}]},{app_name:"onekey",name:"OneKey",image:"https://uni.onekey-asset.com/static/logo/onekey-x288.png",about_url:"https://onekey.so",bridge:[{type:"js",key:"onekeyTonWallet"}],platforms:["chrome"],features:[{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}]}];class Qe{constructor(e){var t;this.walletsListDTOCache=null,this.walletsListDTOCacheCreationTimestamp=null,this.walletsListSource=null!==(t=null==e?void 0:e.walletsListSource)&&void 0!==t?t:"https://config.ton.org/wallets-v2.json",this.cacheTTLMs=null==e?void 0:e.cacheTTLMs,this.onDownloadDurationMeasured=null==e?void 0:e.onDownloadDurationMeasured}getWallets(){return Z(this,0,void 0,function*(){const[e,t]=yield Promise.all([this.fetchWalletsListDTO(),this.getCurrentlyInjectedWallets()]);return this.mergeWalletsLists(this.walletConfigDTOListToWalletConfigList(e),t)})}getEmbeddedWallet(){return Z(this,0,void 0,function*(){const e=(yield this.getWallets()).filter(Je);return 1===e.length?e[0]:null})}fetchWalletsListDTO(){return Z(this,0,void 0,function*(){return this.cacheTTLMs&&this.walletsListDTOCacheCreationTimestamp&&Date.now()>this.walletsListDTOCacheCreationTimestamp+this.cacheTTLMs&&(this.walletsListDTOCache=null),this.walletsListDTOCache||(this.walletsListDTOCache=this.fetchWalletsListFromSource(),this.walletsListDTOCache.then(()=>{this.walletsListDTOCacheCreationTimestamp=Date.now()}).catch(()=>{this.walletsListDTOCache=null,this.walletsListDTOCacheCreationTimestamp=null})),this.walletsListDTOCache})}getRemoteWallet(e){return Z(this,0,void 0,function*(){const t=(yield this.getWallets()).find(t=>t.appName===e);if(!t)throw new ee(`Wallet info not found for appName: "${e}"`);if(!("bridgeUrl"in t))throw new ee(`Wallet "${e}" is not remote`);return t})}fetchWalletsListFromSource(){return Z(this,0,void 0,function*(){var e,t;let n=[];const r=performance.now();try{const t=yield fetch(this.walletsListSource);if(n=yield t.json(),!Array.isArray(n))throw new fe("Wrong wallets list format, wallets list must be an array.");const i=n.filter(e=>!this.isCorrectWalletConfigDTO(e));i.length&&(Oe(`Wallet(s) ${i.map(e=>(null==e?void 0:e.name)||"unknown").join(", ")} config format is wrong. They were removed from the wallets list.`),n=n.filter(e=>this.isCorrectWalletConfigDTO(e)));const s=performance.now(),a=Math.round(s-r);null===(e=this.onDownloadDurationMeasured)||void 0===e||e.call(this,a)}catch(tc){Oe(tc),n=Ye,null===(t=this.onDownloadDurationMeasured)||void 0===t||t.call(this,void 0)}return n})}getCurrentlyInjectedWallets(){return[]}walletConfigDTOListToWalletConfigList(e){return e.map(e=>{const t={name:e.name,appName:e.app_name,imageUrl:e.image,aboutUrl:e.about_url,tondns:e.tondns,platforms:e.platforms,features:e.features};return e.bridge.forEach(n=>{if("sse"===n.type&&(t.bridgeUrl=n.url,t.universalLink=e.universal_url,t.deepLink=e.deepLink),"js"===n.type){const e=n.key;t.jsBridgeKey=e,t.injected=He.isWalletInjected(e),t.embedded=He.isInsideWalletBrowser(e)}}),t})}mergeWalletsLists(e,t){return[...new Set(e.concat(t).map(e=>e.name)).values()].map(n=>{const r=e.find(e=>e.name===n),i=t.find(e=>e.name===n);return Object.assign(Object.assign({},r&&Object.assign({},r)),i&&Object.assign({},i))})}isCorrectWalletConfigDTO(e){if(!e||"object"!=typeof e)return!1;if(!("name"in e&&"image"in e&&"about_url"in e&&"platforms"in e&&"app_name"in e))return!1;if(!e.platforms||!Array.isArray(e.platforms)||!e.platforms.length)return!1;if(!("bridge"in e)||!Array.isArray(e.bridge)||!e.bridge.length)return!1;const t=e.bridge;if(t.some(e=>!e||"object"!=typeof e||!("type"in e)))return!1;const n=t.find(e=>"sse"===e.type);if(n&&("object"!=typeof n||!("url"in n)||!n.url||!e.universal_url))return!1;const r=t.find(e=>"js"===e.type);return!!(!r||"object"==typeof r&&"key"in r&&r.key)}}function Xe(e,t){const n=e.includes("SendTransaction"),r=et(e,"SendTransaction"),i={minMessages:t.requiredMessagesNumber,extraCurrencyRequired:t.requireExtraCurrencies};if(!n&&!r)throw new oe("Wallet doesn't support SendTransaction feature.",{cause:{requiredFeature:{featureName:"SendTransaction",value:i}}});if(t.requireExtraCurrencies&&(!r||!r.extraCurrencySupported))throw new oe("Wallet is not able to handle such SendTransaction request. Extra currencies support is required.",{cause:{requiredFeature:{featureName:"SendTransaction",value:i}}});if(r&&void 0!==r.maxMessages){if(r.maxMessages<t.requiredMessagesNumber)throw new oe(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${r.maxMessages}, but ${t.requiredMessagesNumber} is required.`,{cause:{requiredFeature:{featureName:"SendTransaction",value:i}}})}else!function(...e){try{console.warn("[TON_CONNECT_SDK]",...e)}catch(t){}}("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.")}function Ze(e,t){if("object"!=typeof t)return!0;const{sendTransaction:n,signData:r}=t;if(n){const t=et(e,"SendTransaction");if(!t)return!1;if(!function(e,t){const n=void 0===t.minMessages||t.minMessages<=e.maxMessages,r=!t.extraCurrencyRequired||e.extraCurrencySupported;return!(!n||!r)}(t,n))return!1}if(r){const t=et(e,"SignData");if(!t)return!1;if(!function(e,t){return t.types.every(t=>e.types.includes(t))}(t,r))return!1}return!0}function et(e,t){return e.find(e=>e&&"object"==typeof e&&e.name===t)}function tt(e){return{ton_connect_sdk_lib:e.ton_connect_sdk_lib,ton_connect_ui_lib:e.ton_connect_ui_lib}}function nt(e,t,n){var r,i,s,a,o,l,c,u,d,h,f;const p=(null===(r=null==t?void 0:t.connectItems)||void 0===r?void 0:r.tonProof)&&"proof"in t.connectItems.tonProof?"ton_proof":"ton_addr";return{wallet_address:null!==(s=null===(i=null==t?void 0:t.account)||void 0===i?void 0:i.address)&&void 0!==s?s:null,wallet_state_init:null!==(a=null==t?void 0:t.account.walletStateInit)&&void 0!==a?a:null,wallet_type:null!==(o=null==t?void 0:t.device.appName)&&void 0!==o?o:null,wallet_version:null!==(l=null==t?void 0:t.device.appVersion)&&void 0!==l?l:null,auth_type:p,custom_data:Object.assign({client_id:null!==(c=null==n?void 0:n.clientId)&&void 0!==c?c:null,wallet_id:null!==(u=null==n?void 0:n.walletId)&&void 0!==u?u:null,chain_id:null!==(h=null===(d=null==t?void 0:t.account)||void 0===d?void 0:d.chain)&&void 0!==h?h:null,provider:null!==(f=null==t?void 0:t.provider)&&void 0!==f?f:null},tt(e))}}function rt(e,t){var n,r,i,s;return{valid_until:null!==(n=String(t.validUntil))&&void 0!==n?n:null,from:null!==(s=null!==(r=t.from)&&void 0!==r?r:null===(i=null==e?void 0:e.account)||void 0===i?void 0:i.address)&&void 0!==s?s:null,messages:t.messages.map(e=>{var t,n;return{address:null!==(t=e.address)&&void 0!==t?t:null,amount:null!==(n=e.amount)&&void 0!==n?n:null}})}}function it(e,t,n,r,i,s,a){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:r,error_code:null!=i?i:null,trace_id:null!=a?a:null},nt(e,t,s)),function(e,t){var n,r,i,s;return{valid_until:null!==(n=String(t.validUntil))&&void 0!==n?n:null,from:null!==(s=null!==(r=t.from)&&void 0!==r?r:null===(i=null==e?void 0:e.account)||void 0===i?void 0:i.address)&&void 0!==s?s:null,messages:t.messages.map(e=>{var t,n,r,i;return{address:null!==(t=e.address)&&void 0!==t?t:null,amount:null!==(n=e.amount)&&void 0!==n?n:null,payload:null!==(r=e.payload)&&void 0!==r?r:null,state_init:null!==(i=e.stateInit)&&void 0!==i?i:null}})}}(t,n))}class st{get version(){return tt({ton_connect_sdk_lib:this.tonConnectSdkVersion,ton_connect_ui_lib:this.tonConnectUiVersion})}constructor(e){this.eventPrefix="ton-connect-",this.tonConnectUiVersion=null,this.eventDispatcher=null==e?void 0:e.eventDispatcher,this.tonConnectSdkVersion=e.tonConnectSdkVersion,this.init().catch()}init(){return Z(this,0,void 0,function*(){try{yield this.setRequestVersionHandler(),this.tonConnectUiVersion=yield this.requestTonConnectUiVersion()}catch(tc){}})}setRequestVersionHandler(){return Z(this,0,void 0,function*(){yield this.eventDispatcher.addEventListener("ton-connect-request-version",()=>Z(this,0,void 0,function*(){yield this.eventDispatcher.dispatchEvent("ton-connect-response-version",function(e){return{type:"response-version",version:e}}(this.tonConnectSdkVersion))}))})}requestTonConnectUiVersion(){return Z(this,0,void 0,function*(){return new Promise((e,t)=>Z(this,0,void 0,function*(){try{yield this.eventDispatcher.addEventListener("ton-connect-ui-response-version",t=>{e(t.detail.version)},{once:!0}),yield this.eventDispatcher.dispatchEvent("ton-connect-ui-request-version",{type:"request-version"})}catch(tc){t(tc)}}))})}dispatchUserActionEvent(e){try{this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${e.type}`,e).catch()}catch(tc){}}trackConnectionStarted(...e){try{const t=function(e,t){return{type:"connection-started",custom_data:tt(e),trace_id:null!=t?t:null}}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackConnectionCompleted(...e){try{const t=function(e,t,n,r){return Object.assign({type:"connection-completed",is_success:!0,trace_id:null!=r?r:null},nt(e,t,n))}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackConnectionError(...e){try{const t=function(e,t,n,r,i){var s,a;return{type:"connection-error",is_success:!1,error_message:t,error_code:null!=n?n:null,trace_id:null!=i?i:null,custom_data:Object.assign({client_id:null!==(s=null==r?void 0:r.clientId)&&void 0!==s?s:null,wallet_id:null!==(a=null==r?void 0:r.walletId)&&void 0!==a?a:null},tt(e))}}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackConnectionRestoringStarted(...e){try{const t=function(e,t){return{type:"connection-restoring-started",custom_data:tt(e),trace_id:null!=t?t:null}}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackConnectionRestoringCompleted(...e){try{const t=function(e,t,n,r){return Object.assign({type:"connection-restoring-completed",is_success:!0,trace_id:null!=r?r:null},nt(e,t,n))}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackConnectionRestoringError(...e){try{const t=function(e,t,n){return{type:"connection-restoring-error",is_success:!1,error_message:t,trace_id:null!=n?n:null,custom_data:tt(e)}}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackDisconnection(...e){try{const t=function(e,t,n,r,i){return Object.assign({type:"disconnection",scope:n,trace_id:null!=i?i:null},nt(e,t,r))}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackTransactionSentForSignature(...e){try{const t=function(e,t,n,r,i){return Object.assign(Object.assign({type:"transaction-sent-for-signature",trace_id:null!=i?i:null},nt(e,t,r)),rt(t,n))}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackTransactionSigned(...e){try{const t=function(e,t,n,r,i,s){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:r.boc,trace_id:null!=s?s:null},nt(e,t,i)),rt(t,n))}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackTransactionSigningFailed(...e){try{const t=it(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackDataSentForSignature(...e){try{const t=function(e,t,n,r,i){return Object.assign({type:"sign-data-request-initiated",data:n,trace_id:null!=i?i:null},nt(e,t,r))}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackDataSigned(...e){try{const t=function(e,t,n,r,i,s){return Object.assign({type:"sign-data-request-completed",is_success:!0,data:n,signed_data:r,trace_id:null!=s?s:null},nt(e,t,i))}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}trackDataSigningFailed(...e){try{const t=function(e,t,n,r,i,s,a){return Object.assign({type:"sign-data-request-failed",is_success:!1,data:n,error_message:r,error_code:null!=i?i:null,trace_id:null!=a?a:null},nt(e,t,s))}(this.version,...e);this.dispatchUserActionEvent(t)}catch(tc){}}}const at="3.4.1";function ot(e){try{return ct(e),!0}catch(t){return!1}}function lt(e){try{return function(e){if(!e.includes(":"))throw new pe(`Wrong address ${e}. Address must include ":".`);const t=e.split(":");if(2!==t.length)throw new pe(`Wrong address ${e}. Address must include ":" only once.`);const n=parseInt(t[0]);if(0!==n&&-1!==n)throw new pe(`Wrong address ${e}. WC must be eq 0 or -1, but ${n} received.`);const r=t[1];if(64!==(null==r?void 0:r.length))throw new pe(`Wrong address ${e}. Hex part must be 64bytes length, but ${null==r?void 0:r.length} received.`);dt(r)}(e),!0}catch(t){return!1}}function ct(e){const t=e.replace(/-/g,"+").replace(/_/g,"/");let n;try{n=G.decode(t).toUint8Array()}catch(d){throw new pe(`Invalid base64 encoding in address: ${e}`)}if(36!==n.length)throw new pe(`Invalid address length: ${e}`);const r=n.slice(0,34),i=n.slice(34,36),s=function(e){const t=4129;let n=0;const r=new Uint8Array(e.length+2);r.set(e);for(let i of r){let e=128;for(;e>0;)n<<=1,i&e&&(n+=1),e>>=1,n>65535&&(n&=65535,n^=t)}return new Uint8Array([Math.floor(n/256),n%256])}(r);if(!i.every((e,t)=>e===s[t]))throw new pe(`Invalid checksum in address: ${e}`);let a=r[0],o=!1,l=!1;if(128&a&&(o=!0,a^=128),17!==a&&81!==a)throw new pe(`Unknown address tag: ${a}`);l=17===a;let c=null;c=255===r[1]?-1:r[1];const u=r.slice(2);if(0!==c&&-1!==c)throw new pe(`Invalid workchain: ${c}`);return{wc:c,hex:Array.from(u).map(e=>e.toString(16).padStart(2,"0")).join(""),testOnly:o,isBounceable:l}}const ut={};for(let fc=0;fc<=255;fc++){let e=fc.toString(16);e.length<2&&(e="0"+e),ut[e]=fc}function dt(e){const t=(e=e.toLowerCase()).length;if(t%2!=0)throw new me("Hex string must have length a multiple of 2: "+e);const n=t/2,r=new Uint8Array(n);for(let i=0;i<n;i++){const t=2*i,n=e.substring(t,t+2);if(!ut.hasOwnProperty(n))throw new me("Invalid hex character: "+n);r[i]=ut[n]}return r}const ht=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,ft=/^[A-Za-z0-9\-_]+$/,pt=/^-?\d+$/,mt=/^\d+$/;function gt(e){return"number"==typeof e&&!isNaN(e)}function yt(e){return"string"==typeof e&&e.length>0}function vt(e){return yt(e)&&(lt(e)||ot(e))}function bt(e){return yt(e)&&/^-?\d+$/.test(e)}function wt(e){return"string"==typeof e&&(ht.test(e)||ft.test(e))&&e.startsWith("te6cc")}function _t(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function St(e,t){return Object.keys(e).some(e=>!t.includes(e))}function xt(e){if(!_t(e))return"Request must be an object";if(St(e,["validUntil","network","from","messages"]))return"Request contains extra properties";if(e.validUntil){if(!gt(e.validUntil))return"Incorrect 'validUntil'";const t=Math.floor(Date.now()/1e3),n=t+300;e.validUntil>n&&console.warn(`validUntil (${e.validUntil}) is more than 5 minutes from now (${t})`)}if(void 0!==e.network&&!bt(e.network))return"Invalid 'network' format";if(void 0!==e.from&&!vt(e.from))return"Invalid 'from' address format";if(t=e.messages,!Array.isArray(t)||0===e.messages.length)return"'messages' is required";var t;for(let n=0;n<e.messages.length;n++){const t=kt(e.messages[n],n);if(t)return t}return null}function kt(e,t){if(!_t(e))return`Message at index ${t} must be an object`;if(St(e,["address","amount","stateInit","payload","extraCurrency"]))return`Message at index ${t} contains extra properties`;if(!yt(e.address))return`'address' is required in message at index ${t}`;if(!ot(e.address))return`Wrong 'address' format in message at index ${t}`;if(!yt(e.amount))return`'amount' is required in message at index ${t}`;if(!/^[0-9]+$/.test(e.amount))return`Incorrect 'amount' in message at index ${t}`;if(!(void 0===e.stateInit||yt(e.stateInit)&&wt(e.stateInit)))return`Invalid 'stateInit' in message at index ${t}`;if(!(void 0===e.payload||yt(e.payload)&&wt(e.payload)))return`Invalid 'payload' in message at index ${t}`;if(void 0!==e.extraCurrency){if(!_t(e.extraCurrency))return`Invalid 'extraCurrency' in message at index ${t}`;for(const[n,r]of Object.entries(e.extraCurrency))if(!pt.test(n)||"string"!=typeof r||!mt.test(r))return`Invalid 'extraCurrency' format in message at index ${t}`}return null}function Et(e){if(!_t(e))return"Request must be an object";if(St(e,["tonProof"]))return"Request contains extra properties";if(void 0!==e.tonProof){if("string"!=typeof e.tonProof)return"Invalid 'tonProof'";const t=e.tonProof;if(0===t.length)return"Empty 'tonProof' payload";const n=function(){try{return"undefined"!=typeof window&&window.location?window.location.hostname:null}catch(e){return null}}();if(!n)return null;const r=(new TextEncoder).encode(n).length;if(r>128)return"Current domain exceeds 128 bytes limit";const i=(new TextEncoder).encode(t).length;if(i>128)return"'tonProof' payload exceeds 128 bytes limit";if(r+i>222)return"'tonProof' domain + payload exceeds 222 bytes limit"}return null}function Ct(e){if(!_t(e))return"Payload must be an object";if(!yt(e.type))return"'type' is required";switch(e.type){case"text":return function(e){if(St(e,["type","text","network","from"]))return"Text payload contains extra properties";if(!yt(e.text))return"'text' is required";if(void 0!==e.network&&!bt(e.network))return"Invalid 'network' format";if(void 0!==e.from&&!vt(e.from))return"Invalid 'from'";return null}(e);case"binary":return function(e){if(St(e,["type","bytes","network","from"]))return"Binary payload contains extra properties";if(!yt(e.bytes))return"'bytes' is required";if(void 0!==e.network&&!bt(e.network))return"Invalid 'network' format";if(void 0!==e.from&&!vt(e.from))return"Invalid 'from'";return null}(e);case"cell":return function(e){if(St(e,["type","schema","cell","network","from"]))return"Cell payload contains extra properties";if(!yt(e.schema))return"'schema' is required";if(!yt(e.cell))return"'cell' is required";if(!wt(e.cell))return"Invalid 'cell' format (must be valid base64)";if(void 0!==e.network&&!bt(e.network))return"Invalid 'network' format";if(void 0!==e.from&&!vt(e.from))return"Invalid 'from'";return null}(e);default:return"Invalid 'type' value"}}function jt(e){if("string"!=typeof e)return;const t=e.length+(4-e.length%4)%4;return e.replace(/-/g,"+").replace(/_/g,"/").padEnd(t,"=")}class Tt{constructor(e={}){var t,n,r,i,s,a;this.events=[],this.timeoutId=null,this.isProcessing=!1,this.backoff=1,this.shouldSend=!0,this.batchTimeoutMs=null!==(t=e.batchTimeoutMs)&&void 0!==t?t:2e3,this.currentBatchTimeoutMs=this.batchTimeoutMs,this.maxBatchSize=null!==(n=e.maxBatchSize)&&void 0!==n?n:100,this.analyticsUrl=null!==(r=e.analyticsUrl)&&void 0!==r?r:"https://analytics.ton.org/events",this.mode=null!==(i=e.mode)&&void 0!==i?i:"telemetry",this.baseEvent=Object.assign({subsystem:"dapp-sdk",version:at,client_environment:null===(a=null===(s=e.environment)||void 0===s?void 0:s.getClientEnvironment)||void 0===a?void 0:a.call(s)},function(){const e={};try{const t=performance.getEntriesByType("navigation");if(t.length>0){const n=t[0];n.responseStart&&n.requestStart&&(e.conn_ttfb=Math.round(n.responseStart-n.requestStart))}}catch(tc){}return e}()),this.addWindowFocusAndBlurSubscriptions()}scoped(e){return new Proxy(this,{get(t,n){const r=n.toString();if(r.startsWith("emit")){const n=r.replace("emit",""),i=n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();return function(n){const r=Object.fromEntries(Object.entries(null!=e?e:{}).map(([e,t])=>[e,"function"==typeof t?t():t]));return t.emit(Object.assign(Object.assign({event_name:i},r),n))}}return t[n]}})}emit(e){var t;if("off"===this.mode)return;const n=null!==(t=e.trace_id)&&void 0!==t?t:De(),r=function(){const e={};try{const t=navigator,n=t.connection||t.mozConnection||t.webkitConnection;n&&(void 0!==n.rtt&&(e.conn_rtt=n.rtt),n.effectiveType?e.conn_network_type=n.effectiveType:n.type&&(e.conn_network_type=n.type))}catch(tc){}return e}(),i=Object.assign(Object.assign(Object.assign(Object.assign({},this.baseEvent),r),e),{event_id:De(),client_timestamp:Math.floor(Date.now()/1e3),trace_id:n}),s="telemetry"===this.mode?this.filterFullModeFields(i):i;this.events.push(s),this.events.length>=this.maxBatchSize?this.flush():this.startTimeout()}startTimeout(){this.timeoutId||this.isProcessing||(this.timeoutId=setTimeout(()=>{this.flush()},this.currentBatchTimeoutMs))}flush(){return Z(this,0,void 0,function*(){if(this.isProcessing||0===this.events.length||!this.shouldSend)return;this.clearTimeout(),this.isProcessing=!0;const e=this.extractEventsToSend();try{yield this.processEventsBatch(e),Re("Analytics events sent successfully")}catch(t){this.restoreEvents(e),Oe("Failed to send analytics events:",t)}finally{this.isProcessing=!1,this.scheduleNextFlushIfNeeded()}})}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}extractEventsToSend(){const e=this.events.slice(0,this.maxBatchSize);return this.events=this.events.slice(this.maxBatchSize),e}processEventsBatch(e){return Z(this,0,void 0,function*(){Re("Sending analytics events...",e.length);try{const t=yield this.sendEvents(e);this.handleResponse(t)}catch(t){this.handleUnknownError(t)}})}handleResponse(e){const{status:t,statusText:n}=e;this.isTooManyRequests(t)?this.handleTooManyRequests(t,n):this.isClientError(t)?this.handleClientError(t,n):this.isServerError(t)&&this.handleUnknownError({status:t,statusText:n})}restoreEvents(e){this.events.unshift(...e)}scheduleNextFlushIfNeeded(){this.events.length>0&&this.startTimeout()}sendEvents(e){return Z(this,0,void 0,function*(){return yield fetch(this.analyticsUrl,{method:"POST",headers:{"Content-Type":"application/json","X-Client-Timestamp":Math.floor(Date.now()/1e3).toString()},body:JSON.stringify(e)})})}isClientError(e){return e>=Tt.HTTP_STATUS.CLIENT_ERROR_START&&e<Tt.HTTP_STATUS.SERVER_ERROR_START}isServerError(e){return e>=Tt.HTTP_STATUS.SERVER_ERROR_START}isTooManyRequests(e){return e===Tt.HTTP_STATUS.TOO_MANY_REQUESTS}handleClientError(e,t){Oe("Failed to send analytics events:",new ee(`Analytics API error: ${e} ${t}`))}handleUnknownError(e){if(this.backoff<Tt.MAX_BACKOFF_ATTEMPTS)throw this.backoff++,this.currentBatchTimeoutMs*=Tt.BACKOFF_MULTIPLIER,new ee(`Unknown analytics API error: ${e}`);return this.currentBatchTimeoutMs=this.batchTimeoutMs,void(this.backoff=1)}handleTooManyRequests(e,t){throw new ee(`Analytics API error: ${e} ${t}`)}addWindowFocusAndBlurSubscriptions(){const e=qe();if(e)try{e.addEventListener("visibilitychange",()=>{e.hidden?(this.clearTimeout(),this.shouldSend=!1):(this.shouldSend=!0,this.scheduleNextFlushIfNeeded())})}catch(tc){Oe("Cannot subscribe to the document.visibilitychange: ",tc)}}getMode(){return this.mode}getPendingEventsCount(){return this.events.length}filterFullModeFields(e){const t=Object.assign({},e);for(const r of Tt.FULL_MODE_FIELDS)delete t[r];const n="event_name"in e?String(e.event_name):"";return!("error_code"in e||"error_message"in e||n.includes("error")||"connection-error"===n||"transaction-signing-failed"===n||"sign-data-request-failed"===n)&&"wallet_address"in t&&delete t.wallet_address,t}setWalletListDownloadDuration(e){this.baseEvent=Object.assign(Object.assign({},this.baseEvent),{wallet_list_download_duration:e})}}Tt.HTTP_STATUS={TOO_MANY_REQUESTS:429,CLIENT_ERROR_START:400,SERVER_ERROR_START:500},Tt.MAX_BACKOFF_ATTEMPTS=5,Tt.BACKOFF_MULTIPLIER=2,Tt.FULL_MODE_FIELDS=["user_id","tg_id","locale","tma_is_premium"];class Rt{constructor(){this.window=ze()}dispatchEvent(e,t){return Z(this,0,void 0,function*(){var n;const r=new CustomEvent(e,{detail:t});null===(n=this.window)||void 0===n||n.dispatchEvent(r)})}addEventListener(e,t,n){return Z(this,0,void 0,function*(){var r;return null===(r=this.window)||void 0===r||r.addEventListener(e,t,n),()=>{var n;return null===(n=this.window)||void 0===n?void 0:n.removeEventListener(e,t)}})}}function Ot(e){return{"@tonconnect/sdk":e.ton_connect_sdk_lib||"","@tonconnect/ui":e.ton_connect_ui_lib||""}}function Nt(e){var t,n,r,i,s,a,o,l;return{versions:Ot(e.custom_data),network_id:null!==(t=e.custom_data.chain_id)&&void 0!==t?t:"",client_id:null!==(n=e.custom_data.client_id)&&void 0!==n?n:"",wallet_id:null!==(r=e.custom_data.wallet_id)&&void 0!==r?r:"",wallet_address:null!==(i=e.wallet_address)&&void 0!==i?i:"",wallet_app_name:null!==(s=e.wallet_type)&&void 0!==s?s:"",wallet_app_version:null!==(a=e.wallet_version)&&void 0!==a?a:"",wallet_state_init:null!==(o=e.wallet_state_init)&&void 0!==o?o:"",trace_id:null!==(l=e.trace_id)&&void 0!==l?l:void 0}}class Pt{getClientEnvironment(){return""}getBrowser(){return""}getLocale(){return""}getPlatform(){return""}getTelegramUser(){}}const It={};const At="0";class Lt{constructor(e){this.connectionStorage=e,this.type="injected",this.listeners=[],this.connector=void 0;const{projectId:t,metadata:n}=function(){if(void 0===It.walletConnectOptions)throw new ee("Wallet Connect is not initialized.");return It.walletConnectOptions}();this.config={networks:[{namespace:"ton",chains:[{id:-239,chainNamespace:"ton",caipNetworkId:"ton:-239",name:"TON",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:[]}}},{id:-3,chainNamespace:"ton",caipNetworkId:"ton:-3",name:"TON",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:[]}}}],methods:["ton_sendMessage","ton_signData"],events:[]}],projectId:t,metadata:n}}static fromStorage(e){return Z(this,0,void 0,function*(){return new Lt(e)})}initialize(){return Z(this,0,void 0,function*(){return this.connector||(this.connector=yield function(){if(void 0===It.UniversalConnectorCls)throw new ee("Wallet Connect is not initialized.");return It.UniversalConnectorCls}().init(this.config)),this.connector})}connect(e,t){var n,r;const i=null!==(n=null==t?void 0:t.traceId)&&void 0!==n?n:De(),s=je(null==t?void 0:t.signal);null===(r=this.abortController)||void 0===r||r.abort(),this.abortController=s,this._connect(e,{traceId:i,signal:s.signal,abortController:s}).catch(e=>Re("WalletConnect connect unexpected error",e))}_connect(e,t){return Z(this,0,void 0,function*(){var n,r;const i=yield this.initialize();if(null===(n=t.signal)||void 0===n?void 0:n.aborted)return Re("WalletConnect connect aborted before start"),void this.clearAbortController(t.abortController);const s=e.items.find(e=>"ton_proof"===e.name),a=s?[{domain:new URL(this.config.metadata.url).hostname,chains:["ton:-239"],nonce:"",uri:"ton_proof",ttl:0,statement:s.payload}]:void 0;Re("Connecting through this.connector.connect");try{yield i.connect({authentication:a})}catch(o){if(null===(r=t.signal)||void 0===r?void 0:r.aborted)return Re("WalletConnect connect aborted via signal"),void this.clearAbortController(t.abortController);Re("WalletConnect connect error",o);const e={id:0,event:"connect_error",traceId:t.traceId,payload:{code:z.USER_REJECTS_ERROR,message:"User declined the connection"}};return Re("WalletConnect connect response:",e),this.emit(e),void this.clearAbortController(t.abortController)}Re("Connected through this.connector.connect");try{yield this.onConnect(i,Object.assign(Object.assign({},t),{includeTonProof:!0}))}catch(o){Re("WalletConnect onConnect error",o),yield this.disconnect({traceId:t.traceId,signal:t.signal})}finally{this.clearAbortController(t.abortController)}})}restoreConnection(e){return Z(this,0,void 0,function*(){var t,n;const r=null!==(t=null==e?void 0:e.traceId)&&void 0!==t?t:De(),i=je(null==e?void 0:e.signal);if(null===(n=this.abortController)||void 0===n||n.abort(),this.abortController=i,!i.signal.aborted)try{Re("Restoring WalletConnect connection...");if(!(yield this.connectionStorage.getWalletConnectConnection())||i.signal.aborted)return;const e=yield this.initialize();if(i.signal.aborted)return;yield this.onConnect(e,{includeTonProof:!1,traceId:r,signal:i.signal}),Re("WalletConnect successfully restored.")}catch(s){Re("WalletConnect restore error",s),yield this.disconnect({traceId:r,signal:i.signal})}finally{this.clearAbortController(i)}})}closeConnection(){var e;null===(e=this.abortController)||void 0===e||e.abort(),this.abortController=void 0,this.disconnect()}disconnect(e){return Z(this,0,void 0,function*(){var t,n;const r=je(null==e?void 0:e.signal);if(null===(t=this.abortController)||void 0===t||t.abort(),this.abortController=r,!r.signal.aborted)try{if(yield this.connectionStorage.removeConnection(),r.signal.aborted)return;yield null===(n=this.connector)||void 0===n?void 0:n.disconnect()}catch(i){Re("WalletConnect disconnect error",i)}finally{this.clearAbortController(r)}})}sendRequest(e,t){return Z(this,0,void 0,function*(){var n,r,i,s;if(!this.connector)throw new ee("Wallet Connect not initialized");const a={};"function"==typeof t?a.onRequestSent=t:(a.onRequestSent=null==t?void 0:t.onRequestSent,a.signal=null==t?void 0:t.signal,a.attempts=null==t?void 0:t.attempts,a.traceId=null==t?void 0:t.traceId),null!==(n=a.traceId)&&void 0!==n||(a.traceId=De());try{if(null===(r=a.signal)||void 0===r?void 0:r.aborted)throw new ee("WalletConnect request aborted");if(Re("Send wallet-connect request:",Object.assign(Object.assign({},e),{id:At})),"sendTransaction"===e.method){const t=JSON.parse(e.params[0]),{network:n}=t,r=X(t,["network"]),s=this.connector.request({method:"ton_sendMessage",params:r},`ton:${n}`);null===(i=null==a?void 0:a.onRequestSent)||void 0===i||i.call(a);const o=yield s;return Re("Wallet message received:",{result:o,id:At}),{result:o,id:At,traceId:a.traceId}}if("signData"===e.method){const t=JSON.parse(e.params[0]),{network:n}=t,r=X(t,["network"]),i=this.connector.request({method:"ton_signData",params:r},`ton:${n}`);null===(s=null==a?void 0:a.onRequestSent)||void 0===s||s.call(a);const o=yield i;return Re("Wallet message received:",{result:o,id:At}),{result:o,traceId:a.traceId,id:At}}if("disconnect"===e.method)return{id:At,traceId:a.traceId}}catch(o){Re("WalletConnect request error",o,o.stack);const e=yield this.handleWalletConnectError(o,{traceId:a.traceId});return Re("Wallet message received:",e),e}return{id:At,error:{code:H.UNKNOWN_ERROR,message:"Not implemented."},traceId:a.traceId}})}handleWalletConnectError(e,t){return Z(this,0,void 0,function*(){if("object"==typeof e&&null!==e){const n=String("message"in e?e.message:"msg"in e?e.msg:e);return n.toLowerCase().includes("reject")?{id:At,traceId:t.traceId,error:{code:F.USER_REJECTS_ERROR,message:n}}:n.toLowerCase().includes("tonvalidationerror")?{id:At,traceId:t.traceId,error:{code:F.BAD_REQUEST_ERROR,message:n}}:{id:At,traceId:t.traceId,error:{code:F.UNKNOWN_ERROR,message:n}}}return{id:At,traceId:t.traceId,error:{code:F.UNKNOWN_ERROR,message:String(e)}}})}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(t=>t!==e)}buildTonProof(e){var t,n,r;const i=null===(t=e.provider.session.authentication)||void 0===t?void 0:t[0],s=null===(n=null==i?void 0:i.p)||void 0===n?void 0:n.iat,a=null===(r=null==i?void 0:i.p)||void 0===r?void 0:r.statement;if(!s||!a)return;const o=i.p.domain;return{name:"ton_proof",proof:{timestamp:Math.floor(new Date(s).getTime()/1e3),domain:{lengthBytes:o.length,value:o},payload:a,signature:i.s.s}}}onConnect(e,t){return Z(this,0,void 0,function*(){var n,r,i,s;if(null===(n=t.signal)||void 0===n?void 0:n.aborted)return void Re("WalletConnect onConnect aborted");const a=e.provider.session,o=a.namespaces.ton;if(!(null===(r=null==o?void 0:o.accounts)||void 0===r?void 0:r[0]))return void(yield this.disconnectWithError({traceId:t.traceId,code:z.BAD_REQUEST_ERROR,message:"Connection error. No TON accounts connected."}));const l=o.accounts[0],[,c,u]=l.split(":",3),d=null===(i=a.sessionProperties)||void 0===i?void 0:i.ton_getPublicKey;if(!d)return void(yield this.disconnectWithError({traceId:t.traceId,code:z.BAD_REQUEST_ERROR,message:"Connection error. No sessionProperties.ton_getPublicKey provided."}));const h=null===(s=a.sessionProperties)||void 0===s?void 0:s.ton_getStateInit;if(!h)return void(yield this.disconnectWithError({traceId:t.traceId,code:z.BAD_REQUEST_ERROR,message:"Connection error. No sessionProperties.ton_getStateInit provided."}));e.provider.once("session_delete",()=>Z(this,0,void 0,function*(){try{yield this.connectionStorage.removeConnection();const e={event:"disconnect",traceId:De(),payload:{}};Re("Wallet message received:",e),this.emit(e)}catch(e){Re("Error while deleting session",e)}}));const f=(null==t?void 0:t.includeTonProof)?this.buildTonProof(e):void 0,p={items:[{name:"ton_addr",address:ot(u)?function({wc:e,hex:t}){return`${e}:${t}`}(ct(u)):u,network:c,publicKey:d,walletStateInit:h},...f?[f]:[]],device:{appName:"wallet_connect",appVersion:"",maxProtocolVersion:2,features:this.buildFeatureList(o.methods),platform:"browser"}};Re("WalletConnect connect response:",{event:"connect",payload:p,id:0}),this.emit({event:"connect",payload:p,traceId:t.traceId}),yield this.storeConnection()})}buildFeatureList(e){const t=[];return e.includes("ton_sendMessage")&&t.push("SendTransaction",{name:"SendTransaction",maxMessages:4,extraCurrencySupported:!1}),e.includes("ton_signData")&&t.push({name:"SignData",types:["text","binary","cell"]}),t}disconnectWithError(e){return Z(this,0,void 0,function*(){yield this.disconnect();const t={code:e.code,message:e.message};Re("WalletConnect connect response:",{event:"connect_error",id:0,payload:t}),this.emit({event:"connect_error",traceId:e.traceId,payload:t})})}clearAbortController(e){this.abortController===e&&(this.abortController=void 0)}emit(e,t){(null!=t?t:this.listeners).forEach(t=>t(e))}storeConnection(){return this.connectionStorage.storeConnection({type:"wallet-connect"})}}class Ut{static getWallets(){return this.walletsList.getWallets()}get connected(){return null!==this._wallet}get account(){var e;return(null===(e=this._wallet)||void 0===e?void 0:e.account)||null}get wallet(){return this._wallet}set wallet(e){this._wallet=e,this.statusChangeSubscriptions.forEach(e=>e(this._wallet))}constructor(e){var t,n,r;this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[];const i=(null==e?void 0:e.manifestUrl)||function(){var e;const t=null===(e=ze())||void 0===e?void 0:e.location.origin;return t?t+"/tonconnect-manifest.json":""}();this.dappSettings={manifestUrl:i,storage:(null==e?void 0:e.storage)||new Ge},this.walletsRequiredFeatures=null==e?void 0:e.walletsRequiredFeatures,this.environment=null!==(t=null==e?void 0:e.environment)&&void 0!==t?t:new Pt,this.walletsList=new Qe({walletsListSource:null==e?void 0:e.walletsListSource,cacheTTLMs:null==e?void 0:e.walletsListCacheTTLMs,onDownloadDurationMeasured:e=>{var t;null===(t=this.analytics)||void 0===t||t.setWalletListDownloadDuration(e)}});const s=null!==(n=null==e?void 0:e.eventDispatcher)&&void 0!==n?n:new Rt;if(this.tracker=new st({eventDispatcher:s,tonConnectSdkVersion:at}),this.environment=null!==(r=null==e?void 0:e.environment)&&void 0!==r?r:new Pt,this.initAnalytics(i,s,e),!this.dappSettings.manifestUrl)throw new te("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");this.bridgeConnectionStorage=new Ve(this.dappSettings.storage,this.walletsList),(null==e?void 0:e.disableAutoPauseConnection)||this.addWindowFocusAndBlurSubscriptions()}getWallets(){return this.walletsList.getWallets()}onStatusChange(e,t){return this.statusChangeSubscriptions.push(e),t&&this.statusChangeErrorSubscriptions.push(t),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(t=>t!==e),t&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(e=>e!==t))}}connect(e,t,n){var r,i,s;const a=Object.assign({},n);if("object"==typeof t&&null!==t&&"tonProof"in t&&(a.request=t),"object"==typeof t&&null!==t&&("openingDeadlineMS"in t||"signal"in t||"request"in t||"traceId"in t)&&(a.request=null==t?void 0:t.request,a.openingDeadlineMS=null==t?void 0:t.openingDeadlineMS,a.signal=null==t?void 0:t.signal),a.request){const e=Et(a.request);if(e)throw new ee("ConnectAdditionalRequest validation failed: "+e)}if(this.connected)throw new ie;const o=je(null==a?void 0:a.signal);if(null===(r=this.abortController)||void 0===r||r.abort(),this.abortController=o,o.signal.aborted)throw new ee("Connection was aborted");null===(i=this.provider)||void 0===i||i.closeConnection(),this.provider=this.createProvider(e),o.signal.addEventListener("abort",()=>{var e;null===(e=this.provider)||void 0===e||e.closeConnection(),this.provider=null});const l=null!==(s=null==a?void 0:a.traceId)&&void 0!==s?s:De();return this.tracker.trackConnectionStarted(l),this.provider.connect(this.createConnectRequest(null==a?void 0:a.request),{openingDeadlineMS:null==a?void 0:a.openingDeadlineMS,signal:o.signal,traceId:l})}restoreConnection(e){return Z(this,0,void 0,function*(){var t,n,r;const i=null!==(t=null==e?void 0:e.traceId)&&void 0!==t?t:De();this.tracker.trackConnectionRestoringStarted(i);const s=je(null==e?void 0:e.signal);if(null===(n=this.abortController)||void 0===n||n.abort(),this.abortController=s,s.signal.aborted)return void this.tracker.trackConnectionRestoringError("Connection restoring was aborted",i);const[a,o]=yield Promise.all([this.bridgeConnectionStorage.storedConnectionType(),this.walletsList.getEmbeddedWallet()]);if(s.signal.aborted)return void this.tracker.trackConnectionRestoringError("Connection restoring was aborted",i);let l=null;try{switch(a){case"http":l=yield $e.fromStorage(this.bridgeConnectionStorage,this.analytics);break;case"injected":l=yield He.fromStorage(this.bridgeConnectionStorage,this.analytics);break;case"wallet-connect":l=yield Lt.fromStorage(this.bridgeConnectionStorage);break;default:if(!o)return;l=this.createProvider(o)}}catch(h){return Re("Provider is not restored",h),this.tracker.trackConnectionRestoringError("Provider is not restored",i),yield this.bridgeConnectionStorage.removeConnection(),null==l||l.closeConnection(),void(l=null)}if(s.signal.aborted)return null==l||l.closeConnection(),void this.tracker.trackConnectionRestoringError("Connection restoring was aborted",i);if(!l)return Oe("Provider is not restored"),void this.tracker.trackConnectionRestoringError("Provider is not restored",i);null===(r=this.provider)||void 0===r||r.closeConnection(),this.provider=l,l.listen(this.walletEventsListener.bind(this));const c=()=>{this.tracker.trackConnectionRestoringError("Connection restoring was aborted",i),null==l||l.closeConnection(),l=null};s.signal.addEventListener("abort",c);const u=Te(t=>Z(this,0,void 0,function*(){if(yield null==l?void 0:l.restoreConnection({openingDeadlineMS:null==e?void 0:e.openingDeadlineMS,signal:t.signal,traceId:i}),s.signal.removeEventListener("abort",c),this.connected){const e=this.getSessionInfo();this.tracker.trackConnectionRestoringCompleted(this.wallet,e,i)}else this.tracker.trackConnectionRestoringError("Connection restoring failed",i)}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:2e3,signal:null==e?void 0:e.signal}),d=new Promise(e=>setTimeout(()=>e(),12e3));return Promise.race([u,d])})}sendTransaction(e,t){return Z(this,0,void 0,function*(){var n,r,i;const s={};"function"==typeof t?s.onRequestSent=t:(s.onRequestSent=null==t?void 0:t.onRequestSent,s.signal=null==t?void 0:t.signal,s.traceId=null==t?void 0:t.traceId);const a=xt(e);if(a)throw new ee("SendTransactionRequest validation failed: "+a);const o=je(null==s?void 0:s.signal);if(o.signal.aborted)throw new ee("Transaction sending was aborted");this.checkConnection();const l=e.messages.length,c=e.messages.some(e=>e.extraCurrency&&Object.keys(e.extraCurrency).length>0);Xe(this.wallet.device.features,{requiredMessagesNumber:l,requireExtraCurrencies:c});const u=this.getSessionInfo(),d=null!==(n=null==s?void 0:s.traceId)&&void 0!==n?n:De();this.tracker.trackTransactionSentForSignature(this.wallet,e,u,d);const{validUntil:h,messages:f}=e,p=X(e,["validUntil","messages"]),m=e.from||this.account.address,g=e.network||this.account.chain;if((null===(r=this.wallet)||void 0===r?void 0:r.account.chain)&&g!==this.wallet.account.chain)throw new ce("Wallet connected to a wrong network",{cause:{expectedChainId:null===(i=this.wallet)||void 0===i?void 0:i.account.chain,actualChainId:g}});const y=yield this.provider.sendRequest(_e.convertToRpcRequest(Object.assign(Object.assign({},p),{from:m,network:g,valid_until:h,messages:f.map(e=>{var{extraCurrency:t,payload:n,stateInit:r}=e,i=X(e,["extraCurrency","payload","stateInit"]);return Object.assign(Object.assign({},i),{payload:jt(n),stateInit:jt(r),extra_currency:t})})})),{onRequestSent:s.onRequestSent,signal:o.signal,traceId:d});if(_e.isError(y))return this.tracker.trackTransactionSigningFailed(this.wallet,e,y.error.message,y.error.code,u,d),_e.parseAndThrowError(y);const v=_e.convertFromRpcResponse(y);return this.tracker.trackTransactionSigned(this.wallet,e,v,u,d),Object.assign(Object.assign({},v),{traceId:y.traceId})})}signData(e,t){return Z(this,0,void 0,function*(){var n,r,i;const s=je(null==t?void 0:t.signal);if(s.signal.aborted)throw new ee("data sending was aborted");const a=Ct(e);if(a)throw new ee("SignDataPayload validation failed: "+a);this.checkConnection(),function(e,t){const n=e.find(e=>e&&"object"==typeof e&&"SignData"===e.name);if(!n)throw new oe("Wallet doesn't support SignData feature.",{cause:{requiredFeature:{featureName:"SignData",value:{types:t.requiredTypes}}}});const r=t.requiredTypes.filter(e=>!n.types.includes(e));if(r.length)throw new oe(`Wallet doesn't support required SignData types: ${r.join(", ")}.`,{cause:{requiredFeature:{featureName:"SignData",value:{types:r}}}})}(this.wallet.device.features,{requiredTypes:[e.type]});const o=this.getSessionInfo(),l=null!==(n=null==t?void 0:t.traceId)&&void 0!==n?n:De();this.tracker.trackDataSentForSignature(this.wallet,e,o,l);const c=e.from||this.account.address,u=e.network||this.account.chain;if((null===(r=this.wallet)||void 0===r?void 0:r.account.chain)&&u!==this.wallet.account.chain)throw new ce("Wallet connected to a wrong network",{cause:{expectedChainId:null===(i=this.wallet)||void 0===i?void 0:i.account.chain,actualChainId:u}});const d=yield this.provider.sendRequest(xe.convertToRpcRequest(Object.assign(Object.assign(Object.assign({},e),"cell"===e.type?{cell:jt(e.cell)}:{}),{from:c,network:u})),{onRequestSent:null==t?void 0:t.onRequestSent,signal:s.signal,traceId:l});if(xe.isError(d))return this.tracker.trackDataSigningFailed(this.wallet,e,d.error.message,d.error.code,o,l),xe.parseAndThrowError(d);const h=xe.convertFromRpcResponse(d);return this.tracker.trackDataSigned(this.wallet,e,h,o,l),Object.assign(Object.assign({},h),{traceId:l})})}setConnectionNetwork(e){if(this.connected)throw new ee("Cannot change network while wallet is connected");this.desiredChainId=e}disconnect(e){return Z(this,0,void 0,function*(){var t,n;if(!this.connected)throw new se;const r=je(null==e?void 0:e.signal),i=this.abortController;if(this.abortController=r,r.signal.aborted)throw new ee("Disconnect was aborted");const s=null!==(t=null==e?void 0:e.traceId)&&void 0!==t?t:De();this.onWalletDisconnected("dapp",{traceId:s}),yield null===(n=this.provider)||void 0===n?void 0:n.disconnect({signal:r.signal,traceId:s}),null==i||i.abort()})}getSessionId(){return Z(this,0,void 0,function*(){if(!this.provider)return null;try{const e=yield this.bridgeConnectionStorage.getConnection();return e&&"http"===e.type?"sessionCrypto"in e?e.sessionCrypto.sessionId:e.session.sessionCrypto.sessionId:null}catch(e){return null}})}getSessionInfo(){var e;if("http"!==(null===(e=this.provider)||void 0===e?void 0:e.type))return null;if(!("session"in this.provider))return null;try{const e=this.provider.session;if(!e)return null;const t=e.sessionCrypto.sessionId;let n=null;return"walletPublicKey"in e&&(n=e.walletPublicKey),{clientId:t,walletId:n}}catch(t){return null}}pauseConnection(){var e;"http"===(null===(e=this.provider)||void 0===e?void 0:e.type)&&this.provider.pause()}unPauseConnection(){var e;return"http"!==(null===(e=this.provider)||void 0===e?void 0:e.type)?Promise.resolve():this.provider.unPause()}addWindowFocusAndBlurSubscriptions(){const e=qe();if(e)try{e.addEventListener("visibilitychange",()=>{e.hidden?this.pauseConnection():this.unPauseConnection().catch(()=>{})})}catch(tc){Oe("Cannot subscribe to the document.visibilitychange: ",tc)}}initAnalytics(e,t,n){var r;const i=null==n?void 0:n.analytics,s=null!==(r=null==i?void 0:i.mode)&&void 0!==r?r:"telemetry";if("off"===s)return;const a=new Tt({environment:this.environment,mode:s});this.analytics=a;const o=this.environment.getTelegramUser(),l={browser:this.environment.getBrowser(),platform:this.environment.getPlatform(),manifest_json_url:e,origin_url:Fe,locale:this.environment.getLocale()};o&&(l.tg_id=o.id,l.tma_is_premium=o.isPremium),function(e,t){e.addEventListener("ton-connect-ui-wallet-modal-opened",e=>{var n;const{detail:r}=e;t.emitConnectionStarted({client_id:r.client_id||"",versions:Ot(r.custom_data),main_screen:r.visible_wallets,trace_id:null!==(n=r.trace_id)&&void 0!==n?n:void 0})}),e.addEventListener("ton-connect-ui-selected-wallet",e=>{var n,r;const{detail:i}=e;t.emitConnectionSelectedWallet({client_id:i.client_id||"",versions:Ot(i.custom_data),main_screen:i.visible_wallets,wallets_menu:i.wallets_menu,trace_id:null!==(n=i.trace_id)&&void 0!==n?n:void 0,wallet_app_name:null!==(r=i.wallet_type)&&void 0!==r?r:"",wallet_redirect_method:i.wallet_redirect_method,wallet_redirect_link:i.wallet_redirect_link})}),e.addEventListener("ton-connect-connection-completed",e=>{const{detail:n}=e;t.emitConnectionCompleted(Nt(n))}),e.addEventListener("ton-connect-connection-error",e=>{var n,r;const{detail:i}=e;t.emitConnectionError({client_id:i.custom_data.client_id||"",wallet_id:i.custom_data.wallet_id||"",error_code:null!==(n=i.error_code)&&void 0!==n?n:0,error_message:i.error_message,trace_id:null!==(r=i.trace_id)&&void 0!==r?r:void 0})}),e.addEventListener("ton-connect-disconnection",e=>{const{detail:n}=e;t.emitDisconnection(Nt(n))}),e.addEventListener("ton-connect-transaction-sent-for-signature",e=>{const{detail:n}=e;t.emitTransactionSent(Nt(n))}),e.addEventListener("ton-connect-transaction-signed",e=>{const{detail:n}=e;t.emitTransactionSigned(Object.assign(Object.assign({},Nt(n)),{signed_boc:e.detail.signed_transaction}))}),e.addEventListener("ton-connect-transaction-signing-failed",e=>{var n;const{detail:r}=e;t.emitTransactionSigningFailed(Object.assign(Object.assign({},Nt(r)),{valid_until:Number(r.valid_until),messages:r.messages.map(e=>{var t,n,r,i;return{address:null!==(t=e.address)&&void 0!==t?t:"",amount:null!==(n=e.amount)&&void 0!==n?n:"",payload:null!==(r=e.payload)&&void 0!==r?r:"",state_init:null!==(i=e.state_init)&&void 0!==i?i:""}}),error_message:r.error_message,error_code:null!==(n=r.error_code)&&void 0!==n?n:0}))}),e.addEventListener("ton-connect-sign-data-request-initiated",e=>{const{detail:n}=e;null==t||t.emitSignDataRequestInitiated(Nt(n))}),e.addEventListener("ton-connect-sign-data-request-completed",e=>{const{detail:n}=e;null==t||t.emitSignDataRequestCompleted(Nt(n))}),e.addEventListener("ton-connect-sign-data-request-failed",e=>{var n;const{detail:r}=e;let i,s="";"text"===r.data.type&&(s=r.data.text),"cell"===r.data.type&&(s=r.data.cell,i=r.data.schema),"binary"===r.data.type&&(s=r.data.bytes),null==t||t.emitSignDataRequestFailed(Object.assign(Object.assign({},Nt(r)),{sign_data_type:r.data.type,sign_data_value:s,sign_data_schema:i,error_code:null!==(n=r.error_code)&&void 0!==n?n:0,error_message:r.error_message}))})}(t,a.scoped(l))}createProvider(e){let t;return t=!Array.isArray(e)&&"jsBridgeKey"in e?new He(this.bridgeConnectionStorage,e.jsBridgeKey,this.analytics):!Array.isArray(e)&&function(e){return"type"in e&&"wallet-connect"===e.type}(e)?new Lt(this.bridgeConnectionStorage):new $e(this.bridgeConnectionStorage,e,this.analytics),t.listen(this.walletEventsListener.bind(this)),t}walletEventsListener(e){switch(e.event){case"connect":this.onWalletConnected(e.payload,{traceId:e.traceId});break;case"connect_error":this.tracker.trackConnectionError(e.payload.message,e.payload.code,this.getSessionInfo(),e.traceId);const t=ve.parseError(e.payload);this.onWalletConnectError(t);break;case"disconnect":this.onWalletDisconnected("wallet",{traceId:e.traceId})}}onWalletConnected(e,t){var n,r;const i=e.items.find(e=>"ton_addr"===e.name),s=e.items.find(e=>"ton_proof"===e.name);if(!i)throw new ee("ton_addr connection item was not found");if(!Ze(e.device.features,this.walletsRequiredFeatures))return null===(n=this.provider)||void 0===n||n.disconnect(),void this.onWalletConnectError(new le("Wallet does not support required features",{cause:{connectEvent:e}}));const a={device:e.device,provider:this.provider.type,account:{address:i.address,chain:i.network,walletStateInit:i.walletStateInit,publicKey:i.publicKey}};if(this.desiredChainId&&a.account.chain!==this.desiredChainId){const e=this.desiredChainId,t=a.account.chain;return null===(r=this.provider)||void 0===r||r.disconnect(),void this.onWalletConnectError(new ce("Wallet connected to a wrong network",{cause:{expectedChainId:e,actualChainId:t}}))}if(s){const e=function(e){if(!_t(e))return"ton_proof item must be an object";if(St(e,["error","proof","name"]))return"ton_proof item contains extra properties";const t=Object.prototype.hasOwnProperty.call(e,"proof"),r=Object.prototype.hasOwnProperty.call(e,"error");if(!t&&!r)return"'ton_proof' item must contain either 'proof' or 'error'";if(t&&r)return"'ton_proof' item must contain either 'proof' or 'error', not both";if(t){const t=e.proof;if(!_t(t))return"Invalid 'proof' object";if(!gt(t.timestamp))return"Invalid 'proof.timestamp'";const r=t.domain;if(!_t(r))return"Invalid 'proof.domain'";if(!gt(r.lengthBytes))return"Invalid 'proof.domain.lengthBytes'";if(!yt(r.value))return"Invalid 'proof.domain.value'";try{if(("undefined"!=typeof TextEncoder?(new TextEncoder).encode(r.value).length:r.value.length)!==r.lengthBytes)return"'proof.domain.lengthBytes' does not match 'proof.domain.value'"}catch(n){}if(!yt(t.payload))return"Invalid 'proof.payload'";if(!yt(t.signature)||!ht.test(t.signature))return"Invalid 'proof.signature' format"}if(r){const t=e.error;if(!_t(t))return"Invalid 'error' object";if(St(t,["code","message"]))return"ton_proof error contains extra properties";if(!gt(t.code))return"Invalid 'error.code'";if(!yt(t.message))return"Invalid 'error.message'"}return null}(s);let t;if(e)t={name:"ton_proof",error:{code:q.UNKNOWN_ERROR,message:e}};else try{if("proof"in s)t={name:"ton_proof",proof:{timestamp:s.proof.timestamp,domain:{lengthBytes:s.proof.domain.lengthBytes,value:s.proof.domain.value},payload:s.proof.payload,signature:s.proof.signature}};else{if(!("error"in s))throw new ee("Invalid data format");t={name:"ton_proof",error:{code:s.error.code,message:s.error.message}}}}catch(tc){t={name:"ton_proof",error:{code:q.UNKNOWN_ERROR,message:"Invalid data format"}}}a.connectItems={tonProof:t}}this.wallet=a;const o=this.getSessionInfo();this.tracker.trackConnectionCompleted(a,o,null==t?void 0:t.traceId)}onWalletConnectError(e){if(this.statusChangeErrorSubscriptions.forEach(t=>t(e)),Re(e),e instanceof re||e instanceof ne)throw Oe(e),e}onWalletDisconnected(e,t){const n=this.getSessionInfo();this.tracker.trackDisconnection(this.wallet,e,n,null==t?void 0:t.traceId),this.wallet=null}checkConnection(){if(!this.connected)throw new se}createConnectRequest(e){const t=[Object.assign({name:"ton_addr"},this.desiredChainId?{network:this.desiredChainId}:{})];return(null==e?void 0:e.tonProof)&&t.push({name:"ton_proof",payload:e.tonProof}),{manifestUrl:this.dappSettings.manifestUrl,items:t}}}Ut.walletsList=new Qe,Ut.isWalletInjected=e=>He.isWalletInjected(e),Ut.isInsideWalletBrowser=e=>He.isInsideWalletBrowser(e);const Dt=new Ut({manifestUrl:"https://tap-duel-game-production.up.railway.app/tonconnect-manifest.json"}),$t=R.createContext(Dt);function Mt({children:e}){return v.jsx($t.Provider,{value:Dt,children:e})}function Bt(){return R.useContext($t)}
/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(this,arguments)}var zt;C(),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(zt||(zt={}));const qt="popstate";function Ft(e){return void 0===e&&(e={}),function(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=zt.Pop,l=null,c=u();null==c&&(c=0,a.replaceState(Wt({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=zt.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function h(e,t){o=zt.Push;let r=Gt(m.location,e,t);n&&n(r,e),c=u()+1;let d=Vt(r,c),h=m.createHref(r);try{a.pushState(d,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}s&&l&&l({action:o,location:m.location,delta:1})}function f(e,t){o=zt.Replace;let r=Gt(m.location,e,t);n&&n(r,e),c=u();let i=Vt(r,c),d=m.createHref(r);a.replaceState(i,"",d),s&&l&&l({action:o,location:m.location,delta:0})}function p(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"==typeof e?e:Jt(e);return n=n.replace(/ $/,"%20"),Kt(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}let m={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(qt,d),l=e,()=>{i.removeEventListener(qt,d),l=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:f,go:e=>a.go(e)};return m}(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=Yt(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),Gt("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"==typeof t?t:Jt(t))},function(e,t){Ht("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},e)}function Kt(e,t){if(!1===e||null==e)throw new Error(t)}function Ht(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(tc){}}}function Vt(e,t){return{usr:e.state,key:e.key,idx:t}}function Gt(e,t,n,r){return void 0===n&&(n=null),Wt({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?Yt(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Jt(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Yt(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var Qt;function Xt(e,t,n){return void 0===n&&(n="/"),function(e,t,n){let r="string"==typeof t?Yt(t):t,i=fn(r.pathname||"/",n);if(null==i)return null;let s=Zt(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=hn(i);a=un(s[o],e)}return a}(e,t,n)}function Zt(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(Kt(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=wn([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(Kt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),Zt(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:cn(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of en(e.path))i(e,t,r);else i(e,t)}),t}function en(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=en(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Qt||(Qt={}));const tn=/^:[\w-]+$/,nn=3,rn=2,sn=1,an=10,on=-2,ln=e=>"*"===e;function cn(e,t){let n=e.split("/"),r=n.length;return n.some(ln)&&(r+=on),t&&(r+=rn),n.filter(e=>!ln(e)).reduce((e,t)=>e+(tn.test(t)?nn:""===t?sn:an),r)}function un(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],n=o===r.length-1,l="/"===s?t:t.slice(s.length)||"/",c=dn({path:e.relativePath,caseSensitive:e.caseSensitive,end:n},l),u=e.route;if(!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:wn([s,c.pathname]),pathnameBase:_n(wn([s,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(s=wn([s,c.pathnameBase]))}return a}function dn(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Ht("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function hn(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return Ht(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function fn(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const pn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function mn(e,t){void 0===t&&(t="/");let n,{pathname:r,search:i="",hash:s=""}="string"==typeof e?Yt(e):e;if(r)if(a=r,pn.test(a))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),Ht(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?gn(r.substring(1),"/"):gn(r,t)}else n=t;var a;return{pathname:n,search:Sn(i),hash:xn(s)}}function gn(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function yn(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function vn(e,t){let n=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function bn(e,t,n,r){let i;void 0===r&&(r=!1),"string"==typeof e?i=Yt(e):(i=Wt({},e),Kt(!i.pathname||!i.pathname.includes("?"),yn("?","pathname","search",i)),Kt(!i.pathname||!i.pathname.includes("#"),yn("#","pathname","hash",i)),Kt(!i.search||!i.search.includes("#"),yn("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=mn(i,s),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const wn=e=>e.join("/").replace(/\/\/+/g,"/"),_n=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Sn=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",xn=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const kn=["post","put","patch","delete"];new Set(kn);const En=["get",...kn];
/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Cn(){return Cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cn.apply(this,arguments)}new Set(En);const jn=R.createContext(null),Tn=R.createContext(null),Rn=R.createContext(null),On=R.createContext(null),Nn=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Pn=R.createContext(null);function In(){return null!=R.useContext(On)}function An(){return In()||Kt(!1),R.useContext(On).location}function Ln(e){R.useContext(Rn).static||R.useLayoutEffect(e)}function Un(){let{isDataRoute:e}=R.useContext(Nn);return e?function(){let{router:e}=function(){let e=R.useContext(jn);return e||Kt(!1),e}(qn.UseNavigateStable),t=Kn(Fn.UseNavigateStable),n=R.useRef(!1);return Ln(()=>{n.current=!0}),R.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"==typeof r?e.navigate(r):e.navigate(r,Cn({fromRouteId:t},i)))},[e,t])}():function(){In()||Kt(!1);let e=R.useContext(jn),{basename:t,future:n,navigator:r}=R.useContext(Rn),{matches:i}=R.useContext(Nn),{pathname:s}=An(),a=JSON.stringify(vn(i,n.v7_relativeSplatPath)),o=R.useRef(!1);return Ln(()=>{o.current=!0}),R.useCallback(function(n,i){if(void 0===i&&(i={}),!o.current)return;if("number"==typeof n)return void r.go(n);let l=bn(n,JSON.parse(a),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:wn([t,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)},[t,r,a,s,e])}()}function Dn(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=R.useContext(Rn),{matches:i}=R.useContext(Nn),{pathname:s}=An(),a=JSON.stringify(vn(i,r.v7_relativeSplatPath));return R.useMemo(()=>bn(e,JSON.parse(a),s,"path"===n),[e,a,s,n])}function $n(e,t){return function(e,t,n,r){In()||Kt(!1);let{navigator:i}=R.useContext(Rn),{matches:s}=R.useContext(Nn),a=s[s.length-1],o=a?a.params:{};!a||a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c,u=An();if(t){var d;let e="string"==typeof t?Yt(t):t;"/"===l||(null==(d=e.pathname)?void 0:d.startsWith(l))||Kt(!1),c=e}else c=u;let h=c.pathname||"/",f=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=Xt(e,{pathname:f}),m=function(e,t,n,r){var i;void 0===t&&(t=[]);void 0===n&&(n=null);void 0===r&&(r=null);if(null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=r)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,o=null==(i=n)?void 0:i.errors;if(null!=o){let e=a.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||Kt(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let e=a[u];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=u),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight((e,r,i)=>{let s,u=!1,d=null,h=null;var f;n&&(s=o&&r.route.id?o[r.route.id]:void 0,d=r.route.errorElement||Bn,l&&(c<0&&0===i?(Hn[f="route-fallback"]||(Hn[f]=!0),u=!0,h=null):c===i&&(u=!0,h=r.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,i+1)),m=()=>{let t;return t=s?d:u?h:r.route.Component?R.createElement(r.route.Component,null):r.route.element?r.route.element:e,R.createElement(zn,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?R.createElement(Wn,{location:n.location,revalidation:n.revalidation,component:d,error:s,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:wn([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:wn([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,r);if(t&&m)return R.createElement(On.Provider,{value:{location:Cn({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:zt.Pop}},m);return m}(e,t)}function Mn(){let e=function(){var e;let t=R.useContext(Pn),n=function(){let e=R.useContext(Tn);return e||Kt(!1),e}(),r=Kn();if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),n?R.createElement("pre",{style:r},n):null,null)}const Bn=R.createElement(Mn,null);class Wn extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?R.createElement(Nn.Provider,{value:this.props.routeContext},R.createElement(Pn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zn(e){let{routeContext:t,match:n,children:r}=e,i=R.useContext(jn);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Nn.Provider,{value:t},r)}var qn=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(qn||{}),Fn=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Fn||{});function Kn(e){let t=function(){let e=R.useContext(Nn);return e||Kt(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||Kt(!1),n.route.id}const Hn={};function Vn(e){let{to:t,replace:n,state:r,relative:i}=e;In()||Kt(!1);let{future:s,static:a}=R.useContext(Rn),{matches:o}=R.useContext(Nn),{pathname:l}=An(),c=Un(),u=bn(t,vn(o,s.v7_relativeSplatPath),l,"path"===i),d=JSON.stringify(u);return R.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function Gn(e){Kt(!1)}function Jn(e){let{basename:t="/",children:n=null,location:r,navigationType:i=zt.Pop,navigator:s,static:a=!1,future:o}=e;In()&&Kt(!1);let l=t.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:l,navigator:s,static:a,future:Cn({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);"string"==typeof r&&(r=Yt(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,m=R.useMemo(()=>{let e=fn(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:p},navigationType:i}},[l,u,d,h,f,p,i]);return null==m?null:R.createElement(Rn.Provider,{value:c},R.createElement(On.Provider,{children:n,value:m}))}function Yn(e){let{children:t,location:n}=e;return $n(Qn(t),n)}function Qn(e,t){void 0===t&&(t=[]);let n=[];return R.Children.forEach(e,(e,r)=>{if(!R.isValidElement(e))return;let i=[...t,r];if(e.type===R.Fragment)return void n.push.apply(n,Qn(e.props.children,i));e.type!==Gn&&Kt(!1),e.props.index&&e.props.children&&Kt(!1);let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Qn(e.props.children,i)),n.push(s)}),n}
/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xn(){return Xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xn.apply(this,arguments)}new Promise(()=>{});const Zn=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(tc){}const er=O.startTransition;function tr(e){let{basename:t,children:n,future:r,window:i}=e,s=R.useRef();null==s.current&&(s.current=Ft({window:i,v5Compat:!0}));let a=s.current,[o,l]=R.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},u=R.useCallback(e=>{c&&er?er(()=>l(e)):l(e)},[l,c]);return R.useLayoutEffect(()=>a.listen(u),[a,u]),R.useEffect(()=>{return null==(e=r)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[r]),R.createElement(Jn,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const nr="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,rr=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ir=R.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,h=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Zn),{basename:f}=R.useContext(Rn),p=!1;if("string"==typeof c&&rr.test(c)&&(n=c,nr))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=fn(t.pathname,f);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:p=!0}catch(tc){}let m=function(e,t){let{relative:n}=void 0===t?{}:t;In()||Kt(!1);let{basename:r,navigator:i}=R.useContext(Rn),{hash:s,pathname:a,search:o}=Dn(e,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:wn([r,a])),i.createHref({pathname:l,search:o,hash:s})}(c,{relative:i}),g=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=void 0===t?{}:t,l=Un(),c=An(),u=Dn(e,{relative:a});return R.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,n)){t.preventDefault();let n=void 0!==r?r:Jt(c)===Jt(u);l(e,{replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,r,i,n,e,s,a,o])}(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:d});return R.createElement("a",Xn({},h,{href:n||m,onClick:p||s?r:function(e){r&&r(e),e.defaultPrevented||g(e)},ref:t,target:l}))});var sr,ar,or,lr;(ar=sr||(sr={})).UseScrollRestoration="useScrollRestoration",ar.UseSubmit="useSubmit",ar.UseSubmitFetcher="useSubmitFetcher",ar.UseFetcher="useFetcher",ar.useViewTransitionState="useViewTransitionState",(lr=or||(or={})).UseFetcher="useFetcher",lr.UseFetchers="useFetchers",lr.UseScrollRestoration="useScrollRestoration";var cr=Object.defineProperty,ur=(e,t,n)=>(((e,t,n)=>{t in e?cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,t+"",n),n);const dr=new class{constructor(e,t){this.prefix=e,this.enabled=t}print(e,...t){if(!this.enabled)return;const n=new Date,r=Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(n);console[e](`[${r}]`,this.prefix,...t)}disable(){this.enabled=!1}error(...e){this.print("error",...e)}enable(){this.enabled=!0}log(...e){this.print("log",...e)}warn(...e){this.print("warn",...e)}}("[SDK]",!1);let hr=class e extends Error{constructor(t,{cause:n,type:r}={}){super("Unable to parse value"+(r?` as ${r}`:""),{cause:n}),ur(this,"type"),this.value=t,Object.setPrototypeOf(this,e.prototype),this.type=r}};class fr extends Error{constructor(e,{cause:t,type:n}={}){super(`Unable to parse field "${e}"${n?` as ${n}`:""}`,{cause:t}),Object.setPrototypeOf(this,fr.prototype)}}function pr(e,t){const n={};for(const i in e){const s=e[i];if(!s)continue;let a,o,l;if("function"==typeof s||"parse"in s)a=i,o="function"==typeof s?s:s.parse.bind(s);else{const{type:e}=s;a=s.from||i,o="function"==typeof e?e:e.parse.bind(e)}const c=t(a);try{l=o(c)}catch(r){throw new fr(a,r instanceof hr?{type:r.type,cause:r}:{cause:r})}void 0!==l&&(n[i]=l)}return n}function mr(){return new TypeError("Value has unexpected type")}function gr(e){let t=e;if("string"==typeof t&&(t=JSON.parse(t)),"object"!=typeof t||null===t||Array.isArray(t))throw mr();return t}class yr{constructor(e,t,n){this.parser=e,this.isOptional=t,this.type=n}parse(e){if(!this.isOptional||void 0!==e)try{return this.parser(e)}catch(t){throw new hr(e,{type:this.type,cause:t})}}optional(){return this.isOptional=!0,this}}function vr(e,t){return new yr(t=>{const n=gr(t);return pr(e,e=>n[e])},!1,t)}function br(e,t){return()=>new yr(e,!1,t)}const wr=br(e=>{if("string"==typeof e||"number"==typeof e)return e.toString();throw mr()},"string");const _r=br(e=>function(e){const t=e.replace(/\s/g,"").toLowerCase();if(function(e){return/^#[\da-f]{6}$/i.test(e)}(t))return t;if(function(e){return/^#[\da-f]{3}$/i.test(e)}(t)){let e="#";for(let n=0;n<3;n+=1)e+=t[1+n].repeat(2);return e}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(null===n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((e,t)=>{const n=parseInt(t,10).toString(16);return e+(1===n.length?"0":"")+n},"#")}(wr().parse(e)),"rgb"),Sr=br(e=>{if("boolean"==typeof e)return e;const t=String(e);if("1"===t||"true"===t)return!0;if("0"===t||"false"===t)return!1;throw mr()},"boolean"),xr=br(e=>{if("number"==typeof e)return e;if("string"==typeof e){const t=Number(e);if(!Number.isNaN(t))return t}throw mr()},"number");function kr(){return vr({addedToAttachmentMenu:{type:Sr().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:Sr().optional(),from:"allows_write_to_pm"},firstName:{type:wr(),from:"first_name"},id:xr(),isBot:{type:Sr().optional(),from:"is_bot"},isPremium:{type:Sr().optional(),from:"is_premium"},languageCode:{type:wr().optional(),from:"language_code"},lastName:{type:wr().optional(),from:"last_name"},photoUrl:{type:wr().optional(),from:"photo_url"},username:wr().optional()},"User")}const Er=br(e=>e instanceof Date?e:new Date(1e3*xr().parse(e)),"Date");function Cr(e,t){return new yr(t=>{if("string"!=typeof t&&!(t instanceof URLSearchParams))throw mr();const n="string"==typeof t?new URLSearchParams(t):t;return pr(e,e=>{const t=n.get(e);return null===t?void 0:t})},!1,t)}Cr({contact:vr({userId:{type:xr(),from:"user_id"},phoneNumber:{type:wr(),from:"phone_number"},firstName:{type:wr(),from:"first_name"},lastName:{type:wr().optional(),from:"last_name"}}),authDate:{type:Er(),from:"auth_date"},hash:wr()});const jr=br(e=>{const t=_r().optional();return Object.entries(gr(e)).reduce((e,[n,r])=>(e[function(e){return e.replace(/(^|_)bg/,(e,t)=>`${t}background`).replace(/_([a-z])/g,(e,t)=>t.toUpperCase())}(n)]=t.parse(r),e),{})},"ThemeParams");function Tr(e){return Cr({botInline:{type:Sr().optional(),from:"tgWebAppBotInline"},initData:{type:Cr({authDate:{type:Er(),from:"auth_date"},canSendAfter:{type:xr().optional(),from:"can_send_after"},chat:vr({id:xr(),type:wr(),title:wr(),photoUrl:{type:wr().optional(),from:"photo_url"},username:wr().optional()},"Chat").optional(),chatInstance:{type:wr().optional(),from:"chat_instance"},chatType:{type:wr().optional(),from:"chat_type"},hash:wr(),queryId:{type:wr().optional(),from:"query_id"},receiver:kr().optional(),startParam:{type:wr().optional(),from:"start_param"},user:kr().optional()},"InitData").optional(),from:"tgWebAppData"},initDataRaw:{type:wr().optional(),from:"tgWebAppData"},platform:{type:wr(),from:"tgWebAppPlatform"},showSettings:{type:Sr().optional(),from:"tgWebAppShowSettings"},startParam:{type:wr().optional(),from:"tgWebAppStartParam"},themeParams:{type:jr(),from:"tgWebAppThemeParams"},version:{type:wr(),from:"tgWebAppVersion"}},"LaunchParams").parse(e)}function Rr(e){return Tr(e.includes("?")?e.replace("#","&").slice(e.indexOf("?")+1):e.slice(e.indexOf("#")+1))}function Or(){return Rr(window.location.href)}function Nr(){const e=performance.getEntriesByType("navigation")[0];if(!e)throw new Error("Unable to get first navigation entry.");return Rr(e.name)}function Pr(e){const{initDataRaw:t,themeParams:n,platform:r,version:i,showSettings:s,startParam:a,botInline:o}=e,l=new URLSearchParams;return t&&l.set("tgWebAppData",t),l.set("tgWebAppPlatform",r),l.set("tgWebAppThemeParams",function(e){return JSON.stringify(Object.entries(e).reduce((e,[t,n])=>(n&&(e[function(e){return e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`).replace(/(^|_)background/,(e,t)=>`${t}bg`)}(t)]=n),e),{}))}(n)),l.set("tgWebAppVersion",i),a&&l.set("tgWebAppStartParam",i),"boolean"==typeof s&&l.set("tgWebAppShowSettings",s?"1":"0"),"boolean"==typeof o&&l.set("tgWebAppBotInline",o?"1":"0"),l.toString()}const Ir="telegram-mini-apps-launch-params";function Ar(){return Tr(sessionStorage.getItem(Ir)||"")}function Lr(e){sessionStorage.setItem(Ir,Pr(e))}function Ur(){const e=[];for(const n of[Or,Nr,Ar])try{const e=n();return Lr(e),e}catch(t){e.push(t)}throw dr.error("Unable to extract launch parameters. Received errors:",e),new Error("Unable to retrieve launch parameters from any known source.")}const Dr=R.createContext({loading:!1});function $r(e){const{initResult:t}=R.useContext(Dr);if(!t)throw new Error(`Unable to get init result key "${e}" as long as SDK is not initialized`);return t[e]}function Mr(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function Br(e,t){return t?()=>function(e){const t=$r(e),[n,r]=R.useState(Mr(t));return R.useEffect(()=>t.on("change",()=>{r(Mr(t))}),[t]),n}(e):()=>$r(e)}Dr.displayName="SDKContext";const Wr=Br("backButton",!0),zr=Br("initData");function qr(){return R.useMemo(Ur,[])}const Fr=Br("miniApp",!0),Kr=Br("themeParams",!0),Hr=Br("utils"),Vr=e=>"object"==typeof e&&null!==e,Gr=(e,t)=>{if(e===t)return!0;if(null==e||null==t||!Vr(e)&&!Vr(t))return!1;if(Vr(e)&&Vr(t)){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){if(!Object.prototype.hasOwnProperty.call(e,n)||!Object.prototype.hasOwnProperty.call(t,n))return!1;if(!Gr(e[n],t[n]))return!1}return!0}return!1};function Jr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Jr(e,t,n[t])})}return e}function Qr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Xr(e,t){if(null==e)return{};var n,r,i,s={};if("undefined"!=typeof Reflect&&Reflect.ownKeys){for(n=Reflect.ownKeys(e),i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r]);return s}if(s=function(e,t){if(null==e)return{};var n,r,i={},s=Object.getOwnPropertyNames(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}(e,t),Object.getOwnPropertySymbols)for(n=Object.getOwnPropertySymbols(e),i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r]);return s}function Zr(...e){const t=[];return e.forEach(e=>{if(e)switch(typeof e){case"string":t.push(e);break;case"object":Object.keys(e).forEach(n=>{e[n]&&t.push(n)});break;default:t.push(`${e}`)}}),t.join(" ")}function ei(){return ei=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ei.apply(this,arguments)}function ti(e){if(null==e)throw new TypeError("Cannot destructure "+e);return e}const ni=e=>void 0!==e&&!1!==e&&null!==e&&""!==e;function ri(e){return"string"==typeof e||"number"==typeof e}const ii=R.createContext({isRendered:!1}),si=()=>(()=>{const e=R.useContext(ii);if(!e.isRendered)throw new Error("[TGUI] Wrap your app with <AppRoot> component");return e})().platform||"base",ai=!("undefined"==typeof window||!window.document||!window.document.createElement),oi=ai?R.useLayoutEffect:R.useEffect,li=()=>{const[e,t]=R.useState([]),n=R.useMemo(()=>new Map,[]),r=((e,t)=>{const n=R.useRef({callbackFunction:e,duration:t});oi(()=>{n.current.callbackFunction=e,n.current.duration=t},[e,t]);const r=R.useRef(),i=R.useCallback(()=>clearTimeout(null==r?void 0:r.current),[]);return{set:R.useCallback(()=>{i(),r.current=setTimeout(n.current.callbackFunction,n.current.duration)},[i]),clear:i}})(()=>t([]),225);return{clicks:e,onPointerDown:i=>{const{top:s,left:a}=i.currentTarget.getBoundingClientRect(),o=i.clientX-(null!=a?a:0),l=i.clientY-(null!=s?s:0);n.set(i.pointerId,setTimeout(()=>function(i,s,a){const o=Date.now(),l=e.filter(e=>e.date+225>o);t([...l,{x:i,y:s,date:o,pointerId:a}]),r.set(),n.delete(a)}(o,l,i.pointerId),70))},onPointerCancel:e=>{const t=n.get(e.pointerId);clearTimeout(t),n.delete(e.pointerId)}}},ci=({clicks:e})=>v.jsx("span",{"aria-hidden":!0,className:"tgui-8071f6e38c77bc0b",children:e.map(e=>v.jsx("span",{className:"tgui-e156954daf886976",style:{top:e.y,left:e.x}},e.date))}),ui=R.forwardRef((e,t)=>{var{Component:n="div",children:r,className:i,interactiveAnimation:s="background",readOnly:a}=e,o=Xr(e,["Component","children","className","interactiveAnimation","readOnly"]);const l=si(),{clicks:c,onPointerCancel:u,onPointerDown:d}=li(),h="base"===l&&"background"===s&&!a;return v.jsxs(n,Qr(Yr({ref:t,className:Zr("tgui-b5d680db78c4cc2e","ios"===l&&"tgui-34eb6f8b96874d40","opacity"===s&&"tgui-7c5d6c1f6bbe3eaf",i),onPointerCancel:u,onPointerDown:d,readOnly:a},o),{children:[h&&v.jsx(ci,{clicks:c}),r]}))}),di={1:"tgui-5c92f90c2701fa17",2:"tgui-809f1f8a3f64154d",3:"tgui-5b8bdfbd2af10f59"},hi=R.forwardRef((e,t)=>{var{weight:n="3",Component:r="span",plain:i=!0,caps:s,className:a}=e,o=Xr(e,["weight","Component","plain","caps","className"]);return v.jsx(r,Yr({ref:t,className:Zr("tgui-c3e2e598bd70eee6",i&&"tgui-080a44e6ac3f4d27",n&&di[n],s&&"tgui-c602097b30e4ede9",a)},o))}),fi={1:"tgui-30064fce0d501f17",2:"tgui-8f63cd31b2513281"},pi=R.forwardRef((e,t)=>{var{level:n="1",className:r,Component:i}=e,s=Xr(e,["level","className","Component"]);return v.jsx(hi,Qr(Yr({},s),{ref:t,className:Zr("tgui-266b6ffdbad2b90e",fi[n],r),Component:i||"h6"}))}),mi={1:"tgui-2916d621b0ea5857",2:"tgui-937d123c23df98b3"},gi=e=>{var{level:t="1",className:n,Component:r}=e,i=Xr(e,["level","className","Component"]);return v.jsx(hi,Qr(Yr({},i),{className:Zr("tgui-f37a43dcc29ade55",mi[t],n),Component:r||"span"}))},yi=R.forwardRef((e,t)=>{var{weight:n,className:r,Component:i}=e,s=Xr(e,["weight","className","Component"]);return v.jsx(hi,Qr(Yr({ref:t},s),{weight:n,className:Zr("tgui-65c206f0fd891b6b",r),Component:i||"span"}))}),vi=R.forwardRef((e,t)=>{var{children:n,titleBadge:r,hint:i,subhead:s,subtitle:a,description:o,className:l,before:c,after:u,Component:d,hovered:h,multiline:f}=e,p=Xr(e,["children","titleBadge","hint","subhead","subtitle","description","className","before","after","Component","hovered","multiline"]);const m=si(),{Title:g,Description:y}=(()=>{const e="ios"===si();return{Title:R.useCallback(t=>e?v.jsx(yi,Yr({},t)):v.jsx(pi,Yr({level:"1"},t)),[e]),Description:R.useCallback(t=>e?v.jsx(gi,Yr({},t)):v.jsx(pi,Yr({level:"2"},t)),[e])}})(),b=ni(n)||ni(i)||ni(r);return v.jsxs(ui,Qr(Yr({ref:t,Component:d||"div",className:Zr("tgui-b8dfba0b5c3d054c","ios"===m&&"tgui-7b5bccbb645b495f",h&&"tgui-7edaaf0c57797623",f&&"tgui-6c49dadccf648a5b",l)},p),{children:[ni(c)&&v.jsx("div",{className:"tgui-aaa795d78c356ac1",children:c}),v.jsxs("div",{className:"tgui-8735a62be5a8b8a7",children:[ni(s)&&v.jsx(pi,{className:"tgui-46dd90b57ffed25f",level:"2",weight:"3",children:s}),b&&v.jsxs(g,{className:"tgui-a894f59f4c5ad72f",children:[ni(n)&&v.jsx("span",{className:"tgui-1c6d7865a76a19bc",children:n}),ni(i)&&v.jsx("span",{className:"tgui-bb909928b48f948b",children:i}),ni(r)&&r]}),ni(a)&&v.jsx(pi,{className:"tgui-d528ef65a8b76273",level:"2",weight:"3",children:a}),ni(o)&&v.jsx(y,{className:"tgui-fc059ed3ac5799a6",children:o})]}),ni(u)&&v.jsx("div",{className:"tgui-56b2e897ed7ccb22",children:u})]}))}),bi={1:"h2",2:"h3",3:"h4"},wi={1:"tgui-2fc52ee93e8068a6",2:"tgui-72c2a480384c4fb1",3:"tgui-45c5f45d3e9105f4"},_i=e=>{var{level:t="2",className:n,Component:r}=e,i=Xr(e,["level","className","Component"]);return v.jsx(hi,Qr(Yr({},i),{className:Zr("tgui-da537051a4a87aec",wi[t],n),Component:r||bi[t]}))},Si={s:e=>{var{children:t}=e,n=Xr(e,["children"]);return v.jsxs("svg",Qr(Yr({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),{children:[v.jsx("use",{xlinkHref:"#spinner_24",fill:"none",children:t}),v.jsx("symbol",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",id:"spinner_24",children:v.jsx("path",{d:"M12 3c1.5644 0 3.1018.40778 4.4605 1.18312 1.3588.77535 2.492 1.89147 3.2878 3.23831.7959 1.34683 1.2269 2.87787 1.2507 4.44207.0237 1.5642-.3607 3.1076-1.1154 4.478-.7546 1.3703-1.8534 2.5203-3.188 3.3365-1.3347.8162-2.859 1.2704-4.4227 1.3179-1.5636.0474-3.11269-.3136-4.49433-1.0473-1.38163-.7338-2.54815-1.8151-3.38448-3.1371",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round"})})]}))},m:e=>{var{children:t}=e,n=Xr(e,["children"]);return v.jsxs("svg",Qr(Yr({width:"36",height:"36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),{children:[v.jsx("use",{xlinkHref:"#spinner_36",fill:"none",children:t}),v.jsx("symbol",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36",id:"spinner_36",children:v.jsx("path",{d:"M18 4c2.4335 0 4.825.63432 6.9386 1.84041S28.815 8.7827 30.053 10.8778c1.238 2.0951 1.9085 4.4766 1.9454 6.9099.0369 2.4332-.5611 4.8341-1.735 6.9657-1.1739 2.1317-2.8831 3.9205-4.9592 5.1902-2.0761 1.2696-4.4472 1.9762-6.8796 2.05-2.4324.0738-4.842-.4877-6.9913-1.6292-2.14918-1.1414-3.96375-2.8234-5.26472-4.8799",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})})]}))},l:e=>{var{children:t}=e,n=Xr(e,["children"]);return v.jsxs("svg",Qr(Yr({width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),{children:[v.jsx("use",{xlinkHref:"#spinner_44",fill:"none",children:t}),v.jsx("symbol",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 44 44",id:"spinner_44",children:v.jsx("path",{d:"M22 4C25.1288 4 28.2036 4.81556 30.9211 6.36624C33.6386 7.91693 35.9049 10.1492 37.4967 12.8429C39.0884 15.5365 39.9505 18.5986 39.9979 21.727C40.0454 24.8555 39.2765 27.9423 37.7672 30.683C36.258 33.4237 34.0603 35.7236 31.3911 37.356C28.7219 38.9884 25.6733 39.8968 22.5459 39.9917C19.4185 40.0866 16.3204 39.3647 13.5571 37.8971C10.7939 36.4296 8.46085 34.2671 6.78817 31.6229",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})})]}))}},xi={s:12,m:18,l:22},ki=({size:e})=>{const t=Si[e],n=xi[e];return v.jsx(t,{children:v.jsx("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",from:`0 ${n} ${n}`,to:`360 ${n} ${n}`,dur:"0.7s",repeatCount:"indefinite"})})},Ei=e=>{var{children:t}=e,n=Xr(e,["children"]);return v.jsxs("svg",Qr(Yr({id:"l151:1947",width:"44",height:"44",viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},n),{children:[v.jsx("g",{transform:"matrix(1,0,0,1,0,0)",children:v.jsx("g",{id:"l151:1947",opacity:"1",style:{mixBlendMode:"normal"},children:v.jsxs("g",{children:[v.jsx("defs",{children:v.jsx("clipPath",{id:"l151:1947_clipPath",x:"-50%",y:"-50%",width:"200%",height:"200%",children:v.jsx("path",{d:"M0,0h44v0v44v0h-44v0v-44z",fill:"white",clipRule:"nonzero"})})}),v.jsxs("g",{clipPath:"url(#l151:1947_clipPath)",children:[v.jsx("g",{transform:"matrix(-0.7071067811865475,-0.7071067811865476,0.7071067811865476,-0.7071067811865475,9.2715,37.5564)",children:v.jsx("g",{id:"l151:1985",opacity:"0.837",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"l151:1985_fill_path",d:"M2,0v0c1.10457,0 2,0.89543 2,2v10c0,1.10457 -0.89543,2 -2,2v0c-1.10457,0 -2,-0.89543 -2,-2v-10c0,-1.10457 0.89543,-2 2,-2z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(1,0,0,1,20,29)",children:v.jsx("g",{id:"l151:1980",opacity:"0.467",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"l151:1980_fill_path",d:"M2,0v0c1.10457,0 2,0.89543 2,2v9c0,1.10457 -0.89543,2 -2,2v0c-1.10457,0 -2,-0.89543 -2,-2v-9c0,-1.10457 0.89543,-2 2,-2z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(0.7071067811865476,-0.7071067811865475,0.7071067811865475,0.7071067811865476,24.8291,27.6569)",children:v.jsx("g",{id:"l151:1982",opacity:"0.153",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"l151:1982_fill_path",d:"M2,0v0c1.10457,0 2,0.89543 2,2v10c0,1.10457 -0.89543,2 -2,2v0c-1.10457,0 -2,-0.89543 -2,-2v-10c0,-1.10457 0.89543,-2 2,-2z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(6.123233995736766e-17,-1,1,6.123233995736766e-17,29,24)",children:v.jsx("g",{id:"l151:1984",opacity:"0.049",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"l151:1984_fill_path",d:"M2,0v0c1.10457,0 2,0.89543 2,2v9c0,1.10457 -0.89543,2 -2,2v0c-1.10457,0 -2,-0.89543 -2,-2v-9c0,-1.10457 0.89543,-2 2,-2z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(-0.7071067811865475,-0.7071067811865476,0.7071067811865476,-0.7071067811865475,27.6592,19.1716)",children:v.jsx("g",{id:"l151:1986",opacity:"0.01",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"l151:1986_fill_path",d:"M2,0v0c1.10457,0 2,0.89543 2,2v10c0,1.10457 -0.89543,2 -2,2v0c-1.10457,0 -2,-0.89543 -2,-2v-10c0,-1.10457 0.89543,-2 2,-2z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(1,0,0,1,20,2)",children:v.jsx("g",{id:"l151:1979",opacity:"0",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"l151:1979_fill_path",d:"M2,0v0c1.10457,0 2,0.89543 2,2v9c0,1.10457 -0.89543,2 -2,2v0c-1.10457,0 -2,-0.89543 -2,-2v-9c0,-1.10457 0.89543,-2 2,-2z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(0.7071067811865476,-0.7071067811865475,0.7071067811865475,0.7071067811865476,6.4473,9.2721)",children:v.jsx("g",{id:"l151:1981",opacity:"0",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"l151:1981_fill_path",d:"M2,0v0c1.10457,0 2,0.89543 2,2v10c0,1.10457 -0.89543,2 -2,2v0c-1.10457,0 -2,-0.89543 -2,-2v-10c0,-1.10457 0.89543,-2 2,-2z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(6.123233995736766e-17,-1,1,6.123233995736766e-17,2,24)",children:v.jsx("g",{id:"l151:1983",opacity:"1",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"l151:1983_fill_path",d:"M2,0v0c1.10457,0 2,0.89543 2,2v9c0,1.10457 -0.89543,2 -2,2v0c-1.10457,0 -2,-0.89543 -2,-2v-9c0,-1.10457 0.89543,-2 2,-2z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})})]})]})})}),v.jsx("animate",{href:"#l151:1985",attributeName:"opacity",values:"0.837;0;1;0.8366;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.75;0.87;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#l151:1980",attributeName:"opacity",values:"0.467;0;1;0.4669;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.63;0.75;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#l151:1982",attributeName:"opacity",values:"0.153;0.05;1;0.1534;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.5;0.63;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#l151:1984",attributeName:"opacity",values:"0.049;0;1;0.0493;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.37;0.5;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#l151:1986",attributeName:"opacity",values:"0.01;0;1;0.0099;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.25;0.37;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#l151:1979",attributeName:"opacity",values:"0;0;1;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.13;0.25;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#l151:1981",attributeName:"opacity",values:"0;1;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.13;0.89;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#l151:1983",attributeName:"opacity",values:"1;0;1",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.89;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"})]}))},Ci=e=>{var{children:t}=e,n=Xr(e,["children"]);return v.jsxs("svg",Qr(Yr({xmlns:"http://www.w3.org/2000/svg",id:"m151:1947",width:"32",height:"32",viewBox:"0 0 32 32"},n),{children:[v.jsx("g",{transform:"matrix(1,0,0,1,0,0)",children:v.jsx("g",{id:"m151:1947",opacity:"1",style:{mixBlendMode:"normal"},children:v.jsxs("g",{children:[v.jsx("defs",{children:v.jsx("clipPath",{id:"m151:1947_clipPath",x:"-50%",y:"-50%",width:"200%",height:"200%",children:v.jsx("path",{d:"M0,0h32v0v32v0h-32v0v-32z",fill:"white",clipRule:"nonzero"})})}),v.jsxs("g",{clipPath:"url(#151:1947_clipPath)",children:[v.jsx("g",{transform:"matrix(-0.7071067811865475,-0.7071067811865476,0.7071067811865476,-0.7071067811865475,6.7429,27.3137)",children:v.jsx("g",{id:"m151:1985",opacity:"0.837",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"m151:1985_fill_path",d:"M1.5,0v0c0.82843,0 1.5,0.67157 1.5,1.5v7.1818c0,0.82843 -0.67157,1.5 -1.5,1.5v0c-0.82843,0 -1.5,-0.67157 -1.5,-1.5v-7.1818c0,-0.82843 0.67157,-1.5 1.5,-1.5z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(1,0,0,1,14.5454,21.0909)",children:v.jsx("g",{id:"m151:1980",opacity:"0.467",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"m151:1980_fill_path",d:"M1.5,0v0c0.82843,0 1.5,0.67157 1.5,1.5v6.4545c0,0.82843 -0.67157,1.5 -1.5,1.5v0c-0.82843,0 -1.5,-0.67157 -1.5,-1.5v-6.4545c0,-0.82843 0.67157,-1.5 1.5,-1.5z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(0.7071067811865476,-0.7071067811865475,0.7071067811865475,0.7071067811865476,18.0575,20.1141)",children:v.jsx("g",{id:"m151:1982",opacity:"0.153",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"m151:1982_fill_path",d:"M1.5,0v0c0.82843,0 1.5,0.67157 1.5,1.5v7.1818c0,0.82843 -0.67157,1.5 -1.5,1.5v0c-0.82843,0 -1.5,-0.67157 -1.5,-1.5v-7.1818c0,-0.82843 0.67157,-1.5 1.5,-1.5z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(6.123233995736766e-17,-1,1,6.123233995736766e-17,21.0909,17.4545)",children:v.jsx("g",{id:"m151:1984",opacity:"0.049",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"m151:1984_fill_path",d:"M1.5,0v0c0.82843,0 1.5,0.67157 1.5,1.5v6.4545c0,0.82843 -0.67157,1.5 -1.5,1.5v0c-0.82843,0 -1.5,-0.67157 -1.5,-1.5v-6.4545c0,-0.82843 0.67157,-1.5 1.5,-1.5z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(-0.7071067811865475,-0.7071067811865476,0.7071067811865476,-0.7071067811865475,20.1157,13.943)",children:v.jsx("g",{id:"m151:1986",opacity:"0.01",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"m151:1986_fill_path",d:"M1.5,0v0c0.82843,0 1.5,0.67157 1.5,1.5v7.1818c0,0.82843 -0.67157,1.5 -1.5,1.5v0c-0.82843,0 -1.5,-0.67157 -1.5,-1.5v-7.1818c0,-0.82843 0.67157,-1.5 1.5,-1.5z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(1,0,0,1,14.5454,1.4545)",children:v.jsx("g",{id:"m151:1979",opacity:"0",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"m151:1979_fill_path",d:"M1.5,0v0c0.82843,0 1.5,0.67157 1.5,1.5v6.4545c0,0.82843 -0.67157,1.5 -1.5,1.5v0c-0.82843,0 -1.5,-0.67157 -1.5,-1.5v-6.4545c0,-0.82843 0.67157,-1.5 1.5,-1.5z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(0.7071067811865476,-0.7071067811865475,0.7071067811865475,0.7071067811865476,4.6889,6.7433)",children:v.jsx("g",{id:"m151:1981",opacity:"0",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"m151:1981_fill_path",d:"M1.5,0v0c0.82843,0 1.5,0.67157 1.5,1.5v7.1818c0,0.82843 -0.67157,1.5 -1.5,1.5v0c-0.82843,0 -1.5,-0.67157 -1.5,-1.5v-7.1818c0,-0.82843 0.67157,-1.5 1.5,-1.5z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(6.123233995736766e-17,-1,1,6.123233995736766e-17,1.4545,17.4545)",children:v.jsx("g",{id:"m151:1983",opacity:"1",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"m151:1983_fill_path",d:"M1.5,0v0c0.82843,0 1.5,0.67157 1.5,1.5v6.4545c0,0.82843 -0.67157,1.5 -1.5,1.5v0c-0.82843,0 -1.5,-0.67157 -1.5,-1.5v-6.4545c0,-0.82843 0.67157,-1.5 1.5,-1.5z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})})]})]})})}),v.jsx("animate",{href:"#m151:1985",attributeName:"opacity",values:"0.837;0;1;0.8366;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.75;0.87;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#m151:1980",attributeName:"opacity",values:"0.467;0;1;0.4669;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.63;0.75;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#m151:1982",attributeName:"opacity",values:"0.153;0.05;1;0.1534;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.5;0.63;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#m151:1984",attributeName:"opacity",values:"0.049;0;1;0.0493;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.37;0.5;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#m151:1986",attributeName:"opacity",values:"0.01;0;1;0.0099;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.25;0.37;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#m151:1979",attributeName:"opacity",values:"0;0;1;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.13;0.25;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#m151:1981",attributeName:"opacity",values:"0;1;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.13;0.89;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#m151:1983",attributeName:"opacity",values:"1;0;1",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.89;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"})]}))},ji=e=>{var{children:t}=e,n=Xr(e,["children"]);return v.jsxs("svg",Qr(Yr({id:"s151:1947",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},n),{children:[v.jsx("g",{transform:"matrix(1,0,0,1,0,0)",children:v.jsx("g",{id:"s151:1947",opacity:"1",style:{mixBlendMode:"normal"},children:v.jsxs("g",{children:[v.jsx("defs",{children:v.jsx("clipPath",{id:"s151:1947_clipPath",x:"-50%",y:"-50%",width:"200%",height:"200%",children:v.jsx("path",{d:"M0,0h24v0v24v0h-24v0v-24z",fill:"white",clipRule:"nonzero"})})}),v.jsxs("g",{clipPath:"url(#151:1947_clipPath)",children:[v.jsx("g",{transform:"matrix(-0.7071067811865475,-0.7071067811865476,0.7071067811865476,-0.7071067811865475,5.64,19.78)",children:v.jsx("g",{id:"s151:1985",opacity:"0.837",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"s151:1985_fill_path",d:"M1,0v0c0.55228,0 1,0.44772 1,1v5c0,0.55228 -0.44772,1 -1,1v0c-0.55228,0 -1,-0.44772 -1,-1v-5c0,-0.55228 0.44772,-1 1,-1z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(1,0,0,1,11,15)",children:v.jsx("g",{id:"s151:1980",opacity:"0.467",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"s151:1980_fill_path",d:"M1,0v0c0.55228,0 1,0.44772 1,1v5c0,0.55228 -0.44772,1 -1,1v0c-0.55228,0 -1,-0.44772 -1,-1v-5c0,-0.55228 0.44772,-1 1,-1z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(0.7071067811865476,-0.7071067811865475,0.7071067811865475,0.7071067811865476,13.41,14.83)",children:v.jsx("g",{id:"s151:1982",opacity:"0.153",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"s151:1982_fill_path",d:"M1,0v0c0.55228,0 1,0.44772 1,1v5c0,0.55228 -0.44772,1 -1,1v0c-0.55228,0 -1,-0.44772 -1,-1v-5c0,-0.55228 0.44772,-1 1,-1z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(6.123233995736766e-17,-1,1,6.123233995736766e-17,15,13)",children:v.jsx("g",{id:"s151:1984",opacity:"0.049",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"s151:1984_fill_path",d:"M1,0v0c0.55228,0 1,0.44772 1,1v5c0,0.55228 -0.44772,1 -1,1v0c-0.55228,0 -1,-0.44772 -1,-1v-5c0,-0.55228 0.44772,-1 1,-1z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(1,0,0,1,13.41,4.22)",children:v.jsx("g",{id:"s597:11660",opacity:"0",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"s597:11660_fill_path",d:"M2.0341,6.01101c-0.46533,0.46533 -1.21977,0.46533 -1.6851,0c-0.46533,-0.46533 -0.46533,-1.21977 0,-1.6851l3.97691,-3.97691c0.46533,-0.46533 1.21977,-0.46533 1.6851,0c0.46533,0.46533 0.46533,1.21977 0,1.6851z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(1,0,0,1,11,1.9998)",children:v.jsx("g",{id:"s151:1979",opacity:"0",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"s151:1979_fill_path",d:"M1,0v0c0.55228,0 1,0.44772 1,1v5c0,0.55228 -0.44772,1 -1,1v0c-0.55228,0 -1,-0.44772 -1,-1v-5c0,-0.55228 0.44772,-1 1,-1z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(0.7071067811865476,-0.7071067811865475,0.7071067811865475,0.7071067811865476,4.22,5.64)",children:v.jsx("g",{id:"s151:1981",opacity:"0",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"s151:1981_fill_path",d:"M1,0v0c0.55228,0 1,0.44772 1,1v5c0,0.55228 -0.44772,1 -1,1v0c-0.55228,0 -1,-0.44772 -1,-1v-5c0,-0.55228 0.44772,-1 1,-1z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})}),v.jsx("g",{transform:"matrix(6.123233995736766e-17,-1,1,6.123233995736766e-17,2.0003,13)",children:v.jsx("g",{id:"s151:1983",opacity:"1",style:{mixBlendMode:"normal"},children:v.jsx("g",{children:v.jsx("g",{children:v.jsx("path",{id:"s151:1983_fill_path",d:"M1,0v0c0.55228,0 1,0.44772 1,1v5c0,0.55228 -0.44772,1 -1,1v0c-0.55228,0 -1,-0.44772 -1,-1v-5c0,-0.55228 0.44772,-1 1,-1z",fillRule:"nonzero",fill:"currentColor",fillOpacity:"1",style:{mixBlendMode:"normal"}})})})})})]})]})})}),v.jsx("animate",{href:"#s151:1985",attributeName:"opacity",values:"0.837;0;1;0.8366;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.75;0.87;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#s151:1980",attributeName:"opacity",values:"0.467;0;1;0.4669;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.63;0.75;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#s151:1982",attributeName:"opacity",values:"0.153;0.05;1;0.1534;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.5;0.63;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#s151:1984",attributeName:"opacity",values:"0.049;0;1;0.0493;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.37;0.5;1;1;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#s597:11660",attributeName:"opacity",values:"0;0;1;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.25;0.37;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#s151:1979",attributeName:"opacity",values:"0;0;1;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.13;0.25;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#s151:1981",attributeName:"opacity",values:"0;1;0;0",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.13;0.89;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"}),v.jsx("animate",{href:"#s151:1983",attributeName:"opacity",values:"1;0;1",dur:"0.8s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.89;1",keySplines:"0.5 0.35 0.15 1;0.5 0.35 0.15 1",additive:"replace",fill:"freeze"})]}))},Ti=({size:e})=>{switch(e){case"l":return v.jsx(Ei,{});case"m":return v.jsx(Ci,{});default:return v.jsx(ji,{})}},Ri={s:"tgui-421d6dab8d2c78c1",m:"tgui-a636342f03bb5c08",l:"tgui-a53583a4b6d8fde0"},Oi=({size:e="m",className:t})=>{const n=si(),r="ios"===n?Ti:ki;return v.jsx("div",{role:"status",className:Zr("tgui-0ac8c3540e603b63","ios"===n&&"tgui-562a3eae646b486d",Ri[e],t),children:v.jsx(r,{size:e})})},Ni=e=>{var{size:t}=e,n=Xr(e,["size"]);return"l"===t?v.jsx(yi,Yr({weight:"2"},n)):v.jsx(pi,Yr({level:"2",weight:"2"},n))},Pi={filled:"tgui-8a1ca9efa24f4809",bezeled:"tgui-91bda9a36246a33c",plain:"tgui-48956537c34690db",gray:"tgui-93106efd6b6d66ee",outline:"tgui-e884e36ff1faa596",white:"tgui-ba6d30cc81e39ae5"},Ii={s:"tgui-13f23a224303ddaa",m:"tgui-1a16a49d89076ff4",l:"tgui-9cef742a22f195c9"},Ai=R.forwardRef((e,t)=>{var{type:n,size:r="m",before:i,after:s,stretched:a,children:o,className:l,mode:c="filled",loading:u,Component:d="button"}=e,h=Xr(e,["type","size","before","after","stretched","children","className","mode","loading","Component"]);const f=si();return v.jsxs(ui,Qr(Yr({ref:t,type:n||"button",Component:d,className:Zr("tgui-117e77cd385a9c8d",c&&Pi[c],r&&Ii[r],"ios"===f&&"tgui-55e8aa7f5cea2280",a&&"tgui-726846958fe7f4a0",u&&"tgui-490cb0f5ec4998f3",l)},h),{children:[u&&v.jsx(Oi,{className:"tgui-014f2b7d196b090d",size:"s"}),ni(i)&&v.jsx("div",{className:"tgui-06cc94d03a7c4dd7",children:i}),v.jsx(Ni,{className:"tgui-5f6014c0f063b6de",size:r,children:o}),ni(s)&&v.jsx("div",{className:"tgui-8310172a5320ab71",children:s})]}))}),Li=e=>{var{className:t,children:n,Component:r="div"}=e,i=Xr(e,["className","children","Component"]);const s=si();return v.jsx(r,Qr(Yr({className:Zr("tgui-389a43acd684137a","ios"===s&&"tgui-cfed40fe81d34ad5",t)},i),{children:n}))},Ui=e=>{var{children:t,header:n,description:r,className:i,action:s}=e,a=Xr(e,["children","header","description","className","action"]);const o=ni(n),l=ni(r);return v.jsxs("section",Qr(Yr({className:Zr("tgui-e5c3a5b87f8b1f46",i)},a),{children:[ni(t)&&t,(o||l)&&v.jsxs("dl",{className:"tgui-9c3dbc0ef84585d4",children:[o&&v.jsx(_i,{Component:"dt",level:"3",weight:"2",children:n}),l&&v.jsx(yi,{className:"tgui-87cd6af55f73428d",Component:"dd",children:r})]}),ni(s)&&s]}))},Di=e=>{var{className:t}=e,n=Xr(e,["className"]);return v.jsx("hr",Yr({className:Zr("tgui-8af0d10d5540c6cc",t)},n))},$i=e=>{var t=ei({},ti(e));return"ios"===si()?v.jsx(gi,Yr({},t)):v.jsx(pi,Yr({level:"2"},t))},Mi=e=>{var{className:t,children:n,centered:r}=e,i=Xr(e,["className","children","centered"]);const s=si();return v.jsx("footer",Qr(Yr({className:Zr("tgui-dbb364e8ced00cc8","ios"===s&&"tgui-8c4c6f82ba895475",r&&"tgui-8ebba379083b615a",t)},i),{children:v.jsx($i,{className:"tgui-67471b69da3e3062",children:n})}))},Bi=e=>{var{large:t,className:n,children:r}=e,i=Xr(e,["large","className","children"]);const s=si(),{Default:a,Large:o}=(()=>{const e=si();return{Default:t=>{var n=ei({},ti(t));return"ios"===e?v.jsx(gi,Yr({caps:!0},n)):v.jsx(pi,Yr({level:"2",weight:"2"},n))},Large:t=>{var n=ei({},ti(t));return"ios"===e?v.jsx(pi,Yr({level:"1",weight:"2"},n)):v.jsx(yi,Yr({weight:"2"},n))}}})(),l=t?o:a;return v.jsx("header",Qr(Yr({className:Zr("tgui-d0251b46536ac046","ios"===s&&"tgui-b7217abb24e8763a",t&&"tgui-34fd1a25cc171439",n)},i),{children:v.jsx(l,{Component:"h1",className:"tgui-9c200683b316fde6",children:r})}))},Wi=e=>{var{header:t,footer:n,className:r,children:i}=e,s=Xr(e,["header","footer","className","children"]);const a=si(),o=ri(t)?v.jsx(Bi,{children:t}):t,l=ri(n)?v.jsx(Mi,{children:n}):n;return v.jsxs("section",Qr(Yr({className:Zr("tgui-3dfa44f9f78f9a22","base"===a&&"tgui-8e15431b81f6601e","ios"===a&&"tgui-97eca24324122dbc",r)},s),{children:[v.jsxs("div",{className:"tgui-db9be63c4fecf79b",children:[o,v.jsx("div",{className:"tgui-4b78bed6e925088e",children:R.Children.map(i,(e,t)=>v.jsxs(v.Fragment,{children:[e,t<R.Children.count(i)-1&&v.jsx(Di,{className:"tgui-a6d406c4dc060899"})]}))})]}),l]}))};Wi.Header=Bi,Wi.Footer=Mi;const zi=R.forwardRef((e,t)=>{var{Component:n="span",className:r}=e,i=Xr(e,["Component","className"]);return v.jsx(n,Qr(Yr({},i),{ref:t,className:Zr("tgui-b9fd8cdf929947df",r)}))}),qi=e=>{var t=ei({},ti(e));return v.jsx("svg",Qr(Yr({width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{children:v.jsx("path",{d:"M6.4 1h7.2c1.14 0 1.93 0 2.55.05.6.05.95.14 1.21.28a3 3 0 0 1 1.31 1.3c.14.27.23.62.28 1.22.05.62.05 1.41.05 2.55v7.2c0 1.14 0 1.93-.05 2.55-.05.6-.14.95-.28 1.21a3 3 0 0 1-1.3 1.31c-.27.14-.62.23-1.22.28-.62.05-1.41.05-2.55.05H6.4c-1.14 0-1.93 0-2.55-.05-.6-.05-.95-.14-1.21-.28a3 3 0 0 1-1.31-1.3 3.2 3.2 0 0 1-.28-1.22A34.7 34.7 0 0 1 1 13.6V6.4c0-1.14 0-1.93.05-2.55.05-.6.14-.95.28-1.21a3 3 0 0 1 1.3-1.31 3.2 3.2 0 0 1 1.22-.28C4.47 1 5.26 1 6.4 1Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))},Fi=e=>{var t=ei({},ti(e));return v.jsxs("svg",Qr(Yr({width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{children:[v.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.48 2.87C0 3.88 0 5.2 0 7.8v4.4c0 2.61 0 3.92.48 4.93a5 5 0 0 0 2.4 2.4c1 .47 2.3.47 4.92.47h4.4c2.61 0 3.92 0 4.93-.48a5 5 0 0 0 2.4-2.4c.47-1 .47-2.3.47-4.92V7.8c0-2.61 0-3.92-.48-4.93a5 5 0 0 0-2.4-2.4C16.13 0 14.83 0 12.2 0H7.8C5.19 0 3.88 0 2.87.48a5 5 0 0 0-2.4 2.4ZM15.7 7.46a1 1 0 0 0-1.42-1.42L8 12.34l-2.3-2.3a1 1 0 1 0-1.4 1.42l3 3a1 1 0 0 0 1.4 0l7-7Z",fill:"currentColor"}),v.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.7 7.46a1 1 0 0 0-1.4-1.42L8 12.34l-2.3-2.3a1 1 0 1 0-1.4 1.42l3 3a1 1 0 0 0 1.4 0l7-7Z",fill:"#fff"})]}))},Ki=e=>{var t=ei({},ti(e));return v.jsxs("svg",Qr(Yr({width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{children:[v.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.4 0h7.2c2.24 0 3.36 0 4.22.44a4 4 0 0 1 1.74 1.74c.44.86.44 1.98.44 4.22v7.2c0 2.24 0 3.36-.44 4.22a4 4 0 0 1-1.74 1.74c-.86.44-1.98.44-4.22.44H6.4c-2.24 0-3.36 0-4.22-.44a4 4 0 0 1-1.74-1.74C0 16.96 0 15.84 0 13.6V6.4c0-2.24 0-3.36.44-4.22A4 4 0 0 1 2.18.44C3.04 0 4.16 0 6.4 0ZM4 10a1 1 0 0 1 1-1h10a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Z",fill:"currentColor"}),v.jsx("path",{d:"M4 10a1 1 0 0 1 1-1h10a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Z",fill:"#fff"})]}))},Hi=R.forwardRef((e,t)=>{var{style:n,className:r,disabled:i,indeterminate:s}=e,a=Xr(e,["style","className","disabled","indeterminate"]);return v.jsxs("label",{className:Zr("tgui-abbb25a9ce45033e",i&&"tgui-6e9776e8c33b2626",r),children:[v.jsx(zi,Qr(Yr({},a),{ref:t,Component:"input",type:"checkbox",className:"tgui-60cf4cc79ba44c4f",disabled:i})),v.jsx(qi,{className:"tgui-21b20ecaad17ccf9","aria-hidden":!0}),v.jsx("div",{"aria-hidden":!0,className:"tgui-bca5056bf34297b0",children:s?v.jsx(Ki,{}):v.jsx(Fi,{})})]})}),Vi=(...e)=>{let t=null;return{get current(){return t},set current(n){t=n,e.forEach(e=>e&&((e,t)=>{t&&("function"==typeof t?t(e):t.current=e)})(n,e))}}};function Gi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Ji(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(tc){s(tc)}}function o(e){try{l(r.throw(e))}catch(tc){s(tc)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const Yi=()=>{var e;if(ai)return null===(e=window.Telegram)||void 0===e?void 0:e.WebApp},Qi=e=>{const{appearance:t}=R.useContext(ii),[n,r]=R.useState(e||t||(ai&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),i=R.useCallback(()=>{const e=Yi();e&&r(e.colorScheme)},[]);return R.useEffect(()=>{if(void 0!==e)return r(e),()=>{};const t=Yi();return t?(t.onEvent("themeChanged",i),()=>t.offEvent("themeChanged",i)):(e=>{if(!ai||!window.matchMedia)return()=>{};const t=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>{e(t.matches?"dark":"light")};return t.addEventListener("change",n),()=>t.removeEventListener("change",n)})(r)},[e]),n},Xi=e=>{if(void 0!==e)return e;const t=R.useContext(ii);return t.isRendered&&void 0!==t.platform?t.platform:(()=>{const e=Yi();return e&&["ios","macos"].includes(e.platform)?"ios":"base"})()},Zi=R.forwardRef((e,t)=>{var{platform:n,appearance:r,portalContainer:i,children:s,className:a}=e,o=Xr(e,["platform","appearance","portalContainer","children","className"]);const l=Qi(r),c=(e=>{if(void 0!==e)return e;const t=R.useContext(ii);return t.isRendered&&void 0!==t.portalContainer?t.portalContainer:R.useRef(null)})(i),u=Xi(n),d=(e=>{const t=R.useRef(e);return Gr(t.current,e)||(t.current=e),t.current})({platform:u,appearance:l,portalContainer:c,isRendered:!0});return v.jsx("div",Qr(Yr({ref:Vi(t,c),className:Zr("tgui-6a12827a138e8827","ios"===u&&"tgui-56dbb42c1dbd5e2b","dark"===l&&"tgui-865b921add8ee075",a)},o),{children:v.jsx(ii.Provider,{value:d,children:s})}))});function es({className:e}){const t=Bt();return v.jsx("button",{className:e,onClick:()=>{t.connected?t.disconnect():t.connect()},style:{padding:"8px 16px",borderRadius:"8px",backgroundColor:t.connected?"#ff4444":"#0088cc",color:"white",border:"none",cursor:"pointer",fontSize:"14px"},children:t.connected?"Disconnect":"Connect Wallet"})}class ts extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class ns extends ts{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class rs extends ts{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class is extends ts{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ss;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(ss||(ss={}));class as{constructor(e,{headers:t={},customFetch:n,region:r=ss.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ji(this,arguments,void 0,function*(e,t={}){var n;let r,i;try{const{headers:s,method:a,body:o,signal:l,timeout:c}=t;let u={},{region:d}=t;d||(d=this.region);const h=new URL(`${this.url}/${e}`);let f;d&&"any"!==d&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d)),o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?"undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=o):"string"==typeof o?(u["Content-Type"]="text/plain",f=o):"undefined"!=typeof FormData&&o instanceof FormData?f=o:(u["Content-Type"]="application/json",f=JSON.stringify(o)):f=!o||"string"==typeof o||"undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer||"undefined"!=typeof FormData&&o instanceof FormData?o:JSON.stringify(o);let p=l;c&&(i=new AbortController,r=setTimeout(()=>i.abort(),c),l?(p=i.signal,l.addEventListener("abort",()=>i.abort())):p=i.signal);const m=yield this.fetch(h.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:f,signal:p}).catch(e=>{throw new ns(e)}),g=m.headers.get("x-relay-error");if(g&&"true"===g)throw new rs(m);if(!m.ok)throw new is(m);let y,v=(null!==(n=m.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return y="application/json"===v?yield m.json():"application/octet-stream"===v||"application/pdf"===v?yield m.blob():"text/event-stream"===v?m:"multipart/form-data"===v?yield m.formData():yield m.text(),{data:y,error:null,response:m}}catch(s){return{data:null,error:s,response:s instanceof is||s instanceof rs?s.context:void 0}}finally{r&&clearTimeout(r)}})}}var os=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ls=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,this.urlLengthLimit=null!==(r=e.urlLengthLimit)&&void 0!==r?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{let t=null,r=null,i=null,s=e.status,a=e.statusText;if(e.ok){var o,l;if("HEAD"!==n.method){var c;const t=await e.text();""===t||(r="text/csv"===n.headers.get("Accept")||n.headers.get("Accept")&&(null===(c=n.headers.get("Accept"))||void 0===c?void 0:c.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}const u=null===(o=n.headers.get("Prefer"))||void 0===o?void 0:o.match(/count=(exact|planned|estimated)/),d=null===(l=e.headers.get("content-range"))||void 0===l?void 0:l.split("/");u&&d&&d.length>1&&(i=parseInt(d[1])),n.isMaybeSingle&&"GET"===n.method&&Array.isArray(r)&&(r.length>1?(t={code:"PGRST116",details:`Results contain ${r.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},r=null,i=null,s=406,a="Not Acceptable"):r=1===r.length?r[0]:null)}else{var u;const i=await e.text();try{t=JSON.parse(i),Array.isArray(t)&&404===e.status&&(r=[],t=null,s=200,a="OK")}catch(d){404===e.status&&""===i?(s=204,a="No Content"):t={message:i}}if(t&&n.isMaybeSingle&&(null==t||null===(u=t.details)||void 0===u?void 0:u.includes("0 rows"))&&(t=null,s=200,a="OK"),t&&n.shouldThrowOnError)throw new os(t)}return{error:t,data:r,count:i,status:s,statusText:a}});return this.shouldThrowOnError||(r=r.catch(e=>{var t;let n="",r="",i="";const s=null==e?void 0:e.cause;if(s){var a,o,l,c;const t=null!==(a=null==s?void 0:s.message)&&void 0!==a?a:"",r=null!==(o=null==s?void 0:s.code)&&void 0!==o?o:"";n=`${null!==(l=null==e?void 0:e.name)&&void 0!==l?l:"FetchError"}: ${null==e?void 0:e.message}`,n+=`\n\nCaused by: ${null!==(c=null==s?void 0:s.name)&&void 0!==c?c:"Error"}: ${t}`,r&&(n+=` (${r})`),(null==s?void 0:s.stack)&&(n+=`\n${s.stack}`)}else{var u;n=null!==(u=null==e?void 0:e.stack)&&void 0!==u?u:""}const d=this.url.toString().length;return"AbortError"===(null==e?void 0:e.name)||"ABORT_ERR"===(null==e?void 0:e.code)?(i="",r="Request was aborted (timeout or manual cancellation)",d>this.urlLengthLimit&&(r+=`. Note: Your request URL is ${d} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):"HeadersOverflowError"!==(null==s?void 0:s.name)&&"UND_ERR_HEADERS_OVERFLOW"!==(null==s?void 0:s.code)||(i="",r="HTTP headers exceeded server limits (typically 16KB)",d>this.urlLengthLimit&&(r+=`. Your request URL is ${d} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:n,hint:r,code:i},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},cs=class extends ls{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=void 0===r?"offset":`${r}.offset`,s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.get("Accept"))&&void 0!==a?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const us=new RegExp("[,()]");var ds=class extends cs{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&us.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&us.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const s=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},hs=class{constructor(e,{headers:t={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=null!=t?t:{},i=n?"HEAD":"GET";let s=!1;const a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",a),r&&l.append("Prefer",`count=${r}`),new ds({method:i,url:o,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const{url:i,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer",`count=${t}`),n||s.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);i.searchParams.set("columns",e.join(","))}}return new ds({method:"POST",url:i,headers:s,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const{url:a,headers:o}=this.cloneRequestState();if(o.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==t&&a.searchParams.set("on_conflict",t),r&&o.append("Prefer",`count=${r}`),i||o.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);a.searchParams.set("columns",e.join(","))}}return new ds({method:"POST",url:a,headers:o,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;const{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new ds({method:"PATCH",url:r,headers:i,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const{url:n,headers:r}=this.cloneRequestState();return e&&r.append("Prefer",`count=${e}`),new ds({method:"DELETE",url:n,headers:r,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function fs(e){return(fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ps(e){var t=function(e,t){if("object"!=fs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=fs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fs(t)?t:t+""}function ms(e,t,n){return(t=ps(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(n),!0).forEach(function(t){ms(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var vs=class e{constructor(e,{headers:t={},schema:n,fetch:r,timeout:i,urlLengthLimit:s=8e3}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.urlLengthLimit=s;const a=null!=r?r:globalThis.fetch;this.fetch=void 0!==i&&i>0?(e,t)=>{const n=new AbortController,r=setTimeout(()=>n.abort(),i),s=null==t?void 0:t.signal;if(s){if(s.aborted)return clearTimeout(r),a(e,t);const i=()=>{clearTimeout(r),n.abort()};return s.addEventListener("abort",i,{once:!0}),a(e,ys(ys({},t),{},{signal:n.signal})).finally(()=>{clearTimeout(r),s.removeEventListener("abort",i)})}return a(e,ys(ys({},t),{},{signal:n.signal})).finally(()=>clearTimeout(r))}:a}from(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");return new hs(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){var s;let a;const o=new URL(`${this.url}/rpc/${e}`);let l;const c=e=>null!==e&&"object"==typeof e&&(!Array.isArray(e)||e.some(c)),u=n&&Object.values(t).some(c);u?(a="POST",l=t):n||r?(a=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{o.searchParams.append(e,t)})):(a="POST",l=t);const d=new Headers(this.headers);return u?d.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&d.set("Prefer",`count=${i}`),new ds({method:a,url:o,headers:d,schema:this.schemaName,body:l,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch,urlLengthLimit:this.urlLengthLimit})}};class bs{constructor(){}static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const ws="2.0.0",_s=ws,Ss=1e4;var xs,ks,Es,Cs,js,Ts;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(xs||(xs={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(ks||(ks={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Es||(Es={})),function(e){e.websocket="websocket"}(Cs||(Cs={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(js||(js={}));class Rs{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"==typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:{},i=(new TextEncoder).encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(e,t,n){var r,i;const s=e.topic,a=null!==(r=e.ref)&&void 0!==r?r:"",o=null!==(i=e.join_ref)&&void 0!==i?i:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},u=0===Object.keys(c).length?"":JSON.stringify(c);if(o.length>255)throw new Error(`joinRef length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`metadata length ${u.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+a.length+s.length+l.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let f=new DataView(h),p=0;f.setUint8(p++,this.KINDS.userBroadcastPush),f.setUint8(p++,o.length),f.setUint8(p++,a.length),f.setUint8(p++,s.length),f.setUint8(p++,l.length),f.setUint8(p++,u.length),f.setUint8(p++,t),Array.from(o,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(a,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(s,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(l,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(u,e=>f.setUint8(p++,e.charCodeAt(0)));var m=new Uint8Array(h.byteLength+n.byteLength);return m.set(new Uint8Array(h),0),m.set(new Uint8Array(n),h.byteLength),m.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"==typeof e){const n=JSON.parse(e),[r,i,s,a,o]=n;return t({join_ref:r,ref:i,topic:s,event:a,payload:o})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),r=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,r)}_decodeUserBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2),s=t.getUint8(3),a=t.getUint8(4);let o=this.HEADER_LENGTH+4;const l=n.decode(e.slice(o,o+r));o+=r;const c=n.decode(e.slice(o,o+i));o+=i;const u=n.decode(e.slice(o,o+s));o+=s;const d=e.slice(o,e.byteLength),h=a===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,f={type:this.BROADCAST_EVENT,event:c,payload:h};return s>0&&(f.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e))):{}}}class Os{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Ts||(Ts={}));const Ns=(e,t,n={})=>{var r;const i=null!==(r=n.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((n,r)=>(n[r]=Ps(r,e,t,i),n),{}):{}},Ps=(e,t,n,r)=>{const i=t.find(t=>t.name===e),s=null==i?void 0:i.type,a=n[e];return s&&!r.includes(s)?Is(s,a):As(a)},Is=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return $s(t,n)}switch(e){case Ts.bool:return Ls(t);case Ts.float4:case Ts.float8:case Ts.int2:case Ts.int4:case Ts.int8:case Ts.numeric:case Ts.oid:return Us(t);case Ts.json:case Ts.jsonb:return Ds(t);case Ts.timestamp:return Ms(t);case Ts.abstime:case Ts.date:case Ts.daterange:case Ts.int4range:case Ts.int8range:case Ts.money:case Ts.reltime:case Ts.text:case Ts.time:case Ts.timestamptz:case Ts.timetz:case Ts.tsrange:case Ts.tstzrange:default:return As(t)}},As=e=>e,Ls=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Us=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ds=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},$s=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const s=e.slice(1,n);try{r=JSON.parse("["+s+"]")}catch(i){r=s?s.split(","):[]}return r.map(e=>Is(t,e))}return e},Ms=e=>"string"==typeof e?e.replace(" ","T"):e,Bs=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ws{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zs,qs,Fs,Ks;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(zs||(zs={}));class Hs{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hs.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=Hs.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Hs.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),s=this.transformState(t),a={},o={};return this.map(i,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const n=i[e];if(n){const r=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),s=t.filter(e=>i.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);s.length>0&&(a[e]=s),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const s=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),s.length>0){const n=e[t].map(e=>e.presence_ref),r=s.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,s,r)}),this.map(s,(t,n)=>{let i=e[t];if(!i)return;const s=n.map(e=>e.presence_ref);i=i.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(qs||(qs={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Fs||(Fs={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Ks||(Ks={}));class Vs{constructor(e,t={config:{}},n){var r,i;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ks.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ws(this,Es.join,this.params,this.timeout),this.rejoinTimer=new Os(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ks.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ks.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=ks.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ks.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=ks.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Es.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Hs(this),this.broadcastEndpointURL=Bs(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(i=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ks.closed){const{config:{broadcast:s,presence:a,private:o}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[Fs.PRESENCE]&&this.bindings[Fs.PRESENCE].length>0||!0===(null===(i=this.params.config.presence)||void 0===i?void 0:i.enabled),u={},d={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(Ks.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Ks.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket._isManualToken()||this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,i=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,s=[];for(let n=0;n<i;n++){const i=r[n],{filter:{event:a,schema:o,table:l,filter:c}}=i,u=t&&t[n];if(!(u&&u.event===a&&Vs.isFilterValueEqual(u.schema,o)&&Vs.isFilterValueEqual(u.table,l)&&Vs.isFilterValueEqual(u.filter,c)))return this.unsubscribe(),this.state=ks.errored,void(null==e||e(Ks.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e(Ks.SUBSCRIBED))}null==e||e(Ks.SUBSCRIBED)}).receive("error",t=>{this.state=ks.errored,null==e||e(Ks.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Ks.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===ks.joined&&e===Fs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var r;if(null==t)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const s={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(r=n.timeout)&&void 0!==r?r:this.timeout);if(202===a.status)return{success:!0};let o=a.statusText;try{const e=await a.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,i,s;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===s?void 0:s.ack)||n("ok"),a.receive("ok",()=>n("ok")),a.receive("error",()=>n("error")),a.receive("timeout",()=>n("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,l,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ks.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Es.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Ws(this,Es.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ks.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),s}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Ws(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const s=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=Es;if(n&&[a,o,l,c].indexOf(s)>=0&&n!==this._joinRef())return;let u=this._onMessage(s,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===s}).map(e=>e.callback(u,n)):null===(i=this.bindings[s])||void 0===i||i.filter(e=>{var n,r,i,a,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return s&&(null===(r=t.ids)||void 0===r?void 0:r.includes(s))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:s}=e,a={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:s};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===ks.closed}_isJoined(){return this.state===ks.joined}_isJoining(){return this.state===ks.joining}_isLeaving(){return this.state===ks.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Vs.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(null!=e?e:void 0)===(null!=t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Es.close,{},e)}_onError(e){this._on(Es.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ks.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Ns(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Ns(e.columns,e.old_record)),t}}const Gs=()=>{},Js=25e3,Ys=10,Qs=100,Xs=[1e3,2e3,5e3,1e4];class Zs{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ss,this.transport=null,this.heartbeatIntervalMs=Js,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gs,this.ref=0,this.reconnectTimer=null,this.vsn=_s,this.logger=Gs,this.conn=null,this.sendBuffer=[],this.serializer=new Rs,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Cs.websocket}`,this.httpEndpoint=Bs(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bs.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return"ok"===t&&this._remove(e),0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case xs.connecting:return js.Connecting;case xs.open:return js.Open;case xs.closing:return js.Closing;default:return js.Closed}}isConnected(){return this.connectionState()===js.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new Vs(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(tc){this.log("error","error in heartbeat callback",tc)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Qs)}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(tc){this.log("error","error in heartbeat callback",tc)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(tc){this.log("error","error in heartbeat callback",tc)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event&&e.ref&&e.ref===this.pendingHeartbeatRef){const t=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error",t)}catch(tc){this.log("error","error in heartbeat callback",tc)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:t,event:n,payload:r,ref:i}=e,s=i?`(${i})`:"",a=r.status||"";this.log("receive",`${a} ${t} ${n} ${s}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===xs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===xs.open||this.conn.readyState===xs.connecting)try{this.conn.close()}catch(tc){this.log("error","Error closing connection",tc)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`);(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(tc){this.log("error","error in heartbeat callback",tc)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Es.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,n=!1;if(e)t=e,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(tc){this.log("error","Error fetching access token from callback",tc),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.95.3"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(Es.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(tc){this.log("error",`error in ${e} callback`,tc)}})}catch(tc){this.log("error",`error triggering ${e} callbacks`,tc)}}_setupReconnectionTimer(){this.reconnectTimer=new Os(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ys)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,i,s,a,o,l,c,u,d,h;switch(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null==e?void 0:e.timeout)&&void 0!==n?n:Ss,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:Js,this.worker=null!==(i=null==e?void 0:e.worker)&&void 0!==i&&i,this.accessToken=null!==(s=null==e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=null==e?void 0:e.heartbeatCallback)&&void 0!==a?a:Gs,this.vsn=null!==(o=null==e?void 0:e.vsn)&&void 0!==o?o:_s,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null==e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>Xs[e-1]||1e4,this.vsn){case"1.0.0":this.encode=null!==(c=null==e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(u=null==e?void 0:e.decode)&&void 0!==u?u:(e,t)=>t(JSON.parse(e));break;case ws:this.encode=null!==(d=null==e?void 0:e.encode)&&void 0!==d?d:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null==e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}var ea=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===t.icebergType?.includes("CommitState")}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function ta(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:a}){const o=function(e,t,n){const r=new URL(t,e);if(n)for(const[i,s]of Object.entries(n))void 0!==s&&r.searchParams.set(i,s);return r.toString()}(e.baseUrl,r,i),l=await async function(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}(e.auth),c=await t(o,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...a},body:s?JSON.stringify(s):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!c.ok){const e=d?h:void 0,t=e?.error;throw new ea(t?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:t?.type,icebergCode:t?.code,details:e})}return{status:c.status,headers:c.headers,data:h}}}}function na(e){return e.join("")}var ra=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:na(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${na(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${na(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${na(e.namespace)}`}),!0}catch(t){if(t instanceof ea&&404===t.status)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof ea&&409===n.status)return;throw n}}};function ia(e){return e.join("")}var sa=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ia(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ia(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ia(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ia(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ia(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ia(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof ea&&404===n.status)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof ea&&409===n.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},aa=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=ta({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new ra(this.client,t),this.tableOps=new sa(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},oa=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name="vectors"===t?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function la(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}var ca=class extends oa{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name="vectors"===r?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ua=class extends oa{constructor(e,t,n="storage"){super(e,n),this.name="vectors"===n?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const da=e=>{if(Array.isArray(e))return e.map(e=>da(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=da(n)}),t};function ha(e){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fa(e){var t=function(e,t){if("object"!=ha(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ha(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ha(t)?t:t+""}function pa(e,t,n){return(t=fa(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(n),!0).forEach(function(t){pa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const ya=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},va=(e,t,n,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&"HEAD"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(i.headers=ga({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,(null==t?void 0:t.duplex)&&(i.duplex=t.duplex),ga(ga({},i),n)):ga(ga({},i),n)};async function ba(e,t,n,r,i,s,a){return new Promise((o,l)=>{e(n,va(t,r,i,s)).then(e=>{if(!e.ok)throw e;if(null==r?void 0:r.noResolveJson)return e;if("vectors"===a){const t=e.headers.get("content-type");if("0"===e.headers.get("content-length")||204===e.status)return{};if(!t||!t.includes("application/json"))return{}}return e.json()}).then(e=>o(e)).catch(e=>(async(e,t,n,r)=>{if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==n?void 0:n.noResolveJson)){const n=e,i=n.status||500;if("function"==typeof n.json)n.json().then(e=>{const n=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||i+"";t(new ca(ya(e),i,n,r))}).catch(()=>{if("vectors"===r){const e=i+"";t(new ca(n.statusText||`HTTP ${i} error`,i,e,r))}else{const e=i+"";t(new ca(n.statusText||`HTTP ${i} error`,i,e,r))}});else{const e=i+"";t(new ca(n.statusText||`HTTP ${i} error`,i,e,r))}}else t(new ua(ya(e),e,r))})(e,l,r,a))})}function wa(e="storage"){return{get:async(t,n,r,i)=>ba(t,"GET",n,r,i,void 0,e),post:async(t,n,r,i,s)=>ba(t,"POST",n,i,s,r,e),put:async(t,n,r,i,s)=>ba(t,"PUT",n,i,s,r,e),head:async(t,n,r,i)=>ba(t,"HEAD",n,ga(ga({},r),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,n,r,i,s)=>ba(t,"DELETE",n,i,s,r,e)}}const _a=wa("storage"),{get:Sa,post:xa,put:ka,head:Ea,remove:Ca}=_a,ja=wa("vectors");var Ta=class{constructor(e,t={},n,r="storage"){var i;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=(i=n)?(...e)=>i(...e):(...e)=>fetch(...e),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){try{return{data:await e(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(la(t))return{data:null,error:t};throw t}}},Ra=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(la(e))return{data:null,error:e};throw e}}};let Oa;Oa=Symbol.toStringTag;var Na=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Oa]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ra(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await(await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(la(e))return{data:null,error:e};throw e}}};const Pa={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ia={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Aa=class extends Ta{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var i=this;return i.handleOperation(async()=>{let s;const a=ga(ga({},Ia),r);let o=ga(ga({},i.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const l=a.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(l))),("undefined"!=typeof ReadableStream&&s instanceof ReadableStream||s&&"object"==typeof s&&"pipe"in s&&"function"==typeof s.pipe)&&!a.duplex&&(a.duplex="half")),(null==r?void 0:r.headers)&&(o=ga(ga({},o),r.headers));const c=i._removeEmptyFolders(t),u=i._getFinalPath(c),d=await("PUT"==e?ka:xa)(i.fetch,`${i.url}/object/${u}`,s,ga({headers:o},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{path:c,id:d.Id,fullPath:d.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var i=this;const s=i._removeEmptyFolders(e),a=i._getFinalPath(s),o=new URL(i.url+`/object/upload/sign/${a}`);return o.searchParams.set("token",t),i.handleOperation(async()=>{let e;const t=ga({upsert:Ia.upsert},r),a=ga(ga({},i.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType),{path:s,fullPath:(await ka(i.fetch,o.toString(),e,{headers:a})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const i=ga({},n.headers);(null==t?void 0:t.upsert)&&(i["x-upsert"]="true");const s=await xa(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+s.url),o=a.searchParams.get("token");if(!o)throw new oa("No token returned by API");return{signedUrl:a.toString(),path:e,token:o}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await xa(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await xa(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(e),s=await xa(r.fetch,`${r.url}/object/sign/${i}`,ga({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:r.headers});const a=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${s.signedURL}${a}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const i=await xa(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return i.map(e=>ga(ga({},e),{},{signedUrl:e.signedURL?encodeURI(`${r.url}${e.signedURL}${s}`):null}))})}download(e,t,n){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=i?`?${i}`:"",a=this._getFinalPath(e);return new Na(()=>Sa(this.fetch,`${this.url}/${r}/${a}${s}`,{headers:this.headers,noResolveJson:!0},n),this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>da(await Sa(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await Ea(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(la(r)&&r instanceof ua){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&r.push(i);const s=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&r.push(a);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Ca(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const i=ga(ga(ga({},Pa),t),{},{prefix:e||""});return await xa(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=ga({},e);return await xa(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const La={"X-Client-Info":"storage-js/2.95.3"};var Ua=class extends Ta{constructor(e,t={},n,r){const i=new URL(e);(null==r?void 0:r.useNewHostname)&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));super(i.href.replace(/\/$/,""),ga(ga({},La),t),n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await Sa(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Sa(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await xa(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await ka(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await xa(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Ca(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Da=class extends Ta{constructor(e,t={},n){super(e.replace(/\/$/,""),ga(ga({},La),t),n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await xa(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&n.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&n.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&n.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&n.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&n.set("search",e.search);const r=n.toString(),i=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await Sa(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Ca(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!(e=>!(!e||"string"!=typeof e)&&!(0===e.length||e.length>100)&&e.trim()===e&&!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e))(e))throw new oa("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new aa({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(e,t){const n=e[t];return"function"!=typeof n?n:async(...t)=>{try{return{data:await n.apply(e,t),error:null}}catch(i){if(r)throw i;return{data:null,error:i}}}}})}},$a=class extends Ta{constructor(e,t={},n){super(e.replace(/\/$/,""),ga(ga({},La),{},{"Content-Type":"application/json"},t),n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await ja.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await ja.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await ja.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await ja.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},Ma=class extends Ta{constructor(e,t={},n){super(e.replace(/\/$/,""),ga(ga({},La),{},{"Content-Type":"application/json"},t),n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await ja.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await ja.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return t.handleOperation(async()=>await ja.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await ja.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await ja.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},Ba=class extends Ta{constructor(e,t={},n){super(e.replace(/\/$/,""),ga(ga({},La),{},{"Content-Type":"application/json"},t),n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await ja.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await ja.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await ja.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await ja.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},Wa=class extends Ba{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new za(this.url,this.headers,e,this.fetch)}async createBucket(e){return(()=>super.createBucket)().call(this,e)}async getBucket(e){return(()=>super.getBucket)().call(this,e)}async listBuckets(e={}){return(()=>super.listBuckets)().call(this,e)}async deleteBucket(e){return(()=>super.deleteBucket)().call(this,e)}},za=class extends $a{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){return(()=>super.createIndex)().call(this,ga(ga({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(e={}){return(()=>super.listIndexes)().call(this,ga(ga({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return(()=>super.getIndex)().call(this,this.vectorBucketName,e)}async deleteIndex(e){return(()=>super.deleteIndex)().call(this,this.vectorBucketName,e)}index(e){return new qa(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},qa=class extends Ma{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=this;return(()=>super.putVectors)().call(t,ga(ga({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(e){var t=this;return(()=>super.getVectors)().call(t,ga(ga({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(e={}){var t=this;return(()=>super.listVectors)().call(t,ga(ga({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(e){var t=this;return(()=>super.queryVectors)().call(t,ga(ga({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(e){var t=this;return(()=>super.deleteVectors)().call(t,ga(ga({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},Fa=class extends Ua{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new Aa(this.url,this.headers,e,this.fetch)}get vectors(){return new Wa(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Da(this.url+"/iceberg",this.headers,this.fetch)}};const Ka="2.95.3",Ha=3e4,Va=9e4,Ga={"X-Client-Info":`gotrue-js/${Ka}`},Ja="X-Supabase-Api-Version",Ya={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Qa=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Xa extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Za(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class eo extends Xa{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class to extends Xa{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class no extends Xa{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class ro extends no{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function io(e){return Za(e)&&"AuthSessionMissingError"===e.name}class so extends no{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ao extends no{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class oo extends no{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lo extends no{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class co extends no{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class uo extends no{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ho(e){return Za(e)&&"AuthRetryableFetchError"===e.name}class fo extends no{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class po extends no{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),go=" \t\n\r=".split(""),yo=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<go.length;t+=1)e[go[t].charCodeAt(0)]=-2;for(let t=0;t<mo.length;t+=1)e[mo[t].charCodeAt(0)]=t;return e})();function vo(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(mo[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(mo[e]),t.queuedBits-=6}}function bo(e,t,n){const r=yo[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function wo(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let a=0;a<e.length;a+=1)bo(e.charCodeAt(a),i,s);return t.join("")}function _o(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function So(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)bo(e.charCodeAt(i),n,r);return new Uint8Array(t)}function xo(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}_o(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function ko(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>vo(e,n,r)),vo(null,n,r),t.join("")}const Eo=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Co={tested:!1,writable:!1},jo=()=>{if(!Eo())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(tc){return!1}if(Co.tested)return Co.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Co.tested=!0,Co.writable=!0}catch(tc){Co.tested=!0,Co.writable=!1}return Co.writable};const To=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Ro=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Oo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},No=async(e,t)=>{await e.removeItem(t)};class Po{constructor(){this.promise=new Po.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Io(e){const t=e.split(".");if(3!==t.length)throw new po("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Qa.test(t[n]))throw new po("JWT not in base64url format");return{header:JSON.parse(wo(t[0])),payload:JSON.parse(wo(t[1])),signature:So(t[2]),raw:{header:t[0],payload:t[1]}}}function Ao(e){return("0"+e.toString(16)).substr(-2)}async function Lo(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Uo(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Ao).join("")}();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Ro(e,`${t}-code-verifier`,i);const s=await Lo(r);return[s,r===s?"plain":"s256"]}Po.promiseConstructor=Promise;const Do=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const $o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mo(e){if(!$o.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bo(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Wo(e){return JSON.parse(JSON.stringify(e))}const zo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),qo=[502,503,504];async function Fo(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new uo(zo(e),0);if(qo.includes(e.status))throw new uo(zo(e),e.status);let r,i;try{r=await e.json()}catch(tc){throw new to(zo(tc),tc)}const s=function(e){const t=e.headers.get(Ja);if(!t)return null;if(!t.match(Do))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(tc){return null}}(e);if(s&&s.getTime()>=Ya.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?i=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new fo(zo(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new ro}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new fo(zo(r),e.status,r.weak_password.reasons);throw new eo(zo(r),e.status||500,i)}async function Ko(e,t,n,r){var i;const s=Object.assign({},null==r?void 0:r.headers);s[Ja]||(s[Ja]=Ya.name),(null==r?void 0:r.jwt)&&(s.Authorization=`Bearer ${r.jwt}`);const a=null!==(i=null==r?void 0:r.query)&&void 0!==i?i:{};(null==r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,r,i,s){const a=((e,t,n,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))})(t,r,i,s);let o;try{o=await e(n,Object.assign({},a))}catch(tc){throw console.error(tc),new uo(zo(tc),0)}o.ok||await Fo(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(tc){await Fo(tc)}}(e,t,n+o,{headers:s,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Ho(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Vo(e){const t=Ho(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Go(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Jo(e){return{data:e,error:null}}function Yo(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=Gi(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},user:Object.assign({},a)},error:null}}function Qo(e){return e}const Xo=["global","local","others"];class Zo{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=To(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Xo[0]){if(Xo.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xo.join(", ")}`);try{return await Ko(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Za(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Ko(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Go})}catch(n){if(Za(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Gi(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await Ko(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Yo,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Za(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ko(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Go})}catch(t){if(Za(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,s,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Ko(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:Qo});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Za(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Mo(e);try{return await Ko(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Go})}catch(t){if(Za(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Mo(e);try{return await Ko(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Go})}catch(n){if(Za(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Mo(e);try{return await Ko(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Go})}catch(n){if(Za(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Mo(e.userId);try{const{data:t,error:n}=await Ko(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Za(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Mo(e.userId),Mo(e.id);try{return{data:await Ko(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Za(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,r,i,s,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Ko(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:Qo});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Za(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Ko(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Za(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Ko(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Za(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Ko(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(n){if(Za(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ko(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Za(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Ko(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Za(t))return{data:null,error:t};throw t}}}function el(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const tl=!!(globalThis&&jo()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class nl extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rl extends nl{}async function il(e,t,n){tl&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),tl&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw tl&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new rl(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(tl)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(tc){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",tc)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}tl&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{tl&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}function sl(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function al(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class ol extends Error{constructor({message:e,code:t,cause:n,name:r}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(i=null!=r?r:n instanceof Error?n.name:void 0)&&void 0!==i?i:"Unknown Error",this.code=t}}class ll extends ol{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function cl({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new ol({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(n=s.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new ol({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(r=s.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new ol({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(i=s.authenticatorSelection)||void 0===i?void 0:i.userVerification))return new ol({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new ol({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new ol({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===s.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new ol({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ol({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!gl(t))return new ol({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(s.rp.id!==t)return new ol({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ol({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new ol({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ol({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function ul({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new ol({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new ol({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!gl(t))return new ol({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rpId!==t)return new ol({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new ol({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ol({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const dl=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function hl(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=Gi(e,["challenge","user","excludeCredentials"]),s=So(t).buffer,a=Object.assign(Object.assign({},n),{id:So(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:So(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function fl(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Gi(e,["challenge","allowCredentials"]),i=So(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];s.allowCredentials[e]=Object.assign(Object.assign({},t),{id:So(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function pl(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:ko(new Uint8Array(e.response.attestationObject)),clientDataJSON:ko(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function ml(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ko(new Uint8Array(i.authenticatorData)),clientDataJSON:ko(new Uint8Array(i.clientDataJSON)),signature:ko(new Uint8Array(i.signature)),userHandle:i.userHandle?ko(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function gl(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function yl(){var e,t;return!!(Eo()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const vl={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},bl={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wl(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),n=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(const i of e)if(i)for(const e in i){const s=i[e];if(void 0!==s)if(Array.isArray(s))r[e]=s;else if(n(s))r[e]=s;else if(t(s)){const n=r[e];t(n)?r[e]=wl(n,s):r[e]=wl(s)}else r[e]=s}return r}class _l{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:r},i){var s;try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:o};const l=null!=r?r:dl.createNewAbortSignal();if("create"===a.webauthn.type){const{user:e}=a.webauthn.credential_options.publicKey;if(!e.name){const t=n;if(t)e.name=`${e.id}:${t}`;else{const t=(await this.client.getUser()).data.user,n=(null===(s=null==t?void 0:t.user_metadata)||void 0===s?void 0:s.name)||(null==t?void 0:t.email)||(null==t?void 0:t.id)||"User";e.name=`${e.id}:${n}`}}e.displayName||(e.displayName=e.name)}switch(a.webauthn.type){case"create":{const t=function(e,t){return wl(vl,e,t||{})}(a.webauthn.credential_options.publicKey,null==i?void 0:i.create),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ll("Browser returned unexpected credential type",t)}:{data:null,error:new ll("Empty credential response",t)}}catch(t){return{data:null,error:cl({error:t,options:e})}}}({publicKey:t,signal:l});return n?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}case"request":{const t=function(e,t){return wl(bl,e,t||{})}(a.webauthn.credential_options.publicKey,null==i?void 0:i.request),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ll("Browser returned unexpected credential type",t)}:{data:null,error:new ll("Empty credential response",t)}}catch(t){return{data:null,error:ul({error:t,options:e})}}}(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:t,signal:l}));return n?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}}}catch(a){return Za(a)?{data:null,error:a}:{data:null,error:new to("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}={}},i){if(!t)return{data:null,error:new Xa("rpId is required for WebAuthn authentication")};try{if(!yl())return{data:null,error:new to("Browser does not support WebAuthn",null)};const{data:s,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:r},{request:i});if(!s)return{data:null,error:a};const{webauthn:o}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:n,credential_response:o.credential_response}})}catch(s){return Za(s)?{data:null,error:s}:{data:null,error:new to("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}={}},i){if(!t)return{data:null,error:new Xa("rpId is required for WebAuthn registration")};try{if(!yl())return{data:null,error:new to("Browser does not support WebAuthn",null)};const{data:s,error:a}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(t=>{var n;return null===(n=t.data)||void 0===n?void 0:n.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:a};const{data:o,error:l}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:r},{create:i});return o?this._verify({factorId:s.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:n,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(s){return Za(s)?{data:null,error:s}:{data:null,error:new to("Unexpected error in register",s)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(tc){"undefined"!=typeof self&&(self.globalThis=self)}}();const Sl={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ga,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function xl(e,t,n){return await n()}const kl={};class El{get jwks(){var e,t;return null!==(t=null===(e=kl[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){kl[this.storageKey]=Object.assign(Object.assign({},kl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=kl[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){kl[this.storageKey]=Object.assign(Object.assign({},kl[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Sl),e);if(this.storageKey=i.storageKey,this.instanceID=null!==(t=El.nextInstanceID[this.storageKey])&&void 0!==t?t:0,El.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,"function"==typeof i.debug&&(this.logger=i.debug),this.instanceID>0&&Eo()){const e=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Zo({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=To(i.fetch),this.lock=i.lock||xl,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Eo()&&(null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===n?void 0:n.locks)?this.lock=il:this.lock=xl,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new _l(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:jo()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=el(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=el(this.memoryStorage)),Eo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(tc){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",tc)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e);try{await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}catch(t){this._debug("#broadcastChannel","error",t)}})}this.initialize().catch(e=>{this._debug("#initialize()","error",e)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ka}) ${(new Date).toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},n="none";if(Eo()&&(t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(tc){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Eo()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return Za(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return{error:i}}const{session:s,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Za(t)?this._returnResult({error:t}):this._returnResult({error:new to("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await Ko(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Ho}),{data:s,error:a}=i;if(a||!s)return this._returnResult({data:{user:null,session:null},error:a});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(i){if(Za(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:n,password:r,options:s}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await Uo(this.storage,this.storageKey)),i=await Ko(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:o},xform:Ho})}else{if(!("phone"in e))throw new ao("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:a}=e;i=await Ko(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null==a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Ho})}}const{data:s,error:a}=i;if(a||!s)return await No(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(i){if(await No(this.storage,`${this.storageKey}-code-verifier`),Za(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:i}=e;t=await Ko(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Vo})}else{if(!("phone"in e))throw new ao("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:i}=e;t=await Ko(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Vo})}}const{data:n,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!n||!n.session||!n.user){const e=new so;return this._returnResult({data:{user:null,session:null},error:e})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(Za(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,r,i,s,a,o,l,c,u,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:p,options:m}=e;let g;if(Eo())if("object"==typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!=typeof d||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const y=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href),v=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!v||0===v.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=sl(v[0]);let w=null===(n=null==m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!w){const e=await g.request({method:"eth_chainId"});w=parseInt(e,16)}h=function(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const f=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${sl(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let p=`URI: ${d}\nVersion: ${h}\nChain ID: ${n}${a?`\nNonce: ${a}`:""}\nIssued At: ${s.toISOString()}`;if(i&&(p+=`\nExpiration Time: ${i.toISOString()}`),o&&(p+=`\nNot Before: ${o.toISOString()}`),l&&(p+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}p+=e}return`${f}\n${p}`}({domain:y.host,address:b,statement:p,uri:y.href,version:"1",chainId:w,nonce:null===(r=null==m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(s=null===(i=null==m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:new Date,expirationTime:null===(a=null==m?void 0:m.signInWithEthereum)||void 0===a?void 0:a.expirationTime,notBefore:null===(o=null==m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null==m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await g.request({method:"personal_sign",params:[al(h),b]})}try{const{data:t,error:n}=await Ko(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:Ho});if(n)throw n;if(!t||!t.session||!t.user){const e=new so;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(p){if(Za(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var t,n,r,i,s,a,o,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let y;if(Eo())if("object"==typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in y&&"function"==typeof y.signMessage&&"publicKey"in y&&"object"==typeof y&&y.publicKey&&"toBase58"in y.publicKey&&"function"==typeof y.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${v.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(r=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(f),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await Ko(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:ko(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Ho});if(n)throw n;if(!t||!t.session||!t.user){const e=new so;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(m){if(Za(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const t=await Oo(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{if(!n&&"pkce"===this.flowType)throw new co;const{data:t,error:i}=await Ko(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ho});if(await No(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!t||!t.session||!t.user){const e=new so;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:i})}catch(i){if(await No(this.storage,`${this.storageKey}-code-verifier`),Za(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:s}=e,a=await Ko(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Ho}),{data:o,error:l}=a;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new so;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(Za(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,r,i,s;try{if("email"in e){const{email:r,options:i}=e;let s=null,a=null;"pkce"===this.flowType&&([s,a]=await Uo(this.storage,this.storageKey));const{error:o}=await Ko(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null==i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:a},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await Ko(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(i=null==n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(s=null==n?void 0:n.channel)&&void 0!==s?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o})}throw new ao("You must provide either an email or phone number.")}catch(a){if(await No(this.storage,`${this.storageKey}-code-verifier`),Za(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:s,error:a}=await Ko(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Ho});if(a)throw a;if(!s){throw new Error("An error occurred on token verification.")}const o=s.session,l=s.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(r){if(Za(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,n,r,i,s;try{let a=null,o=null;"pkce"===this.flowType&&([a,o]=await Uo(this.storage,this.storageKey));const l=await Ko(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Jo});return(null===(i=l.data)||void 0===i?void 0:i.url)&&Eo()&&!(null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(a){if(await No(this.storage,`${this.storageKey}-code-verifier`),Za(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new ro;const{error:r}=await Ko(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(Za(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:s}=await Ko(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}if("phone"in e){const{phone:n,type:r,options:i}=e,{data:s,error:a}=await Ko(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:a})}throw new ao("You must provide either an email or phone number and a type")}catch(t){if(Za(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(tc){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(tc){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Oo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Va;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Oo(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=Bo()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,n,r)=>{if("__isInsecureUserWarningProxy"===n)return!0;if("symbol"==typeof n){const t=n.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,n,r)}return t.value||"string"!=typeof n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,n,r)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Ko(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Go}):await this._useSession(async e=>{var t,n,r;const{data:i,error:s}=e;if(s)throw s;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Ko(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Go}):{data:{user:null},error:new ro}})}catch(t){if(Za(t))return io(t)&&(await this._removeSession(),await No(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new ro;const s=r.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await Uo(this.storage,this.storageKey));const{data:l,error:c}=await Ko(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:s.access_token,xform:Go});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await No(this.storage,`${this.storageKey}-code-verifier`),Za(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ro;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:s}=Io(e.access_token);if(s.exp&&(n=s.exp,r=n<=t),r){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:s}=await this._getUser(e.access_token);if(s)return this._returnResult({data:{user:null,session:null},error:s});i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(Za(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new ro;const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Za(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Eo())throw new oo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new oo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new lo("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new oo("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new lo("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:s,expires_in:a,expires_at:o,token_type:l}=e;if(!(i&&a&&s&&l))throw new oo("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=Ha&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:m}=await this._getUser(i);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:u,expires_at:d,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(n){if(Za(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),e):Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Oo(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i&&!io(i))return this._returnResult({error:i});const s=null===(n=r.session)||void 0===n?void 0:n.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return Za(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status)&&!io(t))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await No(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await Uo(this.storage,this.storageKey,!0));try{return await Ko(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(await No(this.storage,`${this.storageKey}-code-verifier`),Za(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(Za(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,i,s,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await Ko(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});if(r)throw r;return Eo()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),this._returnResult({data:{provider:e.provider,url:null==n?void 0:n.url},error:null})}catch(n){if(Za(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:i}}=t;if(r)throw r;const{options:s,provider:a,token:o,access_token:l,nonce:c}=e,u=await Ko(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(n=null==i?void 0:i.access_token)&&void 0!==n?n:void 0,body:{provider:a,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Ho}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new so})}catch(r){if(await No(this.storage,`${this.storageKey}-code-verifier`),Za(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:s}=t;if(s)throw s;return await Ko(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(Za(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await function(e,t){const n=new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const r=await e(i);if(!t(i,null,r))return void n(r)}catch(tc){if(!t(i,tc))return void r(tc)}})()});return n}(async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Ko(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ho})),(e,t)=>{const r=200*Math.pow(2,e);return t&&ho(t)&&Date.now()+r-n<Ha})}catch(n){if(this._debug(t,"error",n),Za(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Eo()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Oo(this.storage,this.storageKey);if(i&&this.userStorage){let t=await Oo(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:i.user},await Ro(this.userStorage,this.storageKey+"-user",t)),i.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:Bo()}else if(i&&!i.user&&!i.user){const e=await Oo(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(i.user=e.user,await No(this.storage,this.storageKey+"-user"),await Ro(this.storage,this.storageKey,i)):i.user=Bo()}if(this._debug(n,"session from storage",i),!this._isValidSession(i))return this._debug(n,"session is not valid"),void(null!==i&&await this._removeSession());const s=1e3*(null!==(t=i.expires_at)&&void 0!==t?t:1/0)-Date.now()<Va;if(this._debug(n,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:e}=await this._callRefreshToken(i.refresh_token);e&&(console.error(e),ho(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(i.access_token);!t&&(null==e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){return this._debug(n,"error",i),void console.error(i)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new ro;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Po;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new ro;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),Za(i)){const e={data:null,error:i};return ho(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(tc){r.push(tc)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await No(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Ro(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Wo(e);await Ro(this.storage,this.storageKey,r)}else{const e=Wo(t);await Ro(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await No(this.storage,this.storageKey),await No(this.storage,this.storageKey+"-code-verifier"),await No(this.storage,this.storageKey+"-user"),this.userStorage&&await No(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Eo()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(tc){console.error("removing visibilitychange callback failed",tc)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ha);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&"object"==typeof t&&"function"==typeof t.unref?t.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/Ha);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(tc){console.error("Auto refresh tick failed with error. This is likely a transient error.",tc)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(tc){if(!(tc.isAcquireTimeout||tc instanceof nl))throw tc;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Eo()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await Uo(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?this._returnResult({data:null,error:i}):await Ko(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Za(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:s}=t;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await Ko(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(n=null==i?void 0:i.session)||void 0===n?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(t){if(Za(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?pl(e.webauthn.credential_response):ml(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:o}=await Ko(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:o}))})}catch(t){if(Za(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return this._returnResult({data:null,error:i});const s=await Ko(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});if(s.error)return s;const{data:a}=s;if("webauthn"!==a.type)return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:hl(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:fl(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Za(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const i of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(i),"verified"===i.status&&r[i.factor_type].push(i);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,n,r,i;if(e)try{const{payload:r}=Io(e);let i=null;r.aal&&(i=r.aal);let s=i;const{data:{user:a},error:o}=await this.getUser(e);if(o)return this._returnResult({data:null,error:o});(null!==(n=null===(t=null==a?void 0:a.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(s="aal2");return{data:{currentLevel:i,nextLevel:s,currentAuthenticationMethods:r.amr||[]},error:null}}catch(u){if(Za(u))return this._returnResult({data:null,error:u});throw u}const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Io(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;(null!==(i=null===(r=s.user.factors)||void 0===r?void 0:r.filter(e=>"verified"===e.status))&&void 0!==i?i:[]).length>0&&(c="aal2");return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:o.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await Ko(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new ro})})}catch(t){if(Za(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new ro});const s=await Ko(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&Eo()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(Za(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new ro});const s=await Ko(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&Eo()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(Za(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await Ko(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new ro})})}catch(e){if(Za(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?(await Ko(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ro})})}catch(t){if(Za(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;const{data:i,error:s}=await Ko(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return i.keys&&0!==i.keys.length?(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(t=>t.kid===e),n||null):null}async getClaims(e,t={}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});n=e.session.access_token}const{header:r,payload:i,signature:s,raw:{header:a,payload:o}}=Io(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:r,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,u,s,xo(`${a}.${o}`))))throw new po("Invalid JWT signature");return{data:{claims:i,header:r,signature:s},error:null}}catch(n){if(Za(n))return this._returnResult({data:null,error:n});throw n}}}El.nextInstanceID={};const Cl=El;let jl="";jl="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Tl={headers:{"X-Client-Info":`supabase-js-${jl}/2.95.3`}},Rl={schema:"public"},Ol={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Nl={};function Pl(e){return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Il(e){var t=function(e,t){if("object"!=Pl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Pl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pl(t)?t:t+""}function Al(e,t,n){return(t=Il(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(n),!0).forEach(function(t){Al(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Dl=(e,t,n)=>{const r=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(n),i=Headers;return async(n,s)=>{var a;const o=null!==(a=await t())&&void 0!==a?a:e;let l=new i(null==s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,Ul(Ul({},s),{},{headers:l}))}};var $l=class extends Cl{constructor(e){super(e)}},Ml=class{constructor(e,t,n){var r,i;this.supabaseUrl=e,this.supabaseKey=t;const s=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const a=`sb-${s.hostname.split(".")[0]}-auth-token`,o=function(e,t){var n,r;const{db:i,auth:s,realtime:a,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Ul(Ul({},l),i),auth:Ul(Ul({},c),s),realtime:Ul(Ul({},u),a),storage:{},global:Ul(Ul(Ul({},d),o),{},{headers:Ul(Ul({},null!==(n=null==d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=n?n:{},{db:Rl,realtime:Nl,auth:Ul(Ul({},Ol),{},{storageKey:a}),global:Tl});var l;(this.storageKey=null!==(r=o.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=o.global.headers)&&void 0!==i?i:{},o.accessToken)?(this.accessToken=o.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(l=o.auth)&&void 0!==l?l:{},this.headers,o.global.fetch);this.fetch=Dl(t,this._getAccessToken.bind(this),o.global.fetch),this.realtime=this._initRealtimeClient(Ul({headers:this.headers,accessToken:this._getAccessToken.bind(this)},o.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new vs(new URL("rest/v1",s).href,{headers:this.headers,schema:o.db.schema,fetch:this.fetch,timeout:o.db.timeout,urlLengthLimit:o.db.urlLengthLimit}),this.storage=new Fa(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),o.accessToken||this._listenForAuthEvents()}get functions(){return new as(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t,n=this;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return null!==(e=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:a,lock:o,debug:l,throwOnError:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $l({url:this.authUrl.href,headers:Ul(Ul({},h),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:o,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Zs(this.realtimeUrl.href,Ul(Ul({},e),{},{params:Ul(Ul({},{apikey:this.supabaseKey}),null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}};(function(){if("undefined"!=typeof window)return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(null==t)return!1;const n=t.match(/^v(\d+)\./);return!!n&&parseInt(n[1],10)<=18})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Bl=((e,t,n)=>new Ml(e,t,n))("https://vgsnxczxnrxuorfgtlgx.supabase.co","sb_publishable_FOi7EsAeShTCDLXtXayP_g_GrTcDm6Y",{realtime:{params:{eventsPerSecond:10}}});function Wl(){const e=Bt(),[t,n]=R.useState(null);R.useEffect(()=>{(()=>{const e=window.Telegram?.WebApp;e?.initDataUnsafe?.user&&n(e.initDataUnsafe.user)})()},[]),R.useEffect(()=>{if(e.account?.address&&t){(async()=>{try{const{data:n}=await Bl.from("users").select("id").eq("telegram_id",t.id.toString()).single();n&&await Bl.from("users").update({ton_address:e.account.address}).eq("id",n.id)}catch(n){console.error("Error saving wallet address:",n)}})()}},[e.account,t]);return v.jsx("div",{className:"wallet-connect",children:e.connected?v.jsxs("div",{className:"neon-text",children:[v.jsx("div",{className:"text-sm mb-2",children:" Wallet Connected"}),v.jsx("div",{className:"font-bold",children:(r=e.account.address,`${r.slice(0,4)}...${r.slice(-4)}`)}),v.jsx("button",{className:"neon-button pulse mt-2",onClick:()=>e.disconnect(),children:"Disconnect"})]}):v.jsx("button",{className:"neon-button pulse",onClick:()=>e.connect(),children:"Connect Wallet"})});var r}function zl(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function ql(...e){return e.map(e=>"string"==typeof e?e:zl(e)?ql(Object.entries(e).map(e=>e[1]&&e[0])):Array.isArray(e)?ql(...e):void 0).filter(Boolean).join(" ")}function Fl(e,t){if(Array.isArray(t))return ql(t.map(t=>Fl(e,t)));if(zl(t))return ql(Object.entries(t).map(([t,n])=>n&&Fl(e,t)));const n=ql(t);return n&&`${e}--${n}`}function Kl(e,...t){return ql(e,Fl(e,t))}function Hl(e){return[(...t)=>Kl(e,t),(t,...n)=>Kl(`${e}__${t}`,n)]}console.log("Supabase client ready  URL and key loaded successfully");const[Vl,Gl]=Hl("rgb"),Jl=({color:e,className:t,...n})=>v.jsxs("span",{...n,className:ql(Vl(),t),children:[v.jsx("i",{className:Gl("icon"),style:{backgroundColor:e}}),e]}),Yl=({className:e,onClick:t,to:n,...r})=>{const i=Hr(),s=R.useCallback(e=>{let r;if(t?.(e),"string"==typeof n)r=n;else{const{search:e="",pathname:t="",hash:i=""}=n;r=`${t}?${e}#${i}`}const s=new URL(r,window.location.toString()),a=new URL(window.location.toString());(s.protocol!==a.protocol||s.host!==a.host)&&(e.preventDefault(),i.openLink(s.toString()))},[n,t,i]);return v.jsx(ir,{...r,to:n,onClick:s,className:ql(e,"link")})},[,Ql]=Hl("display-data"),Xl=({header:e,rows:t})=>v.jsx(Wi,{header:e,children:t.map((e,t)=>{let n;if(void 0===e.value)n=v.jsx("i",{children:"empty"});else if("type"in e)n=v.jsx(Yl,{to:e.value,children:"Open"});else if("string"==typeof e.value){n=/^rgb\(\d+,\s*\d+,\s*\d+\)$/.test(e.value)?v.jsx(Jl,{color:e.value}):e.value}else n="boolean"==typeof e.value?v.jsx(Hi,{checked:e.value,disabled:!0}):e.value;return v.jsx(vi,{className:Ql("line"),subhead:e.title,readOnly:!0,multiline:!0,children:v.jsx("span",{className:Ql("line-value"),children:n})},t)})});function Zl({children:e,back:t=!0}){const n=Un(),r=Wr();return R.useEffect(()=>{if(t)return r.show(),r.onClick(()=>{n(-1)});r.hide()},[t,r]),v.jsx(v.Fragment,{children:e})}function ec(e){return Object.entries(e).map(([e,t])=>({title:e,value:String(t)}))}const[,tc]=Hl("ton-connect-page"),nc=[{path:"/",Component:function(){const{initData:e}=qr(),[t,n]=R.useState(null),[r,i]=R.useState(!0),[s,a]=R.useState(!1),[o,l]=R.useState(0),[c,u]=R.useState(10),[d,h]=R.useState(100);!function(e,t){const[n,r]=R.useState(e?.last_energy_regen||(new Date).toISOString());R.useEffect(()=>{if(!e)return;const n=setInterval(async()=>{const n=new Date,i=new Date(e.last_energy_regen),s=Math.floor((n.getTime()-i.getTime())/6e4);if(s>=1&&e.energy<100){const i=Math.min(2*s,100-e.energy),o=e.energy+i;try{const{data:i}=await Bl.from("users").update({energy:o,last_energy_regen:n.toISOString()}).eq("id",e.id).select().single();i&&(t(i),r(i.last_energy_regen))}catch(a){console.error("Error regenerating energy:",a)}}},5e3);return()=>clearInterval(n)},[e,t])}(t,n),R.useEffect(()=>{f()},[]),R.useEffect(()=>{if(s&&c>0){const e=setTimeout(()=>u(c-1),1e3);return()=>clearTimeout(e)}s&&0===c&&p()},[s,c]);const f=async()=>{const t=e?.user;if(t?.id)try{const{data:e}=await Bl.from("users").select("*").eq("telegram_id",t.id.toString()).single();if(e)n(e),h(e.energy),localStorage.setItem("telegram_id",t.id.toString());else{const e={telegram_id:t.id.toString(),username:t.username||"Anonymous",score:0,energy:100,level:1,tap_multiplier:1,energy_boost:0},{data:r}=await Bl.from("users").insert(e).select().single();n(r),h(r.energy),localStorage.setItem("telegram_id",t.id.toString())}}catch(r){console.error("Error initializing user:",r)}finally{i(!1)}},p=async()=>{if(a(!1),t){const e=t.score+o,r=Math.floor(e/100)+1;await Bl.from("users").update({score:e,level:r}).eq("telegram_id",t.telegram_id),n(t=>t?{...t,score:e,level:r}:null)}alert(`Game Over! You scored ${o} taps!`)};if(r)return v.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."});const m=100+(t?.energy_boost||0),g=d/m*100;return v.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-cyan-400 p-4 relative overflow-hidden font-orbitron",children:[v.jsx("div",{className:"absolute inset-0 cyberpunk-scanlines"}),v.jsx("div",{className:"absolute inset-0 cyberpunk-particles"}),v.jsxs("div",{className:"relative z-10 max-w-md mx-auto",children:[v.jsx(_i,{className:"text-center mb-8 text-6xl font-black cyberpunk-title",children:" TAP DUEL "}),v.jsx("div",{className:"mb-8",children:v.jsx(Wl,{})}),v.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[v.jsxs("div",{className:"cyberpunk-card",children:[v.jsx("div",{className:"text-sm cyberpunk-label mb-2",children:"PLAYER"}),v.jsx("div",{className:"text-xl font-bold cyberpunk-text",children:t?.username||"Anonymous"})]}),v.jsxs("div",{className:"cyberpunk-card",children:[v.jsx("div",{className:"text-sm cyberpunk-label mb-2",children:"LEVEL"}),v.jsx("div",{className:"text-xl font-bold cyberpunk-text",children:t?.level||1})]}),v.jsxs("div",{className:"cyberpunk-card",children:[v.jsx("div",{className:"text-sm cyberpunk-label mb-2",children:"SCORE"}),v.jsx("div",{className:"text-xl font-bold cyberpunk-text cyberpunk-glitch",children:t?.score||0})]}),v.jsxs("div",{className:"cyberpunk-card",children:[v.jsx("div",{className:"text-sm cyberpunk-label mb-2",children:"MULTI"}),v.jsxs("div",{className:"text-xl font-bold cyberpunk-text",children:["x",t?.tap_multiplier||1]})]})]}),v.jsx("div",{className:"mb-8",children:v.jsxs("div",{className:"cyberpunk-card p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("span",{className:"cyberpunk-label",children:"ENERGY"}),v.jsxs("span",{className:"cyberpunk-text",children:[d,"/",m]})]}),v.jsxs("div",{className:"relative w-24 h-24 mx-auto",children:[v.jsxs("svg",{className:"w-24 h-24 transform -rotate-90",children:[v.jsx("circle",{cx:"48",cy:"48",r:"36",stroke:"rgba(0, 255, 255, 0.2)",strokeWidth:"8",fill:"none"}),v.jsx("circle",{cx:"48",cy:"48",r:"36",stroke:"url(#energyGradient)",strokeWidth:"8",fill:"none",strokeDasharray:""+2*Math.PI*36,strokeDashoffset:""+2*Math.PI*36*(1-g/100),className:"transition-all duration-500"}),v.jsx("defs",{children:v.jsxs("linearGradient",{id:"energyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[v.jsx("stop",{offset:"0%",stopColor:"#00ffff"}),v.jsx("stop",{offset:"50%",stopColor:"#00aaff"}),v.jsx("stop",{offset:"100%",stopColor:"#0044aa"})]})})]}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:v.jsxs("span",{className:"text-2xl font-bold cyberpunk-text",children:[Math.round(g),"%"]})})]})]})}),s?v.jsxs("div",{className:"text-center mb-8",children:[v.jsxs("div",{className:"mb-8",children:[v.jsx("div",{className:"text-9xl font-black mb-4 cyberpunk-text-cyber cyberpunk-glitch",children:o}),v.jsxs("div",{className:"text-4xl cyberpunk-text cyberpunk-breathe",children:[" TIME: ",c,"s "]})]}),v.jsx("div",{className:"relative inline-block",children:v.jsxs("button",{onClick:()=>{if(!s||0===c)return;const e=t?.tap_multiplier||1;l(t=>t+Math.floor(e))},className:"cyberpunk-tap-button",children:[v.jsx("span",{className:"cyberpunk-tap-text",children:"TAP!"}),v.jsx("div",{className:"cyberpunk-ripple"}),v.jsx("div",{className:"cyberpunk-particles-burst"})]})})]}):v.jsx("div",{className:"text-center mb-8",children:v.jsx("button",{onClick:()=>{d<10?alert(`Not enough energy! You need at least 10 energy to play. Current: ${d}/${100+(t?.energy_boost||0)}`):(a(!0),l(0),u(10),h(e=>e-10))},disabled:d<10,className:"cyberpunk-button-main w-full max-w-sm mx-auto disabled:opacity-50",children:" START TAPPING (10 Energy) "})}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsx("button",{onClick:()=>window.location.href="/duel",className:"cyberpunk-button-nav",children:" DUEL"}),v.jsx("button",{onClick:()=>window.location.href="/leaderboard",className:"cyberpunk-button-nav",children:" LEADERBOARD"}),v.jsx("button",{onClick:()=>window.location.href="/rewards",className:"cyberpunk-button-nav",children:" REWARDS"}),v.jsx("button",{onClick:()=>window.location.href="/shop",className:"cyberpunk-button-nav",children:" UPGRADES"})]})]})]})}},{path:"/duel",Component:function(){const{initData:e}=qr(),[t,n]=R.useState(null),[r,i]=R.useState(null),[s,a]=R.useState(!0),[o,l]=R.useState(!1),[c,u]=R.useState(0),[d,h]=R.useState(10),[f,p]=R.useState(!1),[m,g]=R.useState(0);R.useEffect(()=>{y()},[]),R.useEffect(()=>{if(f&&d>0){const e=setTimeout(()=>h(d-1),1e3);return()=>clearTimeout(e)}f&&0===d&&b()},[f,d]),R.useEffect(()=>{if(r&&"active"===r.status){const e=Bl.channel(`duel:${r.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"duels",filter:`id=eq.${r.id}`},e=>{const n=e.new;i(n),t&&(n.player1_id===t.id?g(n.player2_taps):g(n.player1_taps))}).subscribe();return()=>{Bl.removeChannel(e)}}},[r,t]);const y=async()=>{const t=e?.user;if(t?.id)try{const{data:e}=await Bl.from("users").select("*").eq("telegram_id",t.id.toString()).single();n(e)}catch(r){console.error("Error initializing user:",r)}finally{a(!1)}},b=async()=>{if(p(!1),!r||!t)return;const e=r.player1_id===t.id?c:r.player1_taps,n=r.player1_id===t.id?r.player2_taps:c;let s=null,a=0,o="",l=0;if(e>n){s=t.id,a=50;const r=e+a;l=Math.floor(.1*r);o=` VICTORY! You won with ${e} vs ${n} taps!\n +${e} taps + ${a} bonus = ${r} total\n 10% fee: -${l} points\n Net: +${r-l} points!`}else o=e<n?` DEFEAT! You lost with ${e} vs ${n} taps.`:` DRAW! Both players got ${e} taps!`;await Bl.from("duels").update({end_time:(new Date).toISOString(),winner_id:s,status:"completed",fee_amount:l}).eq("id",r.id);const d=t.score+e+a-l;await Bl.from("users").update({score:d}).eq("id",t.id),l>0&&await Bl.from("fee_transactions").insert({duel_id:r.id,winner_id:t.id,fee_amount:l,total_winnings:e+a,created_at:(new Date).toISOString()}),alert(o),i(null),u(0),g(0)};return s?v.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):v.jsx("div",{className:"min-h-screen bg-black text-cyan-400 p-4",children:v.jsxs("div",{className:"max-w-md mx-auto",children:[v.jsx(_i,{className:"text-center mb-6 text-5xl font-black neon-text glitch",children:" DUEL ARENA "}),v.jsxs(Wi,{className:"mb-4 neon-border",children:[v.jsx(vi,{children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("span",{className:"neon-text",children:[" Player: ",t?.username]}),v.jsxs("span",{className:"neon-text",children:[" Energy: ",t?.energy,"/100"]})]})}),v.jsx(vi,{children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("span",{className:"neon-text",children:[" Score: ",t?.score]}),v.jsxs("span",{className:"neon-text",children:[" Level: ",t?.level]})]})})]}),r?v.jsxs("div",{children:[v.jsx("div",{className:"text-center mb-6",children:v.jsx("div",{className:"text-3xl font-black neon-text glitch mb-4",children:"waiting"===r.status?" WAITING FOR OPPONENT... ":" DUEL IN PROGRESS! "})}),f&&v.jsxs("div",{children:[v.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[v.jsxs("div",{className:"text-center neon-border p-4 rounded-lg transition-all duration-300 hover:scale-105",children:[v.jsx("div",{className:"text-lg neon-text mb-3 font-bold",children:" YOU"}),v.jsx("div",{className:"text-6xl font-black neon-text glitch animate-pulse",children:c})]}),v.jsxs("div",{className:"text-center neon-border p-4 rounded-lg transition-all duration-300 hover:scale-105",children:[v.jsx("div",{className:"text-lg neon-text mb-3 font-bold",children:" OPPONENT"}),v.jsx("div",{className:"text-6xl font-black neon-text glitch animate-pulse",children:m})]})]}),v.jsx("div",{className:"text-center mb-8",children:v.jsxs("div",{className:"text-5xl neon-text breathe font-black",children:[" TIME: ",d,"s "]})}),v.jsx("div",{className:"text-center",children:v.jsxs("button",{onClick:()=>{if(!f||0===d||!r||!t)return;const e=t.tap_multiplier||1,n=c+Math.floor(e);u(n);const i=r.player1_id===t.id?{player1_taps:n}:{player2_taps:n};Bl.from("duels").update(i).eq("id",r.id)},className:"w-72 h-72 rounded-full transition-all duration-100 transform active:scale-95 text-white text-5xl font-black neon-border pulse breathe relative overflow-hidden",style:{background:"radial-gradient(circle, #00ffff 0%, #0088ff 30%, #0044aa 70%, #002255 100%)",boxShadow:"0 0 60px #00ffff, 0 0 120px #00ffff, 0 0 180px #0088ff, inset 0 0 60px rgba(0, 255, 255, 0.6)"},children:[v.jsx("span",{className:"relative z-10 drop-shadow-2xl animate-pulse",children:"TAP!"}),v.jsx("div",{className:"absolute inset-0 rounded-full bg-white opacity-0 animate-ping"}),v.jsx("div",{className:"absolute inset-0 rounded-full bg-cyan-400 opacity-20 animate-pulse"})]})})]})]}):v.jsxs("div",{className:"text-center",children:[v.jsx(Ai,{onClick:async()=>{if(!t||t.energy<20)alert("Not enough energy! You need at least 20 energy for a duel.");else{l(!0);try{const{data:e}=await Bl.from("duels").select("*").eq("status","waiting").neq("player1_id",t.id).limit(1);if(e&&e.length>0){const n=e[0],{data:r}=await Bl.from("duels").update({player2_id:t.id,status:"active",start_time:(new Date).toISOString()}).eq("id",n.id).select().single();i(r),p(!0),u(0),h(10),await Bl.from("users").update({energy:t.energy-20}).eq("id",t.id)}else{const{data:e}=await Bl.from("duels").insert({player1_id:t.id,status:"waiting"}).select().single();i(e);const n=setInterval(async()=>{const{data:t}=await Bl.from("duels").select("*").eq("id",e.id).single();t&&"active"===t.status&&(i(t),p(!0),u(0),h(10),clearInterval(n))},1e3);setTimeout(()=>{clearInterval(n),f||(alert("No opponent found. Try again!"),l(!1),i(null))},3e4)}}catch(e){console.error("Error finding duel:",e),alert("Error finding duel. Please try again.")}finally{l(!1)}}},disabled:o||(t?.energy||0)<20,className:"neon-button pulse font-bold py-6 px-12 rounded-lg text-xl transition-all duration-300 hover:scale-105 shadow-[0_0_30px_#00ffff,0_0_60px_#00aaff] ring-cyan-500/50",style:{background:"linear-gradient(135deg, #00ffff 0%, #0088ff 50%, #0044aa 100%)"},children:o?" SEARCHING... ":" FIND DUEL (20 Energy) "}),o&&v.jsx("div",{className:"mt-4 text-xl neon-text animate-pulse",children:" Looking for opponent... Please wait... "})]}),v.jsx("div",{className:"mt-8",children:v.jsx(Ai,{onClick:()=>window.location.href="/",className:"neon-button pulse font-bold py-4 px-8 rounded-lg w-full text-lg transition-all duration-300 hover:scale-105 shadow-[0_0_30px_#00ffff,0_0_60px_#00aaff] ring-cyan-500/50",style:{background:"linear-gradient(135deg, #00ffff 0%, #0088ff 50%, #0044aa 100%)"},children:" HOME"})})]})})}},{path:"/leaderboard",Component:function(){const[e,t]=R.useState([]),[n,r]=R.useState(!0);R.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:e}=await Bl.from("users").select("*").order("score",{ascending:!1}).limit(20);t(e||[])}catch(e){console.error("Error fetching leaderboard:",e)}finally{r(!1)}},s=e=>{switch(e){case 1:return"";case 2:return"";case 3:return"";default:return`#${e}`}};return n?v.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):v.jsx("div",{className:"min-h-screen bg-black text-cyan-400 p-4",children:v.jsxs("div",{className:"max-w-md mx-auto",children:[v.jsx(_i,{className:"text-center mb-6 text-cyan-400 font-bold",children:" LEADERBOARD "}),v.jsx(Wi,{className:"mb-4",children:e.map((e,t)=>v.jsx(vi,{children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("span",{className:"text-xl font-bold",children:s(t+1)}),v.jsxs("div",{children:[v.jsx("div",{className:"font-semibold",children:e.username}),v.jsxs("div",{className:"text-sm text-cyan-300",children:["Level ",e.level]})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsx("div",{className:"font-bold text-cyan-300",children:e.score}),v.jsx("div",{className:"text-xs text-cyan-500",children:"points"})]})]})},e.id))}),v.jsx("div",{className:"mt-6",children:v.jsx(Ai,{onClick:()=>window.location.href="/",className:"bg-gray-600 hover:bg-gray-500 text-white w-full",children:" HOME"})})]})})}},{path:"/rewards",Component:function(){const[e,t]=R.useState(null),[n,r]=R.useState(!0),[i,s]=R.useState(!1);R.useEffect(()=>{a()},[]);const a=async()=>{try{const e=localStorage.getItem("telegram_id");if(!e)return;const{data:n}=await Bl.from("users").select("*").eq("telegram_id",e).single();t(n)}catch(e){console.error("Error initializing user:",e)}finally{r(!1)}};return n?v.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):v.jsx("div",{className:"min-h-screen bg-black text-cyan-400 p-4",children:v.jsxs("div",{className:"max-w-md mx-auto",children:[v.jsx(_i,{className:"text-center mb-6 text-cyan-400 font-bold",children:" DAILY REWARDS "}),v.jsxs(Wi,{className:"mb-4",children:[v.jsx(vi,{children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("span",{children:["Player: ",e?.username]}),v.jsxs("span",{children:["Level: ",e?.level]})]})}),v.jsx(vi,{children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("span",{children:["Current Score: ",e?.score]}),v.jsxs("span",{children:["Energy: ",e?.energy,"/100"]})]})})]}),v.jsx(Wi,{className:"mb-4",children:v.jsx(vi,{children:v.jsxs("div",{className:"text-center",children:[v.jsx("h3",{className:"text-xl font-bold mb-2 text-cyan-300",children:"Daily Reward"}),v.jsxs("div",{className:"mb-4",children:[v.jsx("div",{className:"text-lg",children:"Base Reward: 50 points"}),v.jsxs("div",{className:"text-lg",children:["Level Bonus: +",e?.level||0,"0 points"]}),v.jsxs("div",{className:"text-lg font-bold text-cyan-300",children:["Total: ",50+10*(e?.level||0)," points"]}),v.jsx("div",{className:"text-sm text-cyan-500 mt-2",children:"+30 Energy Bonus"})]}),(()=>{if(!e)return!1;const t=new Date,n=new Date(e.updated_at);return t.getDate()!==n.getDate()||t.getMonth()!==n.getMonth()||t.getFullYear()!==n.getFullYear()||!e.daily_reward_claimed})()?v.jsx(Ai,{onClick:async()=>{if(e&&!e.daily_reward_claimed){s(!0);try{const n=50+10*e.level,{data:r}=await Bl.from("users").update({score:e.score+n,daily_reward_claimed:!0,energy:Math.min(e.energy+30,100)}).eq("id",e.id).select().single();t(r),alert(` Daily reward claimed! +${n} points and +30 energy!`)}catch(n){console.error("Error claiming daily reward:",n),alert("Error claiming reward. Please try again.")}finally{s(!1)}}},disabled:i,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg shadow-green-500/50 transition-all duration-200 transform hover:scale-105",children:i?"CLAIMING...":"CLAIM DAILY REWARD"}):v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-cyan-300 mb-2",children:" Already claimed today!"}),v.jsxs("div",{className:"text-sm text-cyan-500",children:["Next claim: ",(()=>{if(!e)return"";const t=new Date;return t.setDate(t.getDate()+1),t.setHours(0,0,0,0),t.toLocaleString()})()]})]})]})})}),v.jsx(Wi,{className:"mb-4",children:v.jsx(vi,{children:v.jsxs("div",{className:"text-center",children:[v.jsx("h3",{className:"text-lg font-bold mb-2 text-cyan-300",children:"Level Progress"}),v.jsxs("div",{className:"mb-2",children:[v.jsxs("div",{className:"text-sm",children:["Level ",e?.level||1]}),v.jsx("div",{className:"w-full bg-gray-700 rounded-full h-4 mt-2",children:v.jsx("div",{className:"bg-cyan-400 h-4 rounded-full transition-all duration-300",style:{width:(e?.score||0)%100+"%"}})}),v.jsxs("div",{className:"text-xs text-cyan-500 mt-1",children:[(e?.score||0)%100,"/100 to next level"]})]})]})})}),v.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[v.jsx(Ai,{onClick:()=>window.location.href="/shop",className:"bg-purple-600 hover:bg-purple-500 text-white",children:" UPGRADES"}),v.jsx(Ai,{onClick:()=>window.location.href="/",className:"bg-gray-600 hover:bg-gray-500 text-white",children:" HOME"})]})]})})}},{path:"/shop",Component:function(){const[e,t]=R.useState(null),[n,r]=R.useState(!0),[i,s]=R.useState(null);R.useEffect(()=>{a()},[]);const a=async()=>{try{const e=localStorage.getItem("telegram_id");if(!e)return;const{data:n}=await Bl.from("users").select("*").eq("telegram_id",e).single();t(n)}catch(e){console.error("Error initializing user:",e)}finally{r(!1)}},o=()=>e?[{id:"tap_multiplier",name:"Tap Multiplier",description:"Increase taps per click",cost:Math.floor(100*(e.tap_multiplier||1)),effect:`x${((e.tap_multiplier||1)+.1).toFixed(1)}`,maxLevel:5,currentLevel:10*Math.floor((e.tap_multiplier||1)-1)},{id:"energy_boost",name:"Energy Boost",description:"Increase max energy capacity",cost:200,effect:"+20 max energy",maxLevel:5,currentLevel:e.energy_boost||0},{id:"energy_regen",name:"Energy Regeneration",description:"Faster energy recovery",cost:150,effect:"+1 energy per minute",maxLevel:3,currentLevel:0}]:[];if(n)return v.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."});const l=o();return v.jsx("div",{className:"min-h-screen bg-black text-cyan-400 p-4",children:v.jsxs("div",{className:"max-w-md mx-auto",children:[v.jsx(_i,{className:"text-center mb-6 text-cyan-400 font-bold",children:" UPGRADE SHOP "}),v.jsxs(Wi,{className:"mb-4",children:[v.jsx(vi,{children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("span",{children:["Player: ",e?.username]}),v.jsxs("span",{children:["Level: ",e?.level]})]})}),v.jsx(vi,{children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("span",{children:["Points: ",e?.score]}),v.jsxs("span",{children:["Energy: ",e?.energy,"/",100+(e?.energy_boost||0)]})]})})]}),v.jsx(Wi,{className:"mb-4",children:l.map(n=>v.jsx(vi,{children:v.jsxs("div",{className:"mb-4",children:[v.jsxs("div",{className:"flex justify-between items-start mb-2",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-bold text-cyan-300",children:n.name}),v.jsx("p",{className:"text-sm text-cyan-500",children:n.description}),v.jsxs("div",{className:"text-xs text-cyan-400 mt-1",children:["Level: ",n.currentLevel,"/",n.maxLevel]})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("div",{className:"text-lg font-bold text-cyan-400",children:[n.cost," pts"]}),v.jsx("div",{className:"text-xs text-cyan-500",children:n.effect})]})]}),v.jsx(Ai,{onClick:()=>(async n=>{if(!e)return;const r=o().find(e=>e.id===n);if(r)if(e.score<r.cost)alert("Not enough points!");else if(r.currentLevel>=r.maxLevel)alert("Maximum level reached!");else{s(n);try{let i={score:e.score-r.cost};switch(n){case"tap_multiplier":i.tap_multiplier=(e.tap_multiplier||1)+.1;break;case"energy_boost":i.energy_boost=(e.energy_boost||0)+20,i.energy=Math.min(e.energy+20,100+(e.energy_boost||0)+20)}const{data:s}=await Bl.from("users").update(i).eq("id",e.id).select().single();t(s),alert(` Upgrade purchased: ${r.name}!`)}catch(i){console.error("Error purchasing upgrade:",i),alert("Error purchasing upgrade. Please try again.")}finally{s(null)}}})(n.id),disabled:i===n.id||(e?.score||0)<n.cost||n.currentLevel>=n.maxLevel,className:`w-full ${n.currentLevel>=n.maxLevel?"bg-gray-600 text-gray-400":i===n.id?"bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"} font-bold py-2 px-4 rounded transition-all duration-200`,children:n.currentLevel>=n.maxLevel?"MAX LEVEL":i===n.id?"PURCHASING...":"PURCHASE"})]})},n.id))}),v.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[v.jsx(Ai,{onClick:()=>window.location.href="/rewards",className:"bg-green-600 hover:bg-green-500 text-white",children:" REWARDS"}),v.jsx(Ai,{onClick:()=>window.location.href="/",className:"bg-gray-600 hover:bg-gray-500 text-white",children:" HOME"})]})]})})}},{path:"/init-data",Component:()=>{const e=zr();if(!e)return v.jsx(Zl,{children:v.jsx(Ui,{header:"Oops",description:"Application was launched with missing init data",children:v.jsx("img",{alt:"Telegram sticker",src:"https://xelene.me/telegram.gif",style:{display:"block",width:"144px",height:"144px"}})})});const t=R.useMemo(()=>[{title:"raw",value:JSON.stringify(e)},...Object.entries(e).reduce((e,[t,n])=>(n instanceof Date?e.push({title:t,value:n.toISOString()}):n&&"object"==typeof n||e.push({title:t,value:String(n)}),e),[])],[e]),n=R.useMemo(()=>e.user?ec(e.user):void 0,[e]),r=R.useMemo(()=>e.receiver?ec(e.receiver):void 0,[e]),i=R.useMemo(()=>e.chat?Object.entries(e.chat).map(([e,t])=>({title:e,value:String(t)})):void 0,[e]);return v.jsx(Zl,{children:v.jsxs(Li,{children:[v.jsx(Xl,{header:"Init Data",rows:t}),n&&v.jsx(Xl,{header:"User",rows:n}),r&&v.jsx(Xl,{header:"Receiver",rows:r}),i&&v.jsx(Xl,{header:"Chat",rows:i})]})})},title:"Init Data"},{path:"/theme-params",Component:()=>{const e=Kr();return v.jsx(Zl,{children:v.jsx(Li,{children:v.jsx(Xl,{rows:Object.entries(e||{}).map(([e,t])=>({title:e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`).replace(/background/,"bg"),value:String(t)}))})})})},title:"Theme Params"},{path:"/launch-params",Component:()=>{const e=qr();return v.jsx(Zl,{children:v.jsx(Li,{children:v.jsx(Xl,{rows:[{title:"tgWebAppPlatform",value:e.tgWebAppPlatform},{title:"tgWebAppShowSettings",value:e.tgWebAppShowSettings},{title:"tgWebAppVersion",value:e.tgWebAppVersion},{title:"tgWebAppBotInline",value:e.tgWebAppBotInline},{title:"tgWebAppStartParam",value:e.tgWebAppStartParam},{title:"tgWebAppData",type:"link",value:"/init-data"},{title:"tgWebAppThemeParams",type:"link",value:"/theme-params"}]})})})},title:"Launch Params"},{path:"/ton-connect",Component:()=>{const e=Bt();return Hr(),v.jsxs(Zl,{children:[v.jsx(Li,{children:v.jsx(Ui,{header:"TON Connect",description:e.connected?"You are already connected":"To display the data related to the TON Connect, it is required to connect your wallet",action:e.connected?v.jsx("button",{className:tc("button-connected"),onClick:()=>e.disconnect(),children:"Disconnect"}):v.jsx("button",{className:tc("button"),onClick:()=>e.connect(),children:"Connect Wallet"}),children:v.jsx("div",{style:{width:96,height:96,borderRadius:"50%",backgroundColor:e.connected?"#0088cc":"#ccc",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"24px"},children:e.connected?"":"?"})})}),e.connected&&v.jsxs(Wi,{header:"Wallet",children:[v.jsx(vi,{subtitle:"Connection status",children:"Connected"}),v.jsx(vi,{subtitle:"Wallet address",children:e.account.address})]})]})},title:"TON Connect",icon:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 56 56",fill:"none",children:[v.jsx("path",{d:"M28 56C43.464 56 56 43.464 56 28C56 12.536 43.464 0 28 0C12.536 0 0 12.536 0 28C0 43.464 12.536 56 28 56Z",fill:"#0098EA"}),v.jsx("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5381 22.4861C43.3045 19.4251 41.0761 15.6277 37.5627 15.6277H37.5603ZM26.2548 36.8068L23.6847 31.8327L17.4833 20.7414C17.0742 20.0315 17.5795 19.1218 18.4362 19.1218H26.2524V36.8092L26.2548 36.8068ZM38.5108 20.739L32.3118 31.8351L29.7417 36.8068V19.1194H37.5579C38.4146 19.1194 38.9199 20.0291 38.5108 20.739Z",fill:"white"})]})}];function rc(e,t){const n=R.useRef(null),[r,i]=R.useState("waiting"),[s,a]=R.useState(null),[o,l]=R.useState([]),[c,u]=R.useState({}),[d,h]=R.useState(null);return R.useEffect(()=>{const r=new WebSocket(`wss://${window.location.host}`);return n.current=r,r.onopen=()=>{r.send(JSON.stringify({type:"join",duelId:e,playerId:t}))},r.onmessage=e=>{const t=JSON.parse(e.data);"players"===t.type&&(l(t.players),i(t.state)),"countdown"===t.type&&(a(t.value),i("countdown")),"start"===t.type&&(a(null),i("active")),"tap_update"===t.type&&u(e=>({...e,[t.playerId]:t.taps})),"result"===t.type&&(i("finished"),h(t))},()=>{r.close()}},[e,t]),{state:r,countdown:s,players:o,taps:c,result:d,sendTap:function(){n.current&&n.current.send(JSON.stringify({type:"tap",duelId:e,playerId:t}))}}}function ic({duelId:e,playerId:t,walletAddress:n}){const r=Un(),{state:i,countdown:s,players:a}=rc(e,t),o=n?n.slice(0,4)+"..."+n.slice(-4):null,[l,c]=R.useState(null),[u,d]=R.useState("");return R.useEffect(()=>{n&&fetch(`/api/ton/balance?address=${n}`).then(e=>e.json()).then(e=>c(e.balance)).catch(e=>console.error("TON balance fetch error:",e))},[n]),R.useEffect(()=>{"active"===i&&r(`/duel/${e}?stake=${u}`)},[i,e,t,r,u]),v.jsxs("div",{style:{padding:20,textAlign:"center"},children:[o&&v.jsxs("div",{style:{marginBottom:12,fontSize:14,opacity:.8},children:["Wallet: ",o]}),null!==l&&v.jsxs("div",{style:{marginBottom:12,fontSize:14,opacity:.8},children:["Balance: ",l/1e9," TON"]}),n&&v.jsxs("div",{style:{marginBottom:16},children:[v.jsx("label",{style:{fontSize:14,opacity:.8},children:"Stake (TON):"}),v.jsx("input",{type:"number",value:u,onChange:e=>d(e.target.value),placeholder:"0.1",min:"0",step:"0.01",style:{width:"100%",padding:"10px",fontSize:16,borderRadius:8,border:"1px solid #ccc",marginTop:6}})]}),v.jsx("h2",{children:"Waiting for Opponent"}),v.jsxs("p",{children:["Duel ID: ",e]}),v.jsx("h3",{children:"Players Connected:"}),v.jsx("ul",{children:a.map(e=>v.jsx("li",{children:e},e))}),"countdown"===i&&v.jsx("h1",{style:{fontSize:48},children:s}),"waiting"===i&&v.jsx("p",{children:"Waiting for second player"})]})}function sc({duelId:e,playerId:t}){const{state:n,countdown:r,players:i,taps:s,result:a,sendTap:o}=rc(e,t);return"countdown"===n?v.jsx("div",{style:{padding:20,textAlign:"center"},children:v.jsx("h1",{style:{fontSize:48},children:r})}):"finished"===n&&a?v.jsxs("div",{style:{padding:20,textAlign:"center"},children:[v.jsx("h2",{children:"Duel Finished!"}),v.jsxs("h3",{children:["Winner: ",a.winner]}),v.jsxs("p",{children:["Your taps: ",s[t]||0]}),a.second&&v.jsxs("p",{children:["Opponent taps: ",s[a.second]||0]}),v.jsx("button",{onClick:()=>{const e=`https://t.me/tapduelbot?start=${"duel_"+Math.random().toString(36).slice(2,10)}`;window.Telegram?.WebApp?.openTelegramLink(e)},style:{marginTop:20,padding:"12px 24px",fontSize:18,borderRadius:8,cursor:"pointer"},children:"Challenge a Friend"})]}):v.jsxs("div",{style:{padding:20,textAlign:"center"},children:[v.jsx("h2",{children:"Duel Active!"}),v.jsxs("h3",{children:["Your taps: ",s[t]||0]}),v.jsx("h3",{children:"Opponent taps:"}),v.jsx("ul",{children:i.filter(e=>e!==t).map(e=>v.jsxs("li",{children:[e,": ",s[e]||0]},e))}),v.jsx("button",{onClick:o,style:{marginTop:40,padding:"20px 40px",fontSize:24,borderRadius:12,cursor:"pointer"},children:"TAP!"})]})}function ac(){const e=window.Telegram?.WebApp;return{tg:e,user:e?.initDataUnsafe?.user,init:()=>{e?.expand(),e?.disableVerticalSwipe(),e?.enableClosingConfirmation()}}}function oc(){const e=Un();return ac(),R.useEffect(()=>{const t=Math.random().toString(36).slice(2,10);e(`/lobby/${t}`)},[e]),null}function lc(){const e=qr(),t=Fr().isDark,{tg:n,user:r,init:i}=ac(),s=Bt(),a=Un(),o=s.account?.address||null;R.useEffect(()=>{i()},[]);const l=r?.id?.toString()||"local_"+Math.random().toString(36).slice(2),c=o||l,u=n?.initDataUnsafe?.start_param;return R.useEffect(()=>{if(u&&u.startsWith("duel_")){const e=u.replace("duel_","");a(`/lobby/${e}`)}},[u,a]),v.jsxs(Zi,{appearance:t?"dark":"light",platform:["macos","ios"].includes(e.platform)?"ios":"base",children:[v.jsx("div",{style:{padding:12,display:"flex",justifyContent:"flex-end"},children:v.jsx(es,{})}),v.jsx(tr,{children:v.jsxs(Yn,{children:[nc.map(e=>v.jsx(Gn,{...e},e.path)),v.jsx(Gn,{path:"/lobby/:duelId",element:v.jsx(ic,{playerId:c,walletAddress:o})}),v.jsx(Gn,{path:"/duel/:duelId",element:v.jsx(sc,{playerId:c,walletAddress:o})}),v.jsx(Gn,{path:"/lobby/new",element:v.jsx(oc,{})}),v.jsx(Gn,{path:"*",element:v.jsx(Vn,{to:"/"})})]})})]})}class cc extends R.Component{state={};static getDerivedStateFromError=e=>({error:e});componentDidCatch(e){this.setState({error:e})}render(){const{state:{error:e},props:{fallback:t,children:n}}=this;return"error"in this.state?"function"==typeof t?v.jsx(t,{error:e}):t:n}}function uc({error:e}){return v.jsxs("div",{children:[v.jsx("p",{children:"An unhandled error occurred:"}),v.jsx("blockquote",{children:v.jsx("code",{children:e instanceof Error?e.message:"string"==typeof e?e:JSON.stringify(e)})})]})}function dc(){return v.jsx(cc,{fallback:uc,children:v.jsx(Mt,{children:v.jsx(lc,{})})})}function hc(){const[e,t]=R.useMemo(()=>["android",!1],[]);return v.jsx(Zi,{appearance:t?"dark":"light",platform:["macos","ios"].includes(e)?"ios":"base",children:v.jsx(Ui,{header:"Oops",description:"You are using too old Telegram client to run this application",children:v.jsx("img",{alt:"Telegram sticker",src:"https://xelene.me/telegram.gif",style:{display:"block",width:"144px",height:"144px"}})})})}console.log("Frontend loaded"),console.log("TG:",window.Telegram?.WebApp),console.log("initData:",window.Telegram?.WebApp?.initData),console.log("initDataUnsafe:",window.Telegram?.WebApp?.initDataUnsafe),window.addEventListener("error",e=>console.error("Global error:",e.error)),window.addEventListener("unhandledrejection",e=>console.error("Unhandled promise:",e.reason)),document.addEventListener("DOMContentLoaded",async()=>{console.log("Step 1: DOMContentLoaded"),window.Telegram&&window.Telegram.WebApp?(console.log("Step 2: Telegram WebApp detected, calling ready()"),window.Telegram.WebApp.ready(),console.log("Step 3: Telegram WebApp ready completed")):console.log("Step 2: Telegram WebApp not detected");const e=T.createRoot(document.getElementById("root"));try{const t=window.Telegram?.WebApp,n=t?.platform||"unknown",r=!1;console.log("Step 4: Configuring application dependencies"),await async function(){}(r&&["ios","android"].includes(n)),console.log("Step 5: Rendering React app"),e.render(v.jsx(R.StrictMode,{children:v.jsx(dc,{})})),console.log("Step 6: App initialization complete")}catch(tc){console.error("App initialization failed:",tc),e.render(v.jsx(hc,{}))}});
